import{F as E}from"./FormResidentEstimateSemaforoById-0595c8c7.js";import{A as g}from"./ArrowBack-4510c839.js";import{T as k}from"./TitleBar-2bdb3669.js";import{_ as y,o as i,c as n,d as e,t as o,F as m,f as p,n as w,h as x,j as I,q as j,u as B,m as H,b as u,e as v,p as R,k as A}from"./index-0f1db36f.js";import{f as C,j as F}from"./residentEstimate-62ea0bcf.js";import{S}from"./sweetalert2.all-281a79b7.js";import"./InputBase-394f1e33.js";import"./fetchApi-ac390768.js";import"./SelectBase-b90bb72d.js";import"./TextAreaBase-43126d0c.js";import"./index-af0f30a5.js";const N={name:"TableBase",props:{description:{type:String,required:!1,default:""},headers:{type:Array,default:()=>[{label:"Example Header",field:"example"}]},data:{type:Array,default:()=>[{example:"value 1"}]},options:{type:Array,default:[]}},setup(){return{dots:[1,2,3],openActions:s=>{document.getElementById(s).classList.toggle("hidden")}}}},z={class:"border border-solid border-black border-collapse text-gray-900 w-full"},T={class:"text-white"},V={key:0},q={key:0,class:"p-2 border border-solid border-gray-100 relative"},D={class:"flex justify-center"},L=["onClick"],M=["id","onMouseleave"],O={class:"flex flex-col"},P=["onClick"];function G(r,f,s,t,h,b){return i(),n("table",z,[e("caption",T,o(s.description),1),e("tr",null,[(i(!0),n(m,null,p(s.headers,(l,a)=>(i(),n("th",{key:a,class:"p-2 border border-b-2 border-solid border-black"},o(l.label),1))),128))]),(i(!0),n(m,null,p(s.data,(l,a)=>(i(),n("tr",{id:"rows",class:w(["",{" bg-gray-100":a%2===0}]),key:a},[(i(!0),n(m,null,p(s.headers,(d,_)=>(i(),n("td",{key:_,class:"p-2 border border-solid border-black"},[d.label==="#"?(i(),n("p",V,o(a+1),1)):x("",!0),I(" "+o(l[d.field]),1)]))),128)),s.options.length?(i(),n("td",q,[e("div",D,[e("div",{class:"p-1 cursor-pointer",onClick:d=>t.openActions(`table-actions-${a}`)},[(i(!0),n(m,null,p(t.dots,(d,_)=>(i(),n("span",{key:_,class:"rounded-full h-1 w-1 block bg-blue mb-1"}))),128))],8,L)]),r.option!==null?(i(),n("div",{key:0,class:"hidden absolute right-4 top-8 bg-white z-10",style:{"box-shadow":"-3px 3px 6px #00000029"},id:`table-actions-${a}`,onMouseleave:d=>t.openActions(`table-actions-${a}`)},[e("div",O,[(i(!0),n(m,null,p(s.options,(d,_)=>(i(),n("div",{key:_,class:"h-8 flex justify-center items-center py-2 px-8"},[e("p",{class:"text-xs border-b border-solid border-gray-100 cursor-pointer hover:border-gray hover:font-medium",onClick:Ce=>d.action(l)},o(d.label),9,P)]))),128))])],40,M)):x("",!0)])):x("",!0)],2))),128))])}const J=y(N,[["render",G]]);const K={name:"Historico",components:{FormResidentEstimate:E,ArrowBack:g,TitleBar:k,TableBaseIndex:J},setup(){const r=j(),f=B(),s=H({residentEstimate:{},residentEstimateHistory:[],fecha_recepcion_info_contratista:"",fecha_periodo_inicio_estimacion:"",fecha_periodo_fin_estimacion:"",loading:!0}),t=[{label:"#",field:""},{label:"Fecha",field:"fecha_historial_estimacion"},{label:"Estatus",field:"estatus_historial_estimacion"},{label:"Observaciones",field:"observaciones_residente"}],h=async()=>{s.loading=!0;const{data:a}=await C(r.params.residentEstimateId);s.residentEstimate=a,s.fecha_recepcion_info_contratista=a.fecha_recepcion_info_contratista.split(" ")[0],s.fecha_periodo_inicio_estimacion=a.fecha_periodo_inicio_estimacion.split(" ")[0],s.fecha_periodo_fin_estimacion=a.fecha_periodo_fin_estimacion.split(" ")[0],s.loading=!1},b=async()=>{s.loading=!0;const{data:a}=await F(r.params.residentEstimateId);s.residentEstimateHistory=a,s.loading=!1},l=async a=>{await updateResident(a),S.fire("¡Éxito!","!Estimación residente actualizado con éxito!","success"),f.push({name:"Resident"})};return h(),b(),{app:s,saveResident:l,headers:t}}},c=r=>(R("data-v-6c2cb961"),r=r(),A(),r),Q={class:"px-4 mt-10"},U={class:"mb-10"},W={class:"flex items-center"},X=c(()=>e("p",{class:"font-semibold text-center"},"Número de contrato (de origen)",-1)),Y={class:"text-sm text-center ml-2"},Z=c(()=>e("p",{class:"font-semibold text-center ml-80 text-red"},"Número de la Estimación",-1)),$={class:"text-xl font-semibold text-red text-center ml-2"},ee=c(()=>e("p",{class:"font-semibold text-center ml-10 text-red"},"Días transcurridos",-1)),te={class:"text-sm font-semibold text-red text-center ml-4"},se={class:"flex items-center"},oe=c(()=>e("p",{class:"font-semibold text-center"},"Objeto del contrato",-1)),ae={class:"text-sm text-center ml-4"},ie={class:"flex items-center"},ne=c(()=>e("p",{class:"font-semibold text-center"},"Fecha de recepción",-1)),ce={class:"text-sm text-center ml-2"},re=c(()=>e("p",{class:"font-semibold text-center ml-2 text-red"},"Fecha de autorización",-1)),de={class:"text-sm text-center ml-2 text-red"},le=c(()=>e("p",{class:"font-semibold text-center ml-2"},"Periodo de la Estimación",-1)),_e={class:"text-sm text-center ml-2"},me=c(()=>e("p",{class:"font-semibold text-center ml-2"},"al",-1)),pe={class:"text-sm text-center ml-2"},fe={class:"flex items-center"},he=c(()=>e("p",{class:"font-semibold text-center"},"Importe de la obra ejecutada",-1)),be={class:"text-sm text-center ml-2"},xe=c(()=>e("p",{class:"font-semibold text-center ml-2"},"Importe a pagar",-1)),ue={class:"text-sm text-center ml-2"},ve={class:"flex items-center"},ye=c(()=>e("p",{class:"font-semibold text-center"},"% de avance físico",-1)),Ee={class:"text-sm text-center ml-2"},ge=c(()=>e("p",{class:"font-semibold text-center ml-2"},"% de avance financiero",-1)),ke={class:"text-sm text-center ml-2"},we=c(()=>e("p",{class:"font-semibold text-center ml-2"},"% de grado de avance",-1)),Ie={class:"text-sm text-center ml-2"},je=c(()=>e("p",{class:"font-semibold text-center ml-2"},"% de avance de la Estimación",-1)),Be={class:"text-sm text-center ml-2"},He=c(()=>e("p",{class:"font-semibold text-center ml-2"},"% de avance de la Estimación acumulado",-1)),Re={class:"text-sm text-center ml-2"};function Ae(r,f,s,t,h,b){const l=u("arrow-back"),a=u("title-bar"),d=u("table-base-index");return i(),n("main",Q,[v(l),v(a,{title:"Estimación Residente",subtitle:"Histórico"}),e("div",U,[e("div",W,[X,e("p",Y,o(t.app.residentEstimate.numero_contrato),1),Z,e("p",$,o(t.app.residentEstimate.num_consecutivo_estimacion),1),ee,e("p",te,o(t.app.residentEstimate.dias_transcurridos),1)]),e("div",se,[oe,e("p",ae,o(t.app.residentEstimate.objeto_contrato),1)]),e("div",ie,[ne,e("p",ce,o(t.app.fecha_recepcion_info_contratista),1),re,e("p",de,o(t.app.residentEstimate.fecha_autorizacion_contratista),1),le,e("p",_e,o(t.app.fecha_periodo_inicio_estimacion),1),me,e("p",pe,o(t.app.fecha_periodo_fin_estimacion),1)]),e("div",fe,[he,e("p",be,o(t.app.residentEstimate.frt_importe_obra_ejecutada),1),xe,e("p",ue,o(t.app.residentEstimate.frt_importe_pagar),1)]),e("div",ve,[ye,e("p",Ee,o(t.app.residentEstimate.porcentaje_avance_fisico)+"%",1),ge,e("p",ke,o(t.app.residentEstimate.porcensaje_avance_financiero)+"%",1),we,e("p",Ie,o(t.app.residentEstimate.grado_avance_obra)+"%",1),je,e("p",Be,o(t.app.residentEstimate.porcentaje_avance_estimacion)+"%",1),He,e("p",Re,o(t.app.residentEstimate.porcentaje_avance_estimacion_acumulado)+"%",1)])]),v(d,{class:"mb-10",description:"Histórico",headers:t.headers,data:t.app.residentEstimateHistory,option:[]},null,8,["headers","data"])])}const Pe=y(K,[["render",Ae],["__scopeId","data-v-6c2cb961"]]);export{Pe as default};
