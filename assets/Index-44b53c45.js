import{T as R,D as g}from"./DetailEstimate-57967e6e.js";import{T as v}from"./TableBase-0bea4fd3.js";import{f as I,a as w,b as T}from"./residentEstimate-9627171c.js";import{A as N}from"./ArrowBack-d9027e34.js";import{H as A}from"./HomePage-dc81efef.js";import{B}from"./fetchApi-f7a148df.js";import{T as C}from"./ToggleSwtich-e43ad8b2.js";import{L as y}from"./LogoutComponent-16cf5774.js";import{_ as D,a as k,u as x,r as b,b as o,o as h,c as O,d,e as s,g as S,h as V}from"./index-0101a678.js";import{T as j}from"./TitleBar-4aceab6d.js";import"./sweetalert2.all-281a79b7.js";import"./contract-5e7c25e1.js";import"./PDF-a4bdfbbc.js";const H={name:"ResidentEstimateIndex",components:{TableroEstimacionResidente:R,ArrowBack:N,HomePage:A,ButtonBase:B,TitleBar:j,TableBase:v,ToggleSwitch:C,DetailEstimate:g,LogoutComponent:y},setup(){const E=k(),{rol:n}=E.getAuthData,c=x(),t=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],l=b([]),_=b([]);let i=!1,r=b(!1);const m=async()=>{const{data:e}=await w();l.value=e},f=[{label:"Detalles",disabled:!1,action:async e=>{r.value=!r.value;const{data:a}=await I(e.id_estimacion);a.fecha_recepcion_info_contratista=a.fecha_recepcion_info_contratista.split(" ")[0],a.fecha_periodo_inicio_estimacion=a.fecha_periodo_inicio_estimacion.split(" ")[0],a.fecha_periodo_fin_estimacion=a.fecha_periodo_fin_estimacion.split(" ")[0],_.value=a}},{label:"Nuevo",disabled:n!="Residente"||l.estatus_semafor!="RESIDENTE",action:e=>c.push({name:"NewResidentEstimateById",params:{residentEstimateId:e.contrato_estimacion}})},{label:"Archivo",disabled:!1,action:async e=>{c.push({name:"FilesResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}},{label:"Histórico",disabled:!1,action:async e=>{c.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}}],p=()=>c.push({name:"NewResidentEstimate"}),u=async()=>{if(i=!i,i===!0){const{data:e}=await T(9);l.value=e}i===!1&&m()};return m(),{residentEstimate:l,featureOptions:f,headers:t,goToNewResidentEstimate:p,getResidentEstimate:m,processo:u,procesoVariable:i,detalleEstimacionData:_,detalleEstimacion:r,rol:n}}},P={class:"px-4 mt-10"},F={class:"flex justify-between"},z={class:"px-4"},G={class:"flex justify-end"};function L(E,n,c,t,l,_){const i=o("arrow-back"),r=o("home-page"),m=o("logout-component"),f=o("title-bar"),p=o("detail-estimate"),u=o("button-base"),e=o("toggle-switch"),a=o("tablero-estimacion-residente");return h(),O("main",P,[d("div",F,[s(i),d("div",null,[s(r),s(m)])]),s(f,{title:"Estimación Residente",subtitle:"Inicio"}),d("section",z,[d("div",G,[s(p,{data:t.detalleEstimacionData,isOpen:t.detalleEstimacion,onSubmit:n[0]||(n[0]=M=>t.detalleEstimacion=!1)},null,8,["data","isOpen"]),t.rol=="Residente"?(h(),S(u,{key:0,label:"Nueva Estimación Residente",onClick:t.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"])):V("",!0),s(e,{label:"En Proceso",onChange:t.processo,class:"mb-3 mr-0 ml-10"},null,8,["onChange"])]),s(a,{options:t.featureOptions,headers:t.headers,data:t.residentEstimate},null,8,["options","headers","data"])])])}const oe=D(H,[["render",L]]);export{oe as default};
