import{T as R,D as g}from"./DetailEstimate-e4bdb249.js";import{T as v}from"./TableBase-15577fe3.js";import{f as w,a as I,b as T}from"./residentEstimate-6f82e677.js";import{A as y}from"./ArrowBack-b71575d9.js";import{H as A}from"./HomePage-3e9ed152.js";import{B}from"./fetchApi-d6252301.js";import{T as N}from"./ToggleSwtich-8dfbb66b.js";import{L as x}from"./LogoutComponent-cb7cd610.js";import{_ as C,a as k,u as D,r as _,b as o,o as E,c as j,d as m,e as i,t as O,g as S,h as V}from"./index-c168c190.js";import{T as H}from"./TitleBar-74e3189e.js";import"./sweetalert2.all-281a79b7.js";import"./contract-63eb2a5b.js";import"./PDF-a4bdfbbc.js";const P={name:"ResidentEstimateIndex",components:{TableroEstimacionResidente:R,ArrowBack:y,HomePage:A,ButtonBase:B,TitleBar:H,TableBase:v,ToggleSwitch:N,DetailEstimate:g,LogoutComponent:x},setup(){const h=k(),{rol:n}=h.getAuthData,c=D(),t=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],d=_([]);_();const f=_([]);let s=!1,l=_(!1);const r=async()=>{const{data:e}=await w();d.value=e},p=[{label:"Detalles",disabled:!1,action:async e=>{l.value=!l.value;const{data:a}=await I(e.id_estimacion);a.fecha_recepcion_info_contratista=a.fecha_recepcion_info_contratista.split(" ")[0],a.fecha_periodo_inicio_estimacion=a.fecha_periodo_inicio_estimacion.split(" ")[0],a.fecha_periodo_fin_estimacion=a.fecha_periodo_fin_estimacion.split(" ")[0],f.value=a}},{label:"Nuevo",disabled:n!="Residente",action:e=>{c.push({name:"NewResidentEstimateById",params:{residentEstimateId:e.contrato_estimacion}})}},{label:"Archivo",disabled:!1,action:async e=>{c.push({name:"FilesResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}},{label:"Histórico",disabled:!1,action:async e=>{c.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}}],b=()=>c.push({name:"NewResidentEstimate"}),u=async()=>{if(s=!s,s===!0){const{data:e}=await T(9);d.value=e}s===!1&&r()};return r(),{residentEstimate:d,featureOptions:p,headers:t,goToNewResidentEstimate:b,getResidentEstimate:r,processo:u,procesoVariable:s,detalleEstimacionData:f,detalleEstimacion:l,rol:n}}},F={class:"px-4 mt-10"},z={class:"flex justify-between"},G={class:"flex justify-center items-center"},L={class:"text-black font-semibold mr-4 items-center content-center"},M={class:"px-4"},Z={class:"flex justify-end"};function q(h,n,c,t,d,f){const s=o("arrow-back"),l=o("home-page"),r=o("logout-component"),p=o("title-bar"),b=o("detail-estimate"),u=o("button-base"),e=o("toggle-switch"),a=o("tablero-estimacion-residente");return E(),j("main",F,[m("div",z,[i(s),m("div",G,[m("p",L,O(t.rol),1),i(l),i(r)])]),i(p,{title:"Estimación Residente",subtitle:"Inicio"}),m("section",M,[m("div",Z,[i(b,{data:t.detalleEstimacionData,isOpen:t.detalleEstimacion,onSubmit:n[0]||(n[0]=J=>t.detalleEstimacion=!1)},null,8,["data","isOpen"]),t.rol=="Residente"?(E(),S(u,{key:0,label:"Nueva Estimación Residente",onClick:t.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"])):V("",!0),i(e,{label:"En Proceso",onChange:t.processo,class:"mb-3 mr-0 ml-10",placeholder:"En Proceso"},null,8,["onChange"])]),i(a,{options:t.featureOptions,headers:t.headers,data:t.residentEstimate},null,8,["options","headers","data"])])])}const ne=C(P,[["render",q]]);export{ne as default};
