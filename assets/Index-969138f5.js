import{_ as A,o as t,c as o,b as c,F as b,d as m,t as y,n as w,f as p,u as x,r as g,a as f,g as h}from"./index-51cc57b9.js";import{a as B,d as k}from"./users-3a698127.js";import{A as C}from"./ArrowBack-d128ec5d.js";import{B as E}from"./ButtonBase-2814ea9b.js";import{T as I}from"./fetchApi-d55dc87c.js";import{S as i}from"./sweetalert2.all-281a79b7.js";const F={name:"TableBase",props:{headers:{type:Array,default:()=>[{label:"Example Header",field:"example"}]},data:{type:Array,default:()=>[{example:"value 1"}]},options:{type:Array,default:[]}},setup(){return{dots:[1,2,3],openActions:s=>{document.getElementById(s).classList.toggle("hidden")}}}},M={class:"border border-solid border-black border-collapse text-gray-900 w-full"},O={key:0,class:"p-2 border border-solid border-gray-100 relative"},U={class:"flex justify-center"},$=["onClick"],T=["id","onMouseleave"],N={class:"flex flex-col"},R=["onClick"],S={key:0},V={key:1},j={key:2};function q(d,_,s,l,u,v){return t(),o("table",M,[c("tr",null,[(t(!0),o(b,null,m(s.headers,(r,e)=>(t(),o("th",{key:e,class:"p-2 border border-b-2 border-solid border-black"},y(r.label),1))),128))]),(t(!0),o(b,null,m(s.data,(r,e)=>(t(),o("tr",{id:"rows",class:w(["",{" bg-gray-100":e%2===0}]),key:e},[(t(!0),o(b,null,m(s.headers,(a,n)=>(t(),o("td",{key:n,class:"p-2 border border-solid border-black"},y(r[a.field]),1))),128)),s.options.length?(t(),o("td",O,[c("div",U,[c("div",{class:"p-1 cursor-pointer",onClick:a=>l.openActions(`table-actions-${e}`)},[(t(!0),o(b,null,m(l.dots,(a,n)=>(t(),o("span",{key:n,class:"rounded-full h-1 w-1 block bg-blue mb-1"}))),128))],8,$)]),c("div",{class:"hidden absolute right-4 top-8 bg-white z-10",style:{"box-shadow":"-3px 3px 6px #00000029"},id:`table-actions-${e}`,onMouseleave:a=>l.openActions(`table-actions-${e}`)},[c("div",N,[(t(!0),o(b,null,m(s.options,(a,n)=>(t(),o("div",{key:n,class:"h-8 flex justify-center items-center py-2 px-8"},[c("p",{class:"text-xs border-b border-solid border-gray-100 cursor-pointer hover:border-gray hover:font-medium",onClick:J=>a.action(r)},[r.estatus_empleado==="Activo"&&a.label==="Editar"?(t(),o("span",S," Editar ")):p("",!0),r.estatus_empleado==="Activo"&&a.label==="Estatus"?(t(),o("span",V," Inactivar ")):p("",!0),r.estatus_empleado==="Inactivo"&&a.label==="Estatus"?(t(),o("span",j," Activar ")):p("",!0)],8,R)]))),128))])],40,T)])):p("",!0)],2))),128))])}const z=A(F,[["render",q]]),L={name:"UsersRolesMAOFIndex",components:{TableBase:z,ArrowBack:C,ButtonBase:E,TitleBar:I},setup(){const d=x(),_=[{label:"Id",field:"empleado_maof"},{label:"Nombre",field:"nombre_completo"},{label:"Unidad MAOF",field:"unidad_maof"},{label:"Correo",field:"correo_electronico"},{label:"Rol MAOF",field:"rol_maof"},{label:"Estatus",field:"estatus_empleado"}],s=g([]),l=g({estatus_empleado:""}),u=async()=>{const{data:e}=await B();s.value=e},v=[{label:"Editar",action:e=>{console.log(e),d.push({name:"EditUsersRolesMAOF",params:{userRolMAOFId:e.empleado_maof}})}},{label:"Estatus",action:async e=>{e.estatus_empleado==="Inactivo"&&i.fire({title:`Estás seguro que deseas activar al usuario "${e.nombre_completo}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Inactivar!",reverseButtons:!0}).then(async a=>{if(a.isConfirmed)try{await k(e.empleado_maof),await u(),i.fire("¡Inactivo!","El usuario se inactivó","success")}catch(n){i.fire("Error",`${n.response.data.detail}`,"error")}}),e.estatus_empleado==="Activo"&&i.fire({title:`Estás seguro que desea inactivar al usuario "${e.nombre_completo}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Inactivar!",reverseButtons:!0}).then(async a=>{if(a.isConfirmed)try{await k(e.empleado_maof),await u(),i.fire("¡Inactivo!","El usuario se inactivó","success")}catch(n){i.fire("Error",`${n.response.data.detail}`,"error")}})}}],r=()=>d.push({name:"NewUsersRolesMAOF"});return u(),{userAndRols:s,userAndRolStatus:l,featureOptions:v,headers:_,goToNewUserAndRols:r}}},D={class:"px-4 mt-10"},H={class:"px-4"};function G(d,_,s,l,u,v){const r=f("arrow-back"),e=f("title-bar"),a=f("button-base"),n=f("table-base");return t(),o("main",D,[h(r),h(e,{title:"Usuarios y Roles MAOF",subtitle:"Inicio"}),c("section",H,[h(a,{label:"Alta de usuarios MAOF",onClick:l.goToNewUserAndRols,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),h(n,{options:l.featureOptions,headers:l.headers,data:l.userAndRols},null,8,["options","headers","data"])])])}const Z=A(L,[["render",G]]);export{Z as default};
