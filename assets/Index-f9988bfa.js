import{_ as v,u as E,o as s,c as a,b as r,F as p,d as g,n as y,t as u,f as d,p as x,m as C,r as R,a as k,g as h}from"./index-fa0f6b5e.js";import{f as w}from"./assingResident-c61651dc.js";import{_ as A}from"./PDF-a4bdfbbc.js";import{T as I}from"./TableBase-54906c73.js";import{f as T,a as S}from"./residentEstimate-bdc9a3c3.js";import{A as $,T as N}from"./TitleBar-f1db6dc0.js";import{B}from"./ButtonBase-3f995339.js";import"./sweetalert2.all-281a79b7.js";const F={name:"TableBase",props:{headers:{type:Array,default:()=>[{label:"Example Header",field:"example"}]},data:{type:Array,default:()=>[{example:"value 1"}]},options:{type:Array,default:()=>[{label:"example",action:l=>console.log(l)}]}},setup(){const l=E();return{dots:[1,2,3],openActions:o=>{document.getElementById(o).classList.toggle("hidden")},detalleContrato:o=>{console.log("Se muestran los detalles del contrato: ",o)},semaforo:o=>{console.log("Se muestran el item: ",o),l.push({name:"EditResidentEstimate",params:{residentEstimateId:o.id_estimacion}})},downloadFile:async o=>{const{data:n}=await w();let e=[];n.forEach(c=>{o.contrato_padre===null&&o.contrato_estimacion===c.id_contrato&&e.push(c),o.contrato_padre!==null&&o.contrato_padre===c.id_contrato&&e.push(c)}),console.log("Item a descargar: ",o),console.log("data: ",n),console.log("result: ",e),window.open(`${e[0].archivo_asignacion}`,"_blank")}}}},O={class:"border border-solid border-t-0 border-l-0 border-black border-collapse text-gray-900 w-full"},P={key:0},V=["onClick"],j=["onClick"],D=["onClick"],z=["onClick"],G={key:5},M=["onClick"],H=["onClick"],L=["onClick"],Z=["onClick"],q=["onClick"],J={class:"flex justify-center"},K=["onClick"],Q=["id","onMouseleave"],U={class:"flex flex-col"},W=["onClick"];function X(l,b,i,t,f,m){return s(),a("table",O,[r("tr",null,[(s(!0),a(p,null,g(i.headers,(o,n)=>(s(),a("th",{key:n,class:y(["border-b-2 border-l-0 px-2",{"border-r-2":o.label===" "}])},u(o.label),3))),128))]),(s(!0),a(p,null,g(i.data,(o,n)=>(s(),a("tr",{id:"rows",class:y(["mx-6",{" bg-gray-100":n%2===0}]),key:n},[(s(!0),a(p,null,g(i.headers,(e,c)=>(s(),a("td",{key:c,class:y(["text-center",{"border-r-2 text-center":e.field==="documents","border-l":c==0}])},[e.label==="#"?(s(),a("p",P,u(n),1)):d("",!0),e.field==="documents"?(s(),a("img",{key:1,src:A,onClick:_=>t.downloadFile(o),class:"cursor-pointer"},null,8,V)):d("",!0),e.field==="numero_contrato"&&o.contrato_padre===null?(s(),a("p",{key:2,class:"text-blue cursor-pointer contratos",onClick:_=>t.detalleContrato(o)},u(o[e.field]),9,j)):d("",!0),e.field==="numero_contrato"&&o.contrato_padre!==null?(s(),a("p",{key:3,class:"text-blue cursor-pointer contratos",onClick:_=>t.detalleContrato(o)},u(o.numero_contrato_padre),9,D)):d("",!0),e.field==="numero_contrato_padre"&&o.contrato_padre!==null?(s(),a("p",{key:4,class:"text-blue cursor-pointer contratos",onClick:_=>t.detalleContrato(o)},u(o.numero_contrato),9,z)):d("",!0),e.field!=="numero_contrato_padre"&&e.field!=="numero_contrato"&&e.field!=="estatus_semaforo"?(s(),a("p",G,u(o[e.field]),1)):d("",!0),e.label==="RESIDENTE"&&e.field==="estatus_semaforo"&&o[e.field]==="Residente"?(s(),a("button",{key:6,class:"bg-red rounded-full text-red",onClick:_=>t.semaforo(o)}," abcd",8,M)):d("",!0),e.label==="ÁREA REVISORA"&&e.field==="estatus_semaforo"&&o[e.field]==="Area Revisora"?(s(),a("button",{key:7,class:"bg-red rounded-full text-red",onClick:_=>t.semaforo(o)}," abcd",8,H)):d("",!0),e.label==="FINANZAS"&&e.field==="estatus_semaforo"&&o[e.field]==="Finanzas"?(s(),a("button",{key:8,class:"bg-red rounded-full text-red",onClick:_=>t.semaforo(o)}," abcd",8,L)):d("",!0),e.label==="TRÁMITE DE PAGO"&&e.field==="estatus_semaforo"&&o[e.field]==="DGPOP"?(s(),a("button",{key:9,class:"bg-red rounded-full text-red",onClick:_=>t.semaforo(o)}," abcd",8,Z)):d("",!0),e.label==="PAGO"&&e.field==="estatus_semaforo"&&o[e.field]==="Pago Efectuado"?(s(),a("button",{key:10,class:"bg-green rounded-full text-green",onClick:_=>t.semaforo(o)}," abcd",8,q)):d("",!0)],2))),128)),i.options.length?(s(),a("td",{key:0,class:y(["p-2 relative",{" border-l-2 border-gray-100":n%2!==0}])},[r("div",J,[r("div",{class:"p-1 cursor-pointer",onClick:e=>t.openActions(`table-actions-${n}`)},[(s(!0),a(p,null,g(t.dots,(e,c)=>(s(),a("span",{key:c,class:"rounded-full h-1 w-1 block bg-blue mb-1"}))),128))],8,K)]),r("div",{class:"hidden absolute right-4 top-8 bg-white z-10",style:{"box-shadow":"-3px 3px 6px #00000029"},id:`table-actions-${n}`,onMouseleave:e=>t.openActions(`table-actions-${n}`)},[r("div",U,[(s(!0),a(p,null,g(i.options,(e,c)=>(s(),a("div",{key:c,class:"h-8 flex justify-center items-center py-2 px-8"},[r("p",{class:"text-xs border-b border-solid border-gray-100 cursor-pointer hover:border-gray hover:font-medium",onClick:_=>e.action(o)},u(e.label),9,W)]))),128))])],40,Q)],2)):d("",!0)],2))),128))])}const Y=v(F,[["render",X]]);const ee={name:"ToggleSwitch",props:{label:{type:String,default:""}}},oe=l=>(x("data-v-c78a01f0"),l=l(),C(),l),te={class:"panel panel-default"},se={class:"panel-heading"},ae={class:"panel-title"},ne=oe(()=>r("div",{class:"panel-body"},[r("label",{class:"switch"},[r("input",{type:"checkbox"}),r("div",{class:"slider round"})])],-1));function le(l,b,i,t,f,m){return s(),a("div",te,[r("div",se,[r("h3",ae,u(i.label),1)]),ne])}const re=v(ee,[["render",le],["__scopeId","data-v-c78a01f0"]]),ie={name:"ResidentEstimateIndex",components:{TableroEstimacionResidente:Y,ArrowBack:$,ButtonBase:B,TitleBar:N,TableBase:I,ToggleSwitch:re},setup(){const l=E(),b=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],i=R([]);let t=!1;const f=async()=>{const{data:e}=await T();i.value=e},m=[{label:"Nuevo",action:e=>l.push({name:"NewResidentEstimateById",params:{residentEstimateId:e.contrato_estimacion}})},{label:"Archivo",action:async e=>{l.push({name:"FilesResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}}],o=()=>l.push({name:"NewResidentEstimate"}),n=async()=>{if(t=!t,t===!0){const{data:e}=await S(9);i.value=e}t===!1&&f()};return f(),{residentEstimate:i,featureOptions:m,headers:b,goToNewResidentEstimate:o,getResidentEstimate:f,processo:n}}},ce={class:"px-4 mt-10"},de={class:"px-4"},_e={class:"flex justify-end"};function ue(l,b,i,t,f,m){const o=k("arrow-back"),n=k("title-bar"),e=k("button-base"),c=k("toggle-switch"),_=k("tablero-estimacion-residente");return s(),a("main",ce,[h(o),h(n,{title:"Estimación Residente",subtitle:"Inicio"}),r("section",de,[r("div",_e,[h(e,{label:"Nueva Estimación Residente",onClick:t.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),h(c,{label:"En Proceso",onChange:t.processo,class:"mb-3 mr-0 ml-10"},null,8,["onChange"])]),h(_,{options:t.featureOptions,headers:t.headers,data:t.residentEstimate},null,8,["options","headers","data"])])])}const ve=v(ie,[["render",ue]]);export{ve as default};
