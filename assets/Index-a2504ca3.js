import{T as w}from"./TableUsers-4f17a9d6.js";import{A as j}from"./ArrowBack-e2b7fa3d.js";import{H as V}from"./HomePage-3ccf4b97.js";import{S as F}from"./SelectBase-232be053.js";import{B as C}from"./ButtonBase-f98600f7.js";import{_ as k,k as q,a as c,o as _,c as y,g as s,b as t,r as D,I as A,f as m,F as E,u as S,h as M,e as h,n as T}from"./index-9086ba0d.js";import{T as I}from"./fetchApi-3ee17564.js";import{I as P}from"./InputBase-aa34557a.js";import"./sweetalert2.all-281a79b7.js";import{b as O}from"./project-a7f64ea0.js";import{f as N}from"./contract-57b9bd09.js";const U={name:"FormProject",props:{editMode:{type:Boolean,default:!1},project:{type:Object,default:()=>({})}},components:{InputBase:P,ButtonBase:C,SelectBase:F},setup(r,{emit:e}){const l=q({project:{clave_cartera:"",nombre_proyecto:"",monto_total_inversion:"",fecha_inicio_proyecto:"",fecha_fin_proyecto:""}});return r.editMode&&(l.project=r.project,console.log(r.project),l.project.fecha_inicio_proyecto=r.project.fecha_inicio_proyecto.split("-").reverse().join("-"),l.project.fecha_fin_proyecto===null?l.project.fecha_fin_proyecto="":l.project.fecha_fin_proyecto=r.project.fecha_fin_proyecto.split("-").reverse().join("-")),{app:l,sendForm:()=>e("submit",l.project)}}},R={class:"max-w-4xl pb-10 grow"},z={class:"grid grid-cols-2"},H={class:"grid grid-cols-2"};function G(r,e,l,o,b,v){const n=c("select-base"),d=c("input-base"),g=c("button-base");return _(),y("div",R,[s(n,{id:"clave_cartera",label:"C, CC, CM*",class:"mb-3"}),s(n,{id:"nombre_proyecto",label:"Residente",class:"mb-3"}),s(n,{id:"nombre_proyecto",label:"Mes de la estimación",class:"mb-3"}),s(n,{id:"nombre_proyecto",label:"Año de la Estimación",class:"mb-3"}),s(n,{id:"nombre_proyecto",label:"Estatus de la Estimación",class:"mb-3"}),s(n,{id:"nombre_proyecto",label:"Unidad MAOF responsable",class:"mb-3"}),t("div",z,[s(d,{id:"dias_inicio",label:"Días transcurridos del",type:"number",class:"grow"}),s(d,{id:"dias_fin",label:"al",type:"number",class:"flex-auto"})]),t("div",H,[s(d,{id:"fecha_inicio",label:"Autorización entre",type:"date",class:"grow"}),s(d,{id:"fecha_fin",label:"y",type:"date",class:""})]),s(g,{label:"Buscar",onClick:o.sendForm,class:"mr-0 ml-auto mt-5"},null,8,["onClick"])])}const J=k(U,[["render",G]]);const K={components:{ButtonBase:C},setup(){const r=D(!1);function e(){r.value=!0}function l(){r.value=!1}return{visible:r,openDialog:e,closeDialog:l}}},L={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},Q={class:"bg-white p-4 rounded-lg shadow-md"};function W(r,e,l,o,b,v){const n=c("ButtonBase");return _(),y(E,null,[o.visible?(_(),y("div",L,[t("div",Q,[A(r.$slots,"default"),s(n,{class:"mt-4 px-4 py-2 bg-blue-500 black rounded",onClick:o.closeDialog,label:"Cerrar"},null,8,["onClick"])])])):m("",!0),s(n,{class:"mt-4 px-4 py-2 bg-blue-500 black rounded",onClick:o.openDialog,label:"Abrir diálogo"},null,8,["onClick"])],64)}const X=k(K,[["render",W]]),Y="/maof-front/assets/Filter-fb6d2bbc.png",Z="/maof-front/assets/Search-94489079.png";const $={name:"UsersRolesMAOFIndex",components:{TableBase:w,ArrowBack:j,HomePage:V,ButtonBase:C,TitleBar:I,SelectBase:F,FormConsultaBusqueda:J,DialogBase:X},setup(){S();const r=[{label:"Id",field:"empleado_maof"}],e=D({filtro:{tipoDocumento:"",listFiltros:[{value:2,label:"Contrato o Convenio de Colaboración"},{value:3,label:"Convenio Modificatorio"},{value:4,label:"Esperando una acción"},{value:1,label:"Proyecto / Cartera de inversión"}],listDocsFiltrados:[],filtroDocValue:""}});let l=D(!1);const o=[],b=()=>{console.log("Se muestra el resultado ")},v=async i=>{switch(l.value===!0&&(l.value=!1),i){case"1":e.value.filtro.listDocsFiltrados=[],e.value.filtro.filtroDocValue="",n();break;case"2":e.value.filtro.listDocsFiltrados=[],e.value.filtro.filtroDocValue="",d(i);break;case"3":e.value.filtro.listDocsFiltrados=[],e.value.filtro.filtroDocValue="",d(i);break;case"4":e.value.filtro.listDocsFiltrados=[],e.value.filtro.filtroDocValue="";break;default:console.log("No se encontro nada");break}},n=async()=>{const{data:i}=await O();e.value.filtro.listDocsFiltrados=i.map(u=>({value:u.id_proyecto,label:`${u.clave_cartera}-${u.nombre_proyecto}`}))},d=async i=>{const{data:u}=await N();i==="2"&&u.forEach(a=>{a.id_tipo_contrato!==3&&(e.value.filtro.listDocsFiltrados.push({value:a.id_contrato,label:a.numero_contrato}),e.value.filtro.listDocsFiltrados.sort((f,p)=>f.label>p.label?1:f.label<p.label?-1:0))}),i==="3"&&u.forEach(a=>{a.id_tipo_contrato===3&&(e.value.filtro.listDocsFiltrados.push({value:a.id_contrato,label:a.numero_contrato}),e.value.filtro.listDocsFiltrados.sort((f,p)=>f.label>p.label?1:f.label<p.label?-1:0))})};return{app:e,featureOptions:o,headers:r,showBusquedaValue:l,getStatusEstimations:b,showBusqueda:()=>{e.value.filtro.tipoDocumento="",e.value.filtro.filtroDocValue="",l.value=!l.value,console.log("Se muestra el la busqueda  ")},saveBusqueda:async i=>{console.log("Criterios de busqueda: ",i)},saveFiltro:i=>{console.log("Consulta con el id seleccionado: ",i)},getDocsByType:v,getProjects:n,getContracts:d}}},ee={class:"px-4 mt-10"},oe={class:"flex justify-between"},te={class:"px-4"},se=t("h2",{class:"text-lg font-bold mb-4"},"Título del diálogo",-1),le=t("p",{class:"text-gray-700"},"Contenido del diálogo.",-1),ae={class:"flex justify-center text-3xl"},ie=t("p",{class:"text-center"},"4",-1),re=t("h1",{class:"text-center"},"Pendientes",-1),ne=[ie,re],ce=t("p",{class:"text-center"},"2",-1),de=t("h1",{class:"text-center"},"Pagadas",-1),ue=[ce,de],_e=t("p",{class:"text-center"},"6",-1),fe=t("h1",{class:"text-center"},"Total",-1),pe=[_e,fe],me={class:"flex flex-col mt-20"},be={class:"flex justify-start items-center pb-10"},ve=t("img",{src:Y,alt:"filter",class:"w-10 items-center"},null,-1),ge={class:"flex justify-start items-center pt-10"},he=t("img",{src:Z,alt:"filter",class:"w-10 items-center"},null,-1),ye=t("h1",{class:"text-center font-bold text-lg"},"Búsqueda",-1),xe={class:"flex justify-center"};function De(r,e,l,o,b,v){const n=c("arrow-back"),d=c("home-page"),g=c("title-bar"),B=c("dialog-base"),x=c("select-base"),i=c("button-base"),u=c("form-consulta-busqueda");return _(),y("main",ee,[t("div",oe,[s(n),s(d)]),s(g,{title:"Consulta MAOF",subtitle:"Agenda de Estimaciones"}),t("section",te,[s(B,null,{default:M(()=>[se,le]),_:1}),t("div",ae,[t("div",{class:"px-10 text-green cursor-pointer",onClick:e[0]||(e[0]=a=>o.getStatusEstimations())},ne),t("div",{class:"px-10 text-red cursor-pointer",onClick:e[1]||(e[1]=a=>o.getStatusEstimations())},ue),t("div",{class:"px-10 cursor-pointer",onClick:e[2]||(e[2]=a=>o.getStatusEstimations())},pe)]),t("div",me,[t("div",be,[ve,s(x,{label:"Filtros",class:"text-center w-48 mr-10",id:"filtros",options:o.app.filtro.listFiltros,modelValue:o.app.filtro.tipoDocumento,"onUpdate:modelValue":e[3]||(e[3]=a=>o.app.filtro.tipoDocumento=a),onChange:e[4]||(e[4]=a=>o.getDocsByType(o.app.filtro.tipoDocumento))},null,8,["options","modelValue"]),o.app.filtro.listDocsFiltrados!=""&&o.app.filtro.tipoDocumento!==""?(_(),h(x,{key:0,label:"",class:"text-center w-48 ml-36",id:"filtrosDocs",options:o.app.filtro.listDocsFiltrados,modelValue:o.app.filtro.filtroDocValue,"onUpdate:modelValue":e[5]||(e[5]=a=>o.app.filtro.filtroDocValue=a)},null,8,["options","modelValue"])):m("",!0),o.app.filtro.listDocsFiltrados!=""&&o.app.filtro.tipoDocumento!==""?(_(),h(i,{key:1,label:"Aplicar",class:T(["border-gray text-black hover:bg-white hover:text-red",{"ml-[36rem]":o.app.filtro.tipoDocumento==="1"," ml-[3.7rem]":o.app.filtro.tipoDocumento!=="1"&&o.app.filtro.filtroDocValue===""," ml-[0rem]":o.app.filtro.tipoDocumento!=="1"&&o.app.filtro.filtroDocValue!==""}]),onClick:e[6]||(e[6]=a=>o.saveFiltro(o.app.filtro.filtroDocValue))},null,8,["class"])):m("",!0),o.app.filtro.tipoDocumento==="4"?(_(),h(i,{key:2,label:"Aplicar",class:"ml-40 border-gray text-black hover:bg-white hover:text-red",onClick:e[7]||(e[7]=a=>o.saveFiltro(5))})):m("",!0)]),t("div",ge,[he,ye,s(i,{label:"Criterio de búsqueda",class:"ml-5 border-gray text-black hover:bg-white hover:text-red",onClick:o.showBusqueda},null,8,["onClick"])])]),t("div",xe,[o.showBusquedaValue?(_(),h(u,{key:0,onSubmit:o.saveBusqueda,class:"mt-20"},null,8,["onSubmit"])):m("",!0)])])])}const Me=k($,[["render",De]]);export{Me as default};
