import{T as R,D as g}from"./DetailEstimate-11fd96c3.js";import{T as v}from"./TableBase-f49219b8.js";import{f as I,a as w,b as T}from"./residentEstimate-9da828df.js";import{A as N}from"./ArrowBack-fd64ea0e.js";import{H as y}from"./HomePage-09835846.js";import{B as A}from"./fetchApi-d28bf2c1.js";import{T as B}from"./ToggleSwtich-187551f0.js";import{L as x}from"./LogoutComponent-c111ff45.js";import{_ as C,a as D,u as k,r as b,b as o,o as E,c as S,d,e as i,t as j,g as O,h as V}from"./index-2a48b7f4.js";import{T as H}from"./TitleBar-0949630f.js";import"./sweetalert2.all-281a79b7.js";import"./contract-de1202fb.js";import"./PDF-a4bdfbbc.js";const P={name:"ResidentEstimateIndex",components:{TableroEstimacionResidente:R,ArrowBack:N,HomePage:y,ButtonBase:A,TitleBar:H,TableBase:v,ToggleSwitch:B,DetailEstimate:g,LogoutComponent:x},setup(){const h=D(),{rol:n}=h.getAuthData,c=k(),t=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],l=b([]),_=b([]);let s=!1,r=b(!1);const m=async()=>{const{data:e}=await w();l.value=e},f=[{label:"Detalles",disabled:!1,action:async e=>{r.value=!r.value;const{data:a}=await I(e.id_estimacion);a.fecha_recepcion_info_contratista=a.fecha_recepcion_info_contratista.split(" ")[0],a.fecha_periodo_inicio_estimacion=a.fecha_periodo_inicio_estimacion.split(" ")[0],a.fecha_periodo_fin_estimacion=a.fecha_periodo_fin_estimacion.split(" ")[0],_.value=a}},{label:"Nuevo",disabled:n!="Residente"||l.estatus_semafor!="RESIDENTE",action:e=>c.push({name:"NewResidentEstimateById",params:{residentEstimateId:e.contrato_estimacion}})},{label:"Archivo",disabled:!1,action:async e=>{c.push({name:"FilesResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}},{label:"Histórico",disabled:!1,action:async e=>{c.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}}],p=()=>c.push({name:"NewResidentEstimate"}),u=async()=>{if(s=!s,s===!0){const{data:e}=await T(9);l.value=e}s===!1&&m()};return m(),{residentEstimate:l,featureOptions:f,headers:t,goToNewResidentEstimate:p,getResidentEstimate:m,processo:u,procesoVariable:s,detalleEstimacionData:_,detalleEstimacion:r,rol:n}}},F={class:"px-4 mt-10"},z={class:"flex justify-between"},G={class:"flex justify-center items-center"},L={class:"text-black font-semibold mr-4 items-center content-center"},M={class:"px-4"},Z={class:"flex justify-end"};function q(h,n,c,t,l,_){const s=o("arrow-back"),r=o("home-page"),m=o("logout-component"),f=o("title-bar"),p=o("detail-estimate"),u=o("button-base"),e=o("toggle-switch"),a=o("tablero-estimacion-residente");return E(),S("main",F,[d("div",z,[i(s),d("div",G,[d("p",L,j(t.rol),1),i(r),i(m)])]),i(f,{title:"Estimación Residente",subtitle:"Inicio"}),d("section",M,[d("div",Z,[i(p,{data:t.detalleEstimacionData,isOpen:t.detalleEstimacion,onSubmit:n[0]||(n[0]=J=>t.detalleEstimacion=!1)},null,8,["data","isOpen"]),t.rol=="Residente"?(E(),O(u,{key:0,label:"Nueva Estimación Residente",onClick:t.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"])):V("",!0),i(e,{label:"En Proceso",onChange:t.processo,class:"mb-3 mr-0 ml-10",placeholder:"En Proceso"},null,8,["onChange"])]),i(a,{options:t.featureOptions,headers:t.headers,data:t.residentEstimate},null,8,["options","headers","data"])])])}const ne=C(P,[["render",q]]);export{ne as default};
