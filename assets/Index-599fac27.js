import{T as A}from"./TableBase-f871c409.js";import{f as C,d as w,a as B}from"./contract-5849dc44.js";import{A as x}from"./ArrowBack-a75f223a.js";import{B as y}from"./ButtonBase-41bc6cfe.js";import{_ as D,r as g,u as I,a as r,o as u,c as p,g as l,b as e,e as E,t as n,f as k,T as N}from"./index-4e9c12ea.js";import{T}from"./fetchApi-a406ff59.js";import{S as b}from"./sweetalert2.all-281a79b7.js";const z={name:"AmendingAgreementIndex",components:{TableBase:A,ArrowBack:x,ButtonBase:y,TitleBar:T},setup(){const d=g(!1),s=I(),h=[{label:"Id",field:"id_contrato"},{label:"Contrato o Convenio de Colaboración",field:"clave_cartera"},{label:"Número",field:"numero_contrato"},{label:"Objeto",field:"objeto_contrato"},{label:"Monto sin IVA",field:"monto_sin_iva"},{label:"Plazo de inicio",field:"plazo_inicio"},{label:"Plazo fin",field:"plazo_fin"},{label:"Estatus",field:"estatus_contrato"}],o=g([]),c=g([]),m=async()=>{const{data:t}=await C();t.forEach(a=>{a.id_tipo_contrato===3&&(o.value.push(a),o.value.sort((i,v)=>i.label>v.label?1:i.label<v.label?-1:0))})},_=[{label:"Editar",action:t=>s.push({name:"EditAmendingAgreement",params:{amendingAgreementId:t.id_contrato}})},{label:"Eliminar",action:async t=>{b.fire({title:"Se finalizará el Convenio Modificatorio...",text:"¿Está usted seguro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Finalizar!",reverseButtons:!0}).then(async a=>{if(a.isConfirmed)try{await w(t.id_contrato),o.value=[],await m(),b.fire("Inactivo!","El convenio modificatorio se inactivó","success")}catch(i){b.fire("Error",`${i.response.data.message}`,"error")}})}},{label:"Detalles",action:async t=>{d.value=!0;const{data:a}=await B(t.id_contrato);c.value=a}}],f=()=>s.push({name:"NewAmendingAgreement"});return m(),{isOpen:d,amendingAgreement:o,amendingAgreementDetalles:c,featureOptions:_,headers:h,goToNewAmendingAgreement:f}}},O={class:"px-4 mt-10"},j={class:"px-4"},M={class:"root"},S={key:0,class:"modal items-center justify-center"},V=e("h1",{class:"text-center font-semibold pb-10 pt-5"},"Detalle del Contrato",-1),F={class:"grid grid-cols-2 ml-10"},P={class:"grid grid-rows-2"},R=e("h1",{class:"font-semibold"},"Clave Cartera de Inversión",-1),U={class:"grid grid-rows-2"},q=e("h1",{class:"font-semibold"},"Nombre",-1),G={class:"grid grid-rows-2"},H=e("h1",{class:"font-semibold"},"Número de Contrato",-1),J={class:"grid grid-rows-2"},K=e("h1",{class:"font-semibold"},"Objeto del Contrato",-1),L={class:"grid grid-cols-2"},Q=e("h1",{class:"font-semibold"},"Fecha inicio",-1),W=e("h1",{class:"font-semibold"},"fecha fin",-1),X={class:"grid grid-rows-2"},Y=e("h1",{class:"font-semibold"},"Unidad SICT",-1),Z={class:"grid grid-cols-3 mt-10 ml-10"},$=e("h1",{class:"font-semibold"},"Monto sin IVA",-1),ee=e("h1",{class:"font-semibold"},"Estatus del Contrato",-1),oe=e("h1",{class:"font-semibold"},"¿Existen Convenios Modificatorios?",-1);function te(d,s,h,o,c,m){const _=r("arrow-back"),f=r("title-bar"),t=r("button-base"),a=r("table-base");return u(),p("main",O,[l(_),l(f,{title:"Convenio Modificatorio",subtitle:"Inicio"}),e("section",j,[l(t,{label:"Nuevo Convenio Modificatorio",onClick:o.goToNewAmendingAgreement,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),l(a,{options:o.featureOptions,headers:o.headers,data:o.amendingAgreement},null,8,["options","headers","data"]),e("div",M,[(u(),E(N,{to:"body"},[o.isOpen?(u(),p("div",S,[e("div",null,[V,e("div",F,[e("div",P,[e("div",null,[R,e("p",null,n(o.amendingAgreementDetalles.numero_contrato),1)])]),e("div",U,[e("div",null,[q,e("p",null,n(o.amendingAgreementDetalles.nombre_proyecto),1)])]),e("div",G,[e("div",null,[H,e("p",null,n(o.amendingAgreementDetalles.numero_contrato),1)])]),e("div",J,[e("div",null,[K,e("p",null,n(o.amendingAgreementDetalles.objeto_contrato),1)])]),e("div",L,[e("div",null,[Q,e("p",null,n(o.amendingAgreementDetalles.plazo_inicio),1)]),e("div",null,[W,e("p",null,n(o.amendingAgreementDetalles.plazo_fin),1)])]),e("div",X,[e("div",null,[Y,e("p",null,n(o.amendingAgreementDetalles.nombre_unidad),1)])])]),e("div",Z,[e("div",null,[$,e("p",null," $"+n(o.amendingAgreementDetalles.monto_sin_iva),1)]),e("div",null,[ee,e("p",null,n(o.amendingAgreementDetalles.estatus_contrato),1)]),e("div",null,[oe,e("p",null,n(o.amendingAgreementDetalles.objeto_contrato),1)])]),l(t,{label:"Cerrar",onClick:s[0]||(s[0]=i=>o.isOpen=!1),class:"mr-5 mx-auto my-5"})])])):k("",!0)]))])])])}const ce=D(z,[["render",te]]);export{ce as default};
