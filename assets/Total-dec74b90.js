import{T as R,D as T}from"./DetailEstimate-91ef6497.js";import{A as w}from"./ArrowBack-fb68f225.js";import{T as C}from"./TitleBar-21e63048.js";import{H as N}from"./HomePage-c54e3170.js";import{B as y}from"./fetchApi-faae1d62.js";import{T as A}from"./ToggleSwtich-75d07ef5.js";import{_ as B,a as k,r as u,u as I,b as i,o as b,c as D,d as _,e as n,g,h as v}from"./index-2524f0a8.js";import"./sweetalert2.all-281a79b7.js";import{f as O}from"./residentEstimate-d3099bd9.js";import{c as S}from"./consultas-71eda685.js";import{L as x}from"./LogoutComponent-58842070.js";import"./contract-53f9ed52.js";import"./PDF-a4bdfbbc.js";const P={name:"ConsultaPendientes",components:{TableroEstimacionResidente:R,ArrowBack:w,HomePage:N,ButtonBase:y,TitleBar:C,DetailEstimate:T,ToggleSwitch:A,LogoutComponent:x},setup(){k().getAuthData;const t=u({total:{},loading:!0}),E=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],e=[{label:"Detalles",action:async o=>{c.value=!c.value;const{data:a}=await O(o.id_estimacion);a.fecha_recepcion_info_contratista=a.fecha_recepcion_info_contratista.split(" ")[0],a.fecha_periodo_inicio_estimacion=a.fecha_periodo_inicio_estimacion.split(" ")[0],a.fecha_periodo_fin_estimacion=a.fecha_periodo_fin_estimacion.split(" ")[0],m.value=a}},{label:"Nuevo",action:o=>l.push({name:"NewResidentEstimateById",params:{residentEstimateId:o.contrato_estimacion}})},{label:"Archivo",action:async o=>{l.push({name:"FilesResidentEstimate",params:{residentEstimateId:o.id_estimacion}})}},{label:"Histórico",action:async o=>{l.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:o.id_estimacion}})}}],l=I(),r=S(),m=u([]);let c=u(!1),s=!1;const f=async()=>{s=!s,s===!0&&(t.value.total=r.filtros.pendientes),s===!1&&(t.value.total=r.filtros.total)},p=()=>l.push({name:"NewResidentEstimate"}),d=()=>{t.value.loading=!0,t.value.total=r.filtros.total,t.value.loading=!1};return d(),{app:t,procesoVariable:s,headers:E,featureOptions:e,detalleEstimacionData:m,detalleEstimacion:c,goToNewResidentEstimate:p,getQuery:d,processo:f}}},V={class:"px-4 mt-10"},F={class:"flex justify-between"},H={class:"px-4"},j={class:"flex justify-end"};function z(h,t,E,e,l,r){const m=i("arrow-back"),c=i("home-page"),s=i("logout-component"),f=i("title-bar"),p=i("detail-estimate"),d=i("button-base"),o=i("toggle-switch"),a=i("tablero-estimacion-residente");return b(),D("main",V,[_("div",F,[n(m),_("div",null,[n(c),n(s)])]),n(f,{title:"Estimación Residente",subtitle:"Totales"}),_("section",H,[_("div",j,[n(p,{data:e.detalleEstimacionData,isOpen:e.detalleEstimacion,onSubmit:t[0]||(t[0]=G=>e.detalleEstimacion=!1)},null,8,["data","isOpen"]),h.rol=="Residente"?(b(),g(d,{key:0,label:"Nueva Estimación Residente",onClick:e.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"])):v("",!0),n(o,{label:"En Proceso",onChange:e.processo,class:"mb-3 mr-0 ml-10"},null,8,["onChange"])]),e.app.loading?v("",!0):(b(),g(a,{key:0,options:e.featureOptions,headers:e.headers,data:e.app.total},null,8,["options","headers","data"]))])])}const te=B(P,[["render",z]]);export{te as default};
