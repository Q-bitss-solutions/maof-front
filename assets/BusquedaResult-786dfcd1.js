import{T as E,D as g}from"./DetailEstimate-cc8d3df8.js";import{A as v}from"./ArrowBack-62b54b5c.js";import{T as R}from"./fetchApi-19ad648d.js";import{H as B}from"./HomePage-c20f42ef.js";import{B as w}from"./ButtonBase-61bcfff2.js";import{T as N}from"./ToggleSwtich-a7a4bd1d.js";import{_ as A,r as u,u as C,a as i,o as h,c as T,b as f,g as n,e as y,f as I}from"./index-83752335.js";import"./sweetalert2.all-281a79b7.js";import{a as k}from"./residentEstimate-3de98119.js";import{c as q}from"./consultas-29ea03b9.js";import"./contract-688c0c7a.js";import"./PDF-a4bdfbbc.js";const D={name:"ConsultasBusquedaMAOF",components:{TableroEstimacionResidente:E,ArrowBack:v,HomePage:B,ButtonBase:w,TitleBar:R,DetailEstimate:g,ToggleSwitch:N},setup(){const o=u({busqueda:{},loading:!0}),r=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],p=[{label:"Detalles",action:async a=>{l.value=!l.value,console.log(a);const{data:t}=await k(a.id_estimacion);t.fecha_recepcion_info_contratista=t.fecha_recepcion_info_contratista.split(" ")[0],t.fecha_periodo_inicio_estimacion=t.fecha_periodo_inicio_estimacion.split(" ")[0],t.fecha_periodo_fin_estimacion=t.fecha_periodo_fin_estimacion.split(" ")[0],d.value=t,console.log("data: ",t),console.log("detalleEstimacionData: ",d)}},{label:"Nuevo",action:a=>e.push({name:"NewResidentEstimateById",params:{residentEstimateId:a.contrato_estimacion}})},{label:"Archivo",action:async a=>{e.push({name:"FilesResidentEstimate",params:{residentEstimateId:a.id_estimacion}})}},{label:"Histórico",action:async a=>{e.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:a.id_estimacion}})}}],e=C(),b=q(),d=u([]);let l=u(!1),s=!1;const m=async()=>{s=!s,s===!0&&(o.value.loading=!0,o.value.busqueda=o.value.busqueda.filter(a=>a.estatus_semaforo!=="Pago Efectuado"),o.value.loading=!1),s===!1&&c()},_=()=>e.push({name:"NewResidentEstimate"}),c=()=>{o.value.loading=!0,o.value.busqueda=b.busqueda,o.value.loading=!1};return c(),{app:o,procesoVariable:s,headers:r,featureOptions:p,detalleEstimacionData:d,detalleEstimacion:l,goToNewResidentEstimate:_,getQuery:c,processo:m}}},O={class:"px-4 mt-10"},x={class:"flex justify-between"},F={class:"px-4"},P={class:"flex justify-end"};function S(o,r,p,e,b,d){const l=i("arrow-back"),s=i("home-page"),m=i("title-bar"),_=i("detail-estimate"),c=i("button-base"),a=i("toggle-switch"),t=i("tablero-estimacion-residente");return h(),T("main",O,[f("div",x,[n(l),n(s)]),n(m,{title:"Estimación Residente",subtitle:"BusquedaResult"}),f("section",F,[f("div",P,[n(_,{data:e.detalleEstimacionData,isOpen:e.detalleEstimacion,onSubmit:r[0]||(r[0]=V=>e.detalleEstimacion=!1)},null,8,["data","isOpen"]),n(c,{label:"Nueva Estimación Residente",onClick:e.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),n(a,{label:"En Proceso",onChange:e.processo,class:"mb-3 mr-0 ml-10"},null,8,["onChange"])]),e.app.loading?I("",!0):(h(),y(t,{key:0,options:e.featureOptions,headers:e.headers,data:e.app.busqueda},null,8,["options","headers","data"]))])])}const X=A(D,[["render",S]]);export{X as default};
