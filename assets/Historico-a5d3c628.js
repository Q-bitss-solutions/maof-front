import{F as E}from"./FormResidentEstimateSemaforoById-5b350143.js";import{A as g}from"./ArrowBack-b2c59527.js";import{T as k}from"./fetchApi-642ff3f7.js";import{_ as v,o as i,c as n,b as e,F as m,d as p,t as a,n as I,f as b,i as w,l as H,u as B,k as j,a as u,g as y,p as A,m as R}from"./index-46ddd6d6.js";import{a as C,j as F}from"./residentEstimate-06fadae7.js";import{S as N}from"./sweetalert2.all-281a79b7.js";import"./InputBase-5b9aa739.js";import"./ButtonBase-6d550a58.js";import"./SelectBase-84efc365.js";import"./TextAreaBase-6856657f.js";import"./index-65d7c956.js";const S={name:"TableBase",props:{headers:{type:Array,default:()=>[{label:"Example Header",field:"example"}]},data:{type:Array,default:()=>[{example:"value 1"}]},options:{type:Array,default:[]}},setup(){return{dots:[1,2,3],openActions:o=>{document.getElementById(o).classList.toggle("hidden")}}}},z={class:"border border-solid border-black border-collapse text-gray-900 w-full"},T={key:0},V={key:0,class:"p-2 border border-solid border-gray-100 relative"},D={class:"flex justify-center"},L=["onClick"],M=["id","onMouseleave"],O={class:"flex flex-col"},P=["onClick"];function q(r,f,o,t,h,x){return i(),n("table",z,[e("tr",null,[(i(!0),n(m,null,p(o.headers,(l,s)=>(i(),n("th",{key:s,class:"p-2 border border-b-2 border-solid border-black"},a(l.label),1))),128))]),(i(!0),n(m,null,p(o.data,(l,s)=>(i(),n("tr",{id:"rows",class:I(["",{" bg-gray-100":s%2===0}]),key:s},[(i(!0),n(m,null,p(o.headers,(d,_)=>(i(),n("td",{key:_,class:"p-2 border border-solid border-black"},[d.label==="#"?(i(),n("p",T,a(s+1),1)):b("",!0),w(" "+a(l[d.field]),1)]))),128)),o.options.length?(i(),n("td",V,[e("div",D,[e("div",{class:"p-1 cursor-pointer",onClick:d=>t.openActions(`table-actions-${s}`)},[(i(!0),n(m,null,p(t.dots,(d,_)=>(i(),n("span",{key:_,class:"rounded-full h-1 w-1 block bg-blue mb-1"}))),128))],8,L)]),r.option!==null?(i(),n("div",{key:0,class:"hidden absolute right-4 top-8 bg-white z-10",style:{"box-shadow":"-3px 3px 6px #00000029"},id:`table-actions-${s}`,onMouseleave:d=>t.openActions(`table-actions-${s}`)},[e("div",O,[(i(!0),n(m,null,p(o.options,(d,_)=>(i(),n("div",{key:_,class:"h-8 flex justify-center items-center py-2 px-8"},[e("p",{class:"text-xs border-b border-solid border-gray-100 cursor-pointer hover:border-gray hover:font-medium",onClick:Re=>d.action(l)},a(d.label),9,P)]))),128))])],40,M)):b("",!0)])):b("",!0)],2))),128))])}const G=v(S,[["render",q]]);const J={name:"Historico",components:{FormResidentEstimate:E,ArrowBack:g,TitleBar:k,TableBaseIndex:G},setup(){const r=H(),f=B(),o=j({residentEstimate:{},residentEstimateHistory:[],fecha_recepcion_info_contratista:"",fecha_periodo_inicio_estimacion:"",fecha_periodo_fin_estimacion:"",loading:!0}),t=[{label:"#",field:""},{label:"Fecha",field:"fecha_historial_estimacion"},{label:"Estatus",field:"estatus_historial_estimacion"},{label:"Observaciones",field:"observaciones_residente"}],h=async()=>{o.loading=!0;const{data:s}=await C(r.params.residentEstimateId);console.log(s),o.residentEstimate=s,o.fecha_recepcion_info_contratista=s.fecha_recepcion_info_contratista.split(" ")[0],o.fecha_periodo_inicio_estimacion=s.fecha_periodo_inicio_estimacion.split(" ")[0],o.fecha_periodo_fin_estimacion=s.fecha_periodo_fin_estimacion.split(" ")[0],o.loading=!1},x=async()=>{o.loading=!0;const{data:s}=await F(r.params.residentEstimateId);console.log("HIstorico: ",s),o.residentEstimateHistory=s,console.log("app.residentEstimateHistory: ",o.residentEstimateHistory),o.loading=!1},l=async s=>{await updateResident(s),N.fire("¡Éxito!","!Estimación residente actualizado con éxito!","success"),f.push({name:"Resident"})};return h(),x(),{app:o,saveResident:l,headers:t}}},c=r=>(A("data-v-373a6929"),r=r(),R(),r),K={class:"px-4 mt-10"},Q={class:"mb-10"},U={class:"flex items-center"},W=c(()=>e("p",{class:"font-semibold text-center"},"Número de contrato (de origen)",-1)),X={class:"text-sm text-center ml-2"},Y=c(()=>e("p",{class:"font-semibold text-center ml-80 text-red"},"Número de la Estimación",-1)),Z={class:"text-xl font-semibold text-red text-center ml-2"},$=c(()=>e("p",{class:"font-semibold text-center ml-10 text-red"},"Días transcurridos",-1)),ee={class:"text-sm font-semibold text-red text-center ml-4"},te={class:"flex items-center"},se=c(()=>e("p",{class:"font-semibold text-center"},"Objeto del contrato",-1)),oe={class:"text-sm text-center ml-4"},ae={class:"flex items-center"},ie=c(()=>e("p",{class:"font-semibold text-center"},"Fecha de recepción",-1)),ne={class:"text-sm text-center ml-2"},ce=c(()=>e("p",{class:"font-semibold text-center ml-2 text-red"},"Fecha de autorización",-1)),re={class:"text-sm text-center ml-2 text-red"},de=c(()=>e("p",{class:"font-semibold text-center ml-2"},"Periodo de la Estimación",-1)),le={class:"text-sm text-center ml-2"},_e=c(()=>e("p",{class:"font-semibold text-center ml-2"},"al",-1)),me={class:"text-sm text-center ml-2"},pe={class:"flex items-center"},fe=c(()=>e("p",{class:"font-semibold text-center"},"Importe de la obra ejecutada",-1)),he={class:"text-sm text-center ml-2"},xe=c(()=>e("p",{class:"font-semibold text-center ml-2"},"Importe a pagar",-1)),be={class:"text-sm text-center ml-2"},ue={class:"flex items-center"},ye=c(()=>e("p",{class:"font-semibold text-center"},"% de avance físico",-1)),ve={class:"text-sm text-center ml-2"},Ee=c(()=>e("p",{class:"font-semibold text-center ml-2"},"% de avance financiero",-1)),ge={class:"text-sm text-center ml-2"},ke=c(()=>e("p",{class:"font-semibold text-center ml-2"},"% de grado de avance",-1)),Ie={class:"text-sm text-center ml-2"},we=c(()=>e("p",{class:"font-semibold text-center ml-2"},"% de avance de la Estimación",-1)),He={class:"text-sm text-center ml-2"},Be=c(()=>e("p",{class:"font-semibold text-center ml-2"},"% de avance de la Estimación acumulado",-1)),je={class:"text-sm text-center ml-2"};function Ae(r,f,o,t,h,x){const l=u("arrow-back"),s=u("title-bar"),d=u("table-base-index");return i(),n("main",K,[y(l),y(s,{title:"Estimación Residente",subtitle:"Histórico"}),e("div",Q,[e("div",U,[W,e("p",X,a(t.app.residentEstimate.numero_contrato),1),Y,e("p",Z,a(t.app.residentEstimate.num_consecutivo_estimacion),1),$,e("p",ee,a(t.app.residentEstimate.dias_transcurridos),1)]),e("div",te,[se,e("p",oe,a(t.app.residentEstimate.objeto_contrato),1)]),e("div",ae,[ie,e("p",ne,a(t.app.fecha_recepcion_info_contratista),1),ce,e("p",re,a(t.app.residentEstimate.fecha_autorizacion_contratista),1),de,e("p",le,a(t.app.fecha_periodo_inicio_estimacion),1),_e,e("p",me,a(t.app.fecha_periodo_fin_estimacion),1)]),e("div",pe,[fe,e("p",he,a(t.app.residentEstimate.frt_importe_obra_ejecutada),1),xe,e("p",be,a(t.app.residentEstimate.frt_importe_pagar),1)]),e("div",ue,[ye,e("p",ve,a(t.app.residentEstimate.porcentaje_Avance_fisico)+"%",1),Ee,e("p",ge,a(t.app.residentEstimate.porcensaje_avance_financiero)+"%",1),ke,e("p",Ie,a(t.app.residentEstimate.grado_avance_obra)+"%",1),we,e("p",He,a(t.app.residentEstimate.porcentaje_avance_estimacion)+"%",1),Be,e("p",je,a(t.app.residentEstimate.porcentaje_avance_estimacion_acumulado)+"%",1)])]),y(d,{class:"mb-10",headers:t.headers,data:t.app.residentEstimateHistory,option:[]},null,8,["headers","data"])])}const Pe=v(J,[["render",Ae],["__scopeId","data-v-373a6929"]]);export{Pe as default};
