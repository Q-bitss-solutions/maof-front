import{I as F}from"./InputBase-069e1973.js";import{B as V}from"./ButtonBase-41bc6cfe.js";import{S as g}from"./SelectBase-7bb38132.js";import{b as y}from"./SICTUnits-dcd626bb.js";import{f as x}from"./fetchApi-a406ff59.js";import{u as k,c as n,r as c,e as U}from"./index-5c74e7de.js";import{S as O}from"./sweetalert2.all-281a79b7.js";import{_ as q,k as w,q as B,a as v,o,c as r,g as d,F as f,d as p,t as b,f as _}from"./index-4e9c12ea.js";const $=()=>x({url:"/roles/",method:"GET"}),E={name:"FormUnitMAOF",props:{editMode:{type:Boolean,default:!1},userAndRols:{type:Object,default:()=>({})}},components:{InputBase:F,ButtonBase:V,SelectBase:g},setup(i,{emit:a}){const l=w({userAndRols:{email:"",first_name:"",last_name:"",rol:"",unidad_maof:""},listUnitsMAOF:[],listRolesMAOF:[]});i.editMode&&(l.userAndRols=i.userAndRols,l.userAndRols.rol=i.userAndRols.rol_id,l.userAndRols.unidad_maof=i.userAndRols.unidad_maof_id,console.log("app: ",l.userAndRols));const s=B(()=>({email:{required:n.withMessage("El email es requerido",c),email:n.withMessage("No es un correo valido",U)},first_name:{required:n.withMessage("El nombre es requerido",c)},last_name:{required:n.withMessage("El apellido es requerido",c)},rol:{required:n.withMessage("El rol es requerido",c)},unidad_maof:{required:n.withMessage("La unidad es requerido",c)}})),R=k(s,l.userAndRols),M=async()=>{const{data:t}=await y();l.listUnitsMAOF=t.map(e=>({value:e.id_unidad_maof,label:e.unidad})),l.listUnitsMAOF.sort((e,u)=>e.label>u.label?1:e.label<u.label?-1:0)},m=async()=>{const{data:t}=await $();l.listRolesMAOF=t.map(e=>({value:e.id,label:e.nombre_rol})),l.listRolesMAOF.sort((e,u)=>e.label>u.label?1:e.label<u.label?-1:0)},A=async()=>{await R.value.$validate()?a("submit",l.userAndRols):O.fire("Error","Revisa bien los datos","error")};return M(),m(),{app:l,sendForm:A,v$:R}}},C={class:"max-w-xl mx-auto"};function S(i,a,l,s,R,M){const m=v("input-base"),A=v("select-base"),t=v("button-base");return o(),r("div",C,[d(m,{id:"aPaterno",label:"Apellidos",class:"mb-3",modelValue:s.app.userAndRols.last_name,"onUpdate:modelValue":a[0]||(a[0]=e=>s.app.userAndRols.last_name=e)},null,8,["modelValue"]),s.v$.last_name.$error?(o(!0),r(f,{key:0},p(s.v$.last_name.$errors,e=>(o(),r("span",{key:e,class:"text-red font-semibold text-center ml-80"},b(e.$message),1))),128)):_("",!0),d(m,{id:"nombre",label:"Nombre(s)",class:"mb-3",modelValue:s.app.userAndRols.first_name,"onUpdate:modelValue":a[1]||(a[1]=e=>s.app.userAndRols.first_name=e)},null,8,["modelValue"]),s.v$.first_name.$error?(o(!0),r(f,{key:1},p(s.v$.first_name.$errors,e=>(o(),r("span",{key:e,class:"text-red font-semibold text-center ml-80"},b(e.$message),1))),128)):_("",!0),d(A,{id:"id_unidad_maof",label:"Unidad MAOF",options:s.app.listUnitsMAOF,modelValue:s.app.userAndRols.unidad_maof,"onUpdate:modelValue":a[2]||(a[2]=e=>s.app.userAndRols.unidad_maof=e),class:"mb-3"},null,8,["options","modelValue"]),s.v$.unidad_maof.$error?(o(!0),r(f,{key:2},p(s.v$.unidad_maof.$errors,e=>(o(),r("span",{key:e,class:"text-red font-semibold text-center ml-80"},b(e.$message),1))),128)):_("",!0),d(A,{id:"id_rol_maof",label:"Rol en el sistema",options:s.app.listRolesMAOF,class:"mb-3",modelValue:s.app.userAndRols.rol,"onUpdate:modelValue":a[3]||(a[3]=e=>s.app.userAndRols.rol=e)},null,8,["options","modelValue"]),s.v$.rol.$error?(o(!0),r(f,{key:3},p(s.v$.rol.$errors,e=>(o(),r("span",{key:e,class:"text-red font-semibold text-center ml-80"},b(e.$message),1))),128)):_("",!0),d(m,{id:"email",label:"Correo electrÃ³nico",class:"mb-3",type:"email",modelValue:s.app.userAndRols.email,"onUpdate:modelValue":a[4]||(a[4]=e=>s.app.userAndRols.email=e)},null,8,["modelValue"]),s.v$.email.$error?(o(!0),r(f,{key:4},p(s.v$.email.$errors,e=>(o(),r("span",{key:e,class:"text-red font-semibold text-center ml-80"},b(e.$message),1))),128)):_("",!0),d(t,{label:"Guardar",onClick:s.sendForm,class:"mr-0 ml-auto"},null,8,["onClick"])])}const P=q(E,[["render",S]]);export{P as F};
