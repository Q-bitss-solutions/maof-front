import{T as v}from"./TableBase-432dd021.js";import{f as C,d as A,a as w}from"./contract-0b747e5e.js";import{B as x}from"./fetchApi-c943dcd0.js";import{_ as B,a as u,u as y,f as r,g,l as h,v as l,q as e,j as D,t as a,x as I,T as E}from"./index-5cc367f2.js";import{T as N}from"./TitleBar-39daad40.js";import{S as b}from"./sweetalert2.all-281a79b7.js";import{C as T}from"./CustomHeaderApp-8d94f481.js";import"./ArrowBack-8ac6e4dd.js";import"./HomePage-555195f2.js";import"./LogoutComponent-f4751eee.js";const z={name:"AmendingAgreementIndex",components:{TableBase:v,ButtonBase:x,TitleBar:N,CustomHeaderApp:T},setup(){const d=u(!1),s=y(),p=[{label:"Id",field:"id_contrato"},{label:"Contrato o Convenio de Colaboración",field:"clave_cartera"},{label:"Número",field:"numero_contrato"},{label:"Objeto",field:"objeto_contrato"},{label:"Monto sin IVA",field:"monto_sin_iva"},{label:"Plazo de inicio",field:"plazo_inicio"},{label:"Plazo fin",field:"plazo_fin"},{label:"Estatus",field:"estatus_contrato"}],o=u([]),c=u([]),m=async()=>{const{data:n}=await C();n.forEach(t=>{t.id_tipo_contrato===3&&o.value.push(t)}),o.value.sort((t,i)=>t.label>i.label?1:t.label<i.label?-1:0)},_=[{label:"Editar",action:n=>s.push({name:"EditAmendingAgreement",params:{amendingAgreementId:n.id_contrato}})},{label:"Inactivar",action:async n=>{b.fire({title:"Se finalizará el Convenio Modificatorio...",text:"¿Está usted seguro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Finalizar!",reverseButtons:!0}).then(async t=>{if(t.isConfirmed)try{await A(n.id_contrato),o.value=[],await m(),b.fire("Inactivo!","El convenio modificatorio se inactivó","success")}catch(i){b.fire("Error",`${i.response.data.detail}`,"error")}})}},{label:"Detalles",action:async n=>{d.value=!0;const{data:t}=await w(n.id_contrato);c.value=t}}],f=()=>s.push({name:"NewAmendingAgreement"});return m(),{isOpen:d,amendingAgreement:o,amendingAgreementDetalles:c,featureOptions:_,headers:p,goToNewAmendingAgreement:f}}},M={class:"px-4 mt-10"},O={class:"px-4"},j={class:"root"},k={key:0,class:"modal items-center justify-center"},S=e("h1",{class:"text-center font-semibold pb-10 pt-5"},"Detalle del Contrato",-1),V={class:"grid grid-cols-2 ml-10"},F={class:"grid grid-rows-2"},H=e("h1",{class:"font-semibold"},"Clave Cartera de Inversión",-1),P={class:"grid grid-rows-2"},q=e("h1",{class:"font-semibold"},"Nombre",-1),R={class:"grid grid-rows-2"},U=e("h1",{class:"font-semibold"},"Número de Contrato",-1),G={class:"grid grid-rows-2"},J=e("h1",{class:"font-semibold"},"Objeto del Contrato",-1),K={class:"grid grid-cols-2"},L=e("h1",{class:"font-semibold"},"Fecha inicio",-1),Q=e("h1",{class:"font-semibold"},"fecha fin",-1),W={class:"grid grid-rows-2"},X=e("h1",{class:"font-semibold"},"Unidad MAOF",-1),Y={class:"grid grid-cols-3 mt-10 ml-10"},Z=e("h1",{class:"font-semibold"},"Monto sin IVA",-1),$=e("h1",{class:"font-semibold"},"Estatus del Contrato",-1),ee=e("h1",{class:"font-semibold"},"¿Existen Convenios Modificatorios?",-1);function oe(d,s,p,o,c,m){const _=r("CustomHeaderApp"),f=r("title-bar"),n=r("button-base"),t=r("table-base");return g(),h("main",M,[l(_),l(f,{title:"Convenio Modificatorio",subtitle:"Inicio"}),e("section",O,[l(n,{label:"Nuevo Convenio Modificatorio",onClick:o.goToNewAmendingAgreement,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),l(t,{description:"Convenios Modificatorios",options:o.featureOptions,headers:o.headers,data:o.amendingAgreement},null,8,["options","headers","data"]),e("div",j,[(g(),D(E,{to:"body"},[o.isOpen?(g(),h("div",k,[e("div",null,[S,e("div",V,[e("div",F,[e("div",null,[H,e("p",null,a(o.amendingAgreementDetalles.numero_contrato),1)])]),e("div",P,[e("div",null,[q,e("p",null,a(o.amendingAgreementDetalles.nombre_proyecto),1)])]),e("div",R,[e("div",null,[U,e("p",null,a(o.amendingAgreementDetalles.numero_contrato),1)])]),e("div",G,[e("div",null,[J,e("p",null,a(o.amendingAgreementDetalles.objeto_contrato),1)])]),e("div",K,[e("div",null,[L,e("p",null,a(o.amendingAgreementDetalles.plazo_inicio),1)]),e("div",null,[Q,e("p",null,a(o.amendingAgreementDetalles.plazo_fin),1)])]),e("div",W,[e("div",null,[X,e("p",null,a(o.amendingAgreementDetalles.nombre_unidad),1)])])]),e("div",Y,[e("div",null,[Z,e("p",null," $"+a(o.amendingAgreementDetalles.monto_sin_iva),1)]),e("div",null,[$,e("p",null,a(o.amendingAgreementDetalles.estatus_contrato),1)]),e("div",null,[ee,e("p",null,a(o.amendingAgreementDetalles.objeto_contrato),1)])]),l(n,{label:"Cerrar",onClick:s[0]||(s[0]=i=>o.isOpen=!1),class:"mr-5 mx-auto my-5"})])])):I("",!0)]))])])])}const _e=B(z,[["render",oe]]);export{_e as default};
