import{T as v,D as R}from"./DetailEstimate-afc22973.js";import{A as B}from"./ArrowBack-6ae4d345.js";import{T as y}from"./TitleBar-0fee8479.js";import{H as A}from"./HomePage-b55c9dba.js";import{B as w}from"./fetchApi-f8af7d53.js";import{T as q}from"./ToggleSwtich-ba56c6da.js";import{_ as C,a as D,r as b,u as I,b as i,o as g,c as N,d as m,e as n,t as T,g as x,h as k}from"./index-77c78547.js";import"./sweetalert2.all-281a79b7.js";import{a as O}from"./residentEstimate-11392e02.js";import{c as S}from"./consultas-1dbe86b7.js";import{L as F}from"./LogoutComponent-47cddd42.js";import"./contract-415809d5.js";import"./PDF-a4bdfbbc.js";const P={name:"ConsultasBusquedaMAOF",components:{TableroEstimacionResidente:v,ArrowBack:B,HomePage:A,ButtonBase:w,TitleBar:y,DetailEstimate:R,ToggleSwitch:q,LogoutComponent:F},setup(){const h=D(),{rol:d}=h.getAuthData,a=b({busqueda:{},loading:!0}),e=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],E=[{label:"Detalles",action:async t=>{c.value=!c.value;const{data:s}=await O(t.id_estimacion);s.fecha_recepcion_info_contratista=s.fecha_recepcion_info_contratista.split(" ")[0],s.fecha_periodo_inicio_estimacion=s.fecha_periodo_inicio_estimacion.split(" ")[0],s.fecha_periodo_fin_estimacion=s.fecha_periodo_fin_estimacion.split(" ")[0],u.value=s}},{label:"Nuevo",action:t=>l.push({name:"NewResidentEstimateById",params:{residentEstimateId:t.contrato_estimacion}})},{label:"Archivo",action:async t=>{l.push({name:"FilesResidentEstimate",params:{residentEstimateId:t.id_estimacion}})}},{label:"Histórico",action:async t=>{l.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:t.id_estimacion}})}}],l=I(),_=S(),u=b([]);let c=b(!1),o=!1;const f=async()=>{o=!o,o===!0&&(a.value.loading=!0,a.value.busqueda=a.value.busqueda.filter(t=>t.estatus_semaforo!=="Pago Efectuado"),a.value.loading=!1),o===!1&&r()},p=()=>l.push({name:"NewResidentEstimate"}),r=()=>{a.value.loading=!0,console.log(_.busqueda),a.value.busqueda=_.busqueda,a.value.loading=!1};return r(),{app:a,procesoVariable:o,headers:e,featureOptions:E,detalleEstimacionData:u,detalleEstimacion:c,rol:d,goToNewResidentEstimate:p,getQuery:r,processo:f}}},V={class:"px-4 mt-10"},H={class:"flex justify-between"},j={class:"flex justify-center items-center"},M={class:"text-black font-semibold mr-4 items-center content-center"},z={class:"px-4"},G={class:"flex justify-end"};function L(h,d,a,e,E,l){const _=i("arrow-back"),u=i("home-page"),c=i("logout-component"),o=i("title-bar"),f=i("detail-estimate"),p=i("toggle-switch"),r=i("tablero-estimacion-residente");return g(),N("main",V,[m("div",H,[n(_),m("div",j,[m("p",M,T(e.rol),1),n(u),n(c)])]),n(o,{title:"Estimación Residente",subtitle:"Busqueda"}),m("section",z,[m("div",G,[n(f,{data:e.detalleEstimacionData,isOpen:e.detalleEstimacion,onSubmit:d[0]||(d[0]=t=>e.detalleEstimacion=!1)},null,8,["data","isOpen"]),n(p,{label:"En Proceso",onChange:e.processo,class:"mb-3 mr-0 ml-10"},null,8,["onChange"])]),e.app.loading?k("",!0):(g(),x(r,{key:0,options:e.featureOptions,headers:e.headers,data:e.app.busqueda},null,8,["options","headers","data"]))])])}const se=C(P,[["render",L]]);export{se as default};
