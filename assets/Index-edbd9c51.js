import{T as B}from"./TableUsers-14c5e46c.js";import{a as A,d as b}from"./users-34b49293.js";import{A as w}from"./ArrowBack-6ae4d345.js";import{H as v}from"./HomePage-b55c9dba.js";import{B as g}from"./fetchApi-f8af7d53.js";import{_ as C,a as x,u as E,r as h,b as a,o as O,c as U,d as l,e as s,t as y}from"./index-77c78547.js";import{T as F}from"./TitleBar-0fee8479.js";import{S as r}from"./sweetalert2.all-281a79b7.js";import{L as M}from"./LogoutComponent-47cddd42.js";const k={name:"UsersRolesMAOFIndex",components:{TableBase:B,ArrowBack:w,HomePage:v,ButtonBase:g,TitleBar:F,LogoutComponent:M},setup(){const f=x(),{rol:p}=f.getAuthData,m=E(),o=[{label:"Id",field:"empleado_maof"},{label:"Nombre",field:"nombre_completo"},{label:"Unidad MAOF",field:"unidad_maof"},{label:"Correo",field:"correo_electronico"},{label:"Rol MAOF",field:"rol_maof"},{label:"Estatus",field:"estatus_empleado"}],u=h([]),t=h({estatus_empleado:""}),n=async()=>{const{data:e}=await A();u.value=e},d=[{label:"Editar",action:e=>{m.push({name:"EditUsersRolesMAOF",params:{userRolMAOFId:e.empleado_maof}})}},{label:"Estatus",action:async e=>{e.estatus_empleado==="Inactivo"&&r.fire({title:`Estás seguro que deseas activar al usuario "${e.nombre_completo}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Activar!",reverseButtons:!0}).then(async c=>{if(c.isConfirmed)try{t.estatus_empleado=!0,await b(e.empleado_maof,t),await n(),r.fire("¡Activo!","El usuario se Activó","success")}catch(i){r.fire("Error",`${i.response.data.detail}`,"error")}}),e.estatus_empleado==="Activo"&&r.fire({title:`Estás seguro que desea inactivar al usuario "${e.nombre_completo}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Inactivar!",reverseButtons:!0}).then(async c=>{if(c.isConfirmed)try{t.estatus_empleado=!1,await b(e.empleado_maof,t),await n(),r.fire("¡Inactivo!","El usuario se inactivó","success")}catch(i){r.fire("Error",`${i.response.data.detail}`,"error")}})}}],_=()=>m.push({name:"NewUsersRolesMAOF"});return n(),{userAndRols:u,userAndRolStatus:t,featureOptions:d,headers:o,rol:p,goToNewUserAndRols:_}}},I={class:"px-4 mt-10"},R={class:"flex justify-between"},T={class:"flex justify-center items-center"},S={class:"text-black font-semibold mr-4 items-center content-center"},N={class:"px-4"};function $(f,p,m,o,u,t){const n=a("arrow-back"),d=a("home-page"),_=a("logout-component"),e=a("title-bar"),c=a("button-base"),i=a("table-base");return O(),U("main",I,[l("div",R,[s(n),l("div",T,[l("p",S,y(o.rol),1),s(d),s(_)])]),s(e,{title:"Usuarios y Roles MAOF",subtitle:"Inicio"}),l("section",N,[s(c,{label:"Alta de usuarios MAOF",onClick:o.goToNewUserAndRols,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),s(i,{description:"Usuarios MAOF",options:o.featureOptions,headers:o.headers,data:o.userAndRols},null,8,["options","headers","data"])])])}const J=C(k,[["render",$]]);export{J as default};
