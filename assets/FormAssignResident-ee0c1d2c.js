import{I as R}from"./InputBase-6bc46bdf.js";import{B as u}from"./ButtonBase-8cf21474.js";import{S as b}from"./SelectBase-004dd447.js";import{f as h}from"./resident-80a46c47.js";import{f as C}from"./contract-9384510a.js";import{_ as v}from"./PDF-a4bdfbbc.js";import{_ as y,k as V,a as _,o as g,c as f,g as t,b as l,t as w,f as F}from"./index-00892325.js";const B={name:"FormAssignResident",props:{editMode:{type:Boolean,default:!1},assingResident:{type:Object,default:()=>({})}},components:{InputBase:R,ButtonBase:u,SelectBase:b},setup(c,{emit:a}){const i=V({assingResident:{id_contrato:"",id_residente:"",fecha_inicio_asignacion:"",archivo_asignacion:""},fileName:"",fileURl:"",listResident:[],listContract:[]});let e=new FormData;c.editMode&&(i.assingResident=c.assingResident,i.fileURl=i.assingResident.archivo_asignacion,i.fileName=i.assingResident.archivo_asignacion.split("/"),delete i.assingResident.archivo_asignacion,e.append("id_contrato",i.assingResident.id_contrato),e.append("id_residente",i.assingResident.id_residente),e.append("fecha_inicio_asignacion",i.assingResident.fecha_inicio_asignacion));const m=async()=>{e.append("id_contrato",i.assingResident.id_contrato),e.append("id_residente",i.assingResident.id_residente),e.append("fecha_inicio_asignacion",i.assingResident.fecha_inicio_asignacion),a("submit",e)},r=async()=>{const{data:n}=await C();i.listContract=n.map(o=>({value:o.id_contrato,label:o.nombre_proyecto}))},s=async()=>{const{data:n}=await h();i.listResident=n.map(o=>({value:o.id_residente,label:o.nombre_completo}))},d=n=>{e.append("archivo_asignacion",n.target.files[0]),console.log(n.target.files[0])},p=async()=>{window.open(`${i.fileURl}`,"_blank")};return r(),s(),{app:i,formData:e,sendForm:m,getContracts:r,getResident:s,fileUpload:d,downloadFile:p}}},k={class:"max-w-xl mx-auto"},x={key:0,class:"flex flex-row justify-end"};function U(c,a,i,e,m,r){const s=_("select-base"),d=_("input-base"),p=_("button-base");return g(),f("div",k,[t(s,{id:"id_contrato",label:"Contrato",options:e.app.listContract,modelValue:e.app.assingResident.id_contrato,"onUpdate:modelValue":a[0]||(a[0]=n=>e.app.assingResident.id_contrato=n),class:"mb-3"},null,8,["options","modelValue"]),t(s,{id:"id_residente",label:"Residente",options:e.app.listResident,class:"mb-3",modelValue:e.app.assingResident.id_residente,"onUpdate:modelValue":a[1]||(a[1]=n=>e.app.assingResident.id_residente=n)},null,8,["options","modelValue"]),t(d,{id:"fecha_inicio_asignacion",label:"Fecha de asignación del Residente",type:"date",class:"mb-3",modelValue:e.app.assingResident.fecha_inicio_asignacion,"onUpdate:modelValue":a[2]||(a[2]=n=>e.app.assingResident.fecha_inicio_asignacion=n)},null,8,["modelValue"]),l("div",null,[l("div",null,[t(d,{id:"archivo_asignacion",label:"Carga oficio de designación",type:"file",class:"mb-3",accept:"application/pdf",onChange:e.fileUpload},null,8,["onChange"])]),i.editMode===!0?(g(),f("div",x,[l("span",null,w(e.app.fileName[5]),1),l("img",{src:v,class:"w-12 h-12",onClick:a[3]||(a[3]=(...n)=>e.downloadFile&&e.downloadFile(...n))})])):F("",!0)]),t(p,{label:"Guardar",onClick:e.sendForm,class:"mr-0 ml-auto"},null,8,["onClick"])])}const E=y(B,[["render",U]]);export{E as F};
