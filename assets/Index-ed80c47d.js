import{_ as A,o as t,c as o,b as c,F as b,d as m,t as y,n as w,f as p,u as x,r as g,a as f,g as h}from"./index-d504a6b8.js";import{a as B,d as k}from"./users-3da8960a.js";import{A as C}from"./ArrowBack-9ccc7022.js";import{B as E}from"./ButtonBase-92d87524.js";import{T as U}from"./fetchApi-621ceb9d.js";import{S as i}from"./sweetalert2.all-281a79b7.js";const F={name:"TableBase",props:{headers:{type:Array,default:()=>[{label:"Example Header",field:"example"}]},data:{type:Array,default:()=>[{example:"value 1"}]},options:{type:Array,default:[]}},setup(){return{dots:[1,2,3],openActions:r=>{document.getElementById(r).classList.toggle("hidden")}}}},I={class:"border border-solid border-black border-collapse text-gray-900 w-full"},M={key:0,class:"p-2 border border-solid border-gray-100 relative"},O={class:"flex justify-center"},$=["onClick"],T=["id","onMouseleave"],N={class:"flex flex-col"},R=["onClick"],S={key:0},V={key:1},j={key:2};function q(d,_,r,a,u,v){return t(),o("table",I,[c("tr",null,[(t(!0),o(b,null,m(r.headers,(n,e)=>(t(),o("th",{key:e,class:"p-2 border border-b-2 border-solid border-black"},y(n.label),1))),128))]),(t(!0),o(b,null,m(r.data,(n,e)=>(t(),o("tr",{id:"rows",class:w(["",{" bg-gray-100":e%2===0}]),key:e},[(t(!0),o(b,null,m(r.headers,(s,l)=>(t(),o("td",{key:l,class:"p-2 border border-solid border-black"},y(n[s.field]),1))),128)),r.options.length?(t(),o("td",M,[c("div",O,[c("div",{class:"p-1 cursor-pointer",onClick:s=>a.openActions(`table-actions-${e}`)},[(t(!0),o(b,null,m(a.dots,(s,l)=>(t(),o("span",{key:l,class:"rounded-full h-1 w-1 block bg-blue mb-1"}))),128))],8,$)]),c("div",{class:"hidden absolute right-4 top-8 bg-white z-10",style:{"box-shadow":"-3px 3px 6px #00000029"},id:`table-actions-${e}`,onMouseleave:s=>a.openActions(`table-actions-${e}`)},[c("div",N,[(t(!0),o(b,null,m(r.options,(s,l)=>(t(),o("div",{key:l,class:"h-8 flex justify-center items-center py-2 px-8"},[c("p",{class:"text-xs border-b border-solid border-gray-100 cursor-pointer hover:border-gray hover:font-medium",onClick:J=>s.action(n)},[n.estatus_empleado==="Activo"&&s.label==="Editar"?(t(),o("span",S," Editar ")):p("",!0),n.estatus_empleado==="Activo"&&s.label==="Estatus"?(t(),o("span",V," Inactivar ")):p("",!0),n.estatus_empleado==="Inactivo"&&s.label==="Estatus"?(t(),o("span",j," Activar ")):p("",!0)],8,R)]))),128))])],40,T)])):p("",!0)],2))),128))])}const z=A(F,[["render",q]]),D={name:"UsersRolesMAOFIndex",components:{TableBase:z,ArrowBack:C,ButtonBase:E,TitleBar:U},setup(){const d=x(),_=[{label:"Id",field:"empleado_maof"},{label:"Nombre",field:"nombre_completo"},{label:"Unidad MAOF",field:"unidad_maof"},{label:"Correo",field:"correo_electronico"},{label:"Rol MAOF",field:"rol_maof"},{label:"Estatus",field:"estatus_empleado"}],r=g([]),a=g({estatus_empleado:""}),u=async()=>{const{data:e}=await B();r.value=e},v=[{label:"Editar",action:e=>{console.log(e),d.push({name:"EditUsersRolesMAOF",params:{userRolMAOFId:e.empleado_maof}})}},{label:"Estatus",action:async e=>{e.estatus_empleado==="Activo"&&i.fire({title:`Estás seguro que desea inactivar al usuario "${e.nombre_completo}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Inactivar!",reverseButtons:!0}).then(async s=>{if(s.isConfirmed)try{a.estatus_empleado=2,await k(e.empleado_maof,a),await u(),i.fire("¡Inactivo!","El usuario se inactivó","success")}catch(l){i.fire("Error",`${l.response.data.detail}`,"error")}}),e.estatus_empleado==="Desactivado"&&i.fire({title:`Estás seguro que desea activar al usuario "${e.nombre_completo}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Activar!",reverseButtons:!0}).then(async s=>{if(s.isConfirmed)try{a.estatus_empleado=0,await k(e.id,a),await u(),i.fire("¡Activo!","El usuario se activó","success")}catch(l){i.fire("Error",`${l.response.data.detail}`,"error")}})}}],n=()=>d.push({name:"NewUsersRolesMAOF"});return u(),{userAndRols:r,userAndRolStatus:a,featureOptions:v,headers:_,goToNewUserAndRols:n}}},L={class:"px-4 mt-10"},H={class:"px-4"};function G(d,_,r,a,u,v){const n=f("arrow-back"),e=f("title-bar"),s=f("button-base"),l=f("table-base");return t(),o("main",L,[h(n),h(e,{title:"Usuarios y Roles MAOF",subtitle:"Inicio"}),c("section",H,[h(s,{label:"Alta de Usuarios MAOF",onClick:a.goToNewUserAndRols,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),h(l,{options:a.featureOptions,headers:a.headers,data:a.userAndRols},null,8,["options","headers","data"])])])}const Z=A(D,[["render",G]]);export{Z as default};
