import{T as b}from"./TableBase-9685b824.js";import{f as h,d as g}from"./resident-93cdc6ab.js";import{A as B}from"./ArrowBack-d291de79.js";import{H as w}from"./HomePage-4a126370.js";import{B as v}from"./fetchApi-ad601357.js";import{_ as x,a as R,u as k,r as C,b as o,o as E,c as I,d as s,e as n,t as y}from"./index-7fa234a7.js";import{T as N}from"./TitleBar-f10748a0.js";import{S as _}from"./sweetalert2.all-281a79b7.js";import{L as T}from"./LogoutComponent-43b9f8f1.js";const A={name:"ResidenteIndex",components:{TableBase:b,ArrowBack:B,HomePage:w,ButtonBase:v,TitleBar:N,LogoutComponent:T},setup(){const f=R(),{rol:p}=f.getAuthData,a=k(),t=[{label:"Id",field:"id_residente"},{label:"Nombre",field:"nombre_completo"},{label:"Unidad MAOF",field:"unidad_maof"},{label:"Fecha de inicio",field:"fecha_inicio_residente"},{label:"Fecha de fin",field:"fecha_fin_residente"},{label:"Estado",field:"estado_residente"}],i=C([]),r=async()=>{const{data:e}=await h();i.value=e},c=[{label:"Editar",action:e=>{if(e.estado_residente==="Activo")a.push({name:"EditResident",params:{residentId:e.id_residente}});else return""}},{label:"Inactivar",action:async e=>{_.fire({title:`Estás seguro que deseas inactivar el residente "${e.nombre_completo}"?`,text:"Esto finalizara las asignaciones del residente",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Inactivar!",reverseButtons:!0}).then(async l=>{if(l.isConfirmed)try{await g(e.id_residente),await r(),_.fire("¡Inactivo!","El residente se inactivó","success")}catch(m){_.fire("Error",`${m.response.data.detail}`,"error")}})}}],d=()=>a.push({name:"NewResident"});return r(),{resident:i,featureOptions:c,headers:t,rol:p,goToNewResident:d}}},S={class:"px-4 mt-10"},F={class:"flex justify-between"},O={class:"flex justify-center items-center"},j={class:"text-black font-semibold mr-4 items-center content-center"},D={class:"px-4"};function H(f,p,a,t,i,r){const c=o("arrow-back"),d=o("home-page"),e=o("logout-component"),l=o("title-bar"),m=o("button-base"),u=o("table-base");return E(),I("main",S,[s("div",F,[n(c),s("div",O,[s("p",j,y(t.rol),1),n(d),n(e)])]),n(l,{title:"Residente",subtitle:"Inicio"}),s("section",D,[n(m,{label:"Nuevo Residente",onClick:t.goToNewResident,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),n(u,{description:"Residentes",options:t.featureOptions,headers:t.headers,data:t.resident},null,8,["options","headers","data"])])])}const J=x(A,[["render",H]]);export{J as default};
