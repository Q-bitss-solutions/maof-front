import{T as R,D as v}from"./DetailEstimate-83943d32.js";import{T as g}from"./TableBase-432dd021.js";import{f as C,a as I,b as A}from"./residentEstimate-f5c143e1.js";import{B as T}from"./fetchApi-c943dcd0.js";import{T as N}from"./ToggleSwtich-5ae92d62.js";import{_ as B,s as w,u as x,a as m,f as i,g as E,l as y,v as r,q as h,j as D,x as H}from"./index-5cc367f2.js";import{T as O}from"./TitleBar-39daad40.js";import{C as V}from"./CustomHeaderApp-8d94f481.js";import"./contract-0b747e5e.js";import"./PDF-a4bdfbbc.js";import"./ArrowBack-8ac6e4dd.js";import"./HomePage-555195f2.js";import"./LogoutComponent-f4751eee.js";const j={name:"ResidentEstimateIndex",components:{TableroEstimacionResidente:R,CustomHeaderApp:V,ButtonBase:T,TitleBar:O,TableBase:g,ToggleSwitch:N,DetailEstimate:v},setup(){const b=w(),{rol:s}=b.getAuthData,n=x(),t=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],d=m([]);m();const _=m([]);let a=!1,l=m(!1);const c=async()=>{const{data:e}=await C();d.value=e},f=[{label:"Detalles",disabled:!1,action:async e=>{l.value=!l.value;const{data:o}=await I(e.id_estimacion);o.fecha_recepcion_info_contratista=o.fecha_recepcion_info_contratista.split(" ")[0],o.fecha_periodo_inicio_estimacion=o.fecha_periodo_inicio_estimacion.split(" ")[0],o.fecha_periodo_fin_estimacion=o.fecha_periodo_fin_estimacion.split(" ")[0],_.value=o}},{label:"Nuevo",disabled:s!="Residente",action:e=>{n.push({name:"NewResidentEstimateById",params:{residentEstimateId:e.contrato_estimacion}})}},{label:"Archivo",disabled:!1,action:async e=>{n.push({name:"FilesResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}},{label:"Histórico",disabled:!1,action:async e=>{n.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}}],p=()=>n.push({name:"NewResidentEstimate"}),u=async()=>{if(a=!a,a===!0){const{data:e}=await A(9);d.value=e}a===!1&&c()};return c(),{residentEstimate:d,featureOptions:f,headers:t,goToNewResidentEstimate:p,getResidentEstimate:c,processo:u,procesoVariable:a,detalleEstimacionData:_,detalleEstimacion:l,rol:s}}},k={class:"px-4 mt-10"},S={class:"px-4"},P={class:"flex justify-end"};function F(b,s,n,t,d,_){const a=i("CustomHeaderApp"),l=i("title-bar"),c=i("detail-estimate"),f=i("button-base"),p=i("toggle-switch"),u=i("tablero-estimacion-residente");return E(),y("main",k,[r(a),r(l,{title:"Estimación Residente",subtitle:"Inicio"}),h("section",S,[h("div",P,[r(c,{data:t.detalleEstimacionData,isOpen:t.detalleEstimacion,onSubmit:s[0]||(s[0]=e=>t.detalleEstimacion=!1)},null,8,["data","isOpen"]),t.rol=="Residente"?(E(),D(f,{key:0,label:"Nueva Estimación Residente",onClick:t.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"])):H("",!0),r(p,{label:"En Proceso",onChange:t.processo,class:"mb-3 mr-0 ml-10",placeholder:"En Proceso"},null,8,["onChange"])]),r(u,{options:t.featureOptions,headers:t.headers,data:t.residentEstimate},null,8,["options","headers","data"])])])}const $=B(j,[["render",F]]);export{$ as default};
