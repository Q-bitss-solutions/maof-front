import{I as b}from"./InputBase-688a8fd6.js";import{B as u}from"./ButtonBase-99038fe1.js";import{S as v}from"./SelectBase-1e323fe8.js";import{f as R}from"./reviewArea-7eabdf9c.js";import{f as y}from"./users-0cf80980.js";import{S as A}from"./sweetalert2.all-281a79b7.js";import{_ as E,k as V,a as n,o as r,c as g,e as c,f as p,g as _}from"./index-fc54af53.js";const w={name:"FormResident",props:{editMode:{type:Boolean,default:!1},resident:{type:Object,default:()=>({})}},components:{InputBase:b,ButtonBase:u,SelectBase:v},setup(l,{emit:o}){const e=V({resident:{id_empleado_maof:"",fecha_inicio_residente:"",fecha_fin_residente:""},idAreaRevisora:"",disabled:!1,listReviewAreas:[],listEmpleados:[]});l.editMode&&(e.resident=l.resident,e.resident.fecha_inicio_residente=l.resident.fecha_inicio_residente.split("-").reverse().join("-"));const a=()=>o("submit",e.resident),d=async()=>{const{data:s}=await R();console.log(s),e.listReviewAreas=s.map(i=>({value:i.id_unidad_maof,label:i.nombre_unidad})),console.log(e.listReviewAreas)},m=async()=>{try{console.log(e.idAreaRevisora);const{data:s}=await y(e.idAreaRevisora);console.log(s),e.listEmpleados=s.map(i=>({value:i.empleado_maof,label:i.nombre_completo})),console.log(e.listEmpleados),e.disabled=!1}catch(s){A.fire("Error",`${s.response.data.detail}`,"error"),e.disabled=!0,e.listEmpleados=[]}};return d(),{app:e,sendForm:a,getReviewAreas:d,getEmpleadosSICT:m}}},B={class:"max-w-xl mx-auto"};function k(l,o,e,a,d,m){const s=n("select-base"),i=n("input-base"),f=n("button-base");return r(),g("div",B,[e.editMode!==!0?(r(),c(s,{key:0,id:"id_area_revisora",label:"Área revisora",options:a.app.listReviewAreas,modelValue:a.app.idAreaRevisora,"onUpdate:modelValue":o[0]||(o[0]=t=>a.app.idAreaRevisora=t),onChange:o[1]||(o[1]=t=>a.getEmpleadosSICT()),class:"mb-3"},null,8,["options","modelValue"])):p("",!0),e.editMode!==!0?(r(),c(s,{key:1,id:"id_empleado_sict",label:"Empleado SICT",options:a.app.listEmpleados,class:"mb-3",modelValue:a.app.resident.id_empleado_maof,"onUpdate:modelValue":o[2]||(o[2]=t=>a.app.resident.id_empleado_maof=t),disabled:a.app.disabled},null,8,["options","modelValue","disabled"])):p("",!0),_(i,{id:"fecha_inicio_proyecto",label:"Fecha inicio del residente",type:"date",class:"mb-3",modelValue:a.app.resident.fecha_inicio_residente,"onUpdate:modelValue":o[3]||(o[3]=t=>a.app.resident.fecha_inicio_residente=t)},null,8,["modelValue"]),_(f,{label:"Guardar",onClick:a.sendForm,class:"mr-0 ml-auto",disabled:a.app.disabled},null,8,["onClick","disabled"])])}const T=E(w,[["render",k]]);export{T as F};
