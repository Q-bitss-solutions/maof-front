import{_ as x,o as t,c as o,b as c,F as m,d as _,t as g,n as A,f as h,u as B,r as k,a as b,g as p}from"./index-415b9246.js";import{a as C,d as w}from"./users-215a0072.js";import{A as E}from"./ArrowBack-0a1fa26c.js";import{H as I}from"./HomePage-3558943f.js";import{B as $}from"./ButtonBase-2d40ca8d.js";import{T as F}from"./fetchApi-7263c64b.js";import{S as i}from"./sweetalert2.all-281a79b7.js";const M={name:"TableBase",props:{headers:{type:Array,default:()=>[{label:"Example Header",field:"example"}]},data:{type:Array,default:()=>[{example:"value 1"}]},options:{type:Array,default:[]}},setup(){return{dots:[1,2,3],openActions:a=>{document.getElementById(a).classList.toggle("hidden")}}}},O={class:"border border-solid border-black border-collapse text-gray-900 w-full"},U={key:0,class:"p-2 border border-solid border-gray-100 relative"},T={class:"flex justify-center"},N=["onClick"],R=["id","onMouseleave"],S={class:"flex flex-col"},j=["onClick"],H={key:0},V={key:1},q={key:2};function z(d,f,a,l,u,v){return t(),o("table",O,[c("tr",null,[(t(!0),o(m,null,_(a.headers,(r,e)=>(t(),o("th",{key:e,class:"p-2 border border-b-2 border-solid border-black"},g(r.label),1))),128))]),(t(!0),o(m,null,_(a.data,(r,e)=>(t(),o("tr",{id:"rows",class:A(["",{" bg-gray-100":e%2===0}]),key:e},[(t(!0),o(m,null,_(a.headers,(s,n)=>(t(),o("td",{key:n,class:"p-2 border border-solid border-black"},g(r[s.field]),1))),128)),a.options.length?(t(),o("td",U,[c("div",T,[c("div",{class:"p-1 cursor-pointer",onClick:s=>l.openActions(`table-actions-${e}`)},[(t(!0),o(m,null,_(l.dots,(s,n)=>(t(),o("span",{key:n,class:"rounded-full h-1 w-1 block bg-blue mb-1"}))),128))],8,N)]),c("div",{class:"hidden absolute right-4 top-8 bg-white z-10",style:{"box-shadow":"-3px 3px 6px #00000029"},id:`table-actions-${e}`,onMouseleave:s=>l.openActions(`table-actions-${e}`)},[c("div",S,[(t(!0),o(m,null,_(a.options,(s,n)=>(t(),o("div",{key:n,class:"h-8 flex justify-center items-center py-2 px-8"},[c("p",{class:"text-xs border-b border-solid border-gray-100 cursor-pointer hover:border-gray hover:font-medium",onClick:y=>s.action(r)},[r.estatus_empleado==="Activo"&&s.label==="Editar"?(t(),o("span",H," Editar ")):h("",!0),r.estatus_empleado==="Activo"&&s.label==="Estatus"?(t(),o("span",V," Inactivar ")):h("",!0),r.estatus_empleado==="Inactivo"&&s.label==="Estatus"?(t(),o("span",q," Activar ")):h("",!0)],8,j)]))),128))])],40,R)])):h("",!0)],2))),128))])}const L=x(M,[["render",z]]),D={name:"UsersRolesMAOFIndex",components:{TableBase:L,ArrowBack:E,HomePage:I,ButtonBase:$,TitleBar:F},setup(){const d=B(),f=[{label:"Id",field:"empleado_maof"},{label:"Nombre",field:"nombre_completo"},{label:"Unidad MAOF",field:"unidad_maof"},{label:"Correo",field:"correo_electronico"},{label:"Rol MAOF",field:"rol_maof"},{label:"Estatus",field:"estatus_empleado"}],a=k([]),l=k({estatus_empleado:""}),u=async()=>{const{data:e}=await C();a.value=e},v=[{label:"Editar",action:e=>{console.log(e),d.push({name:"EditUsersRolesMAOF",params:{userRolMAOFId:e.empleado_maof}})}},{label:"Estatus",action:async e=>{e.estatus_empleado==="Inactivo"&&i.fire({title:`Estás seguro que deseas activar al usuario "${e.nombre_completo}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Inactivar!",reverseButtons:!0}).then(async s=>{if(s.isConfirmed)try{await w(e.empleado_maof),await u(),i.fire("¡Inactivo!","El usuario se inactivó","success")}catch(n){i.fire("Error",`${n.response.data.detail}`,"error")}}),e.estatus_empleado==="Activo"&&i.fire({title:`Estás seguro que desea inactivar al usuario "${e.nombre_completo}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Inactivar!",reverseButtons:!0}).then(async s=>{if(s.isConfirmed)try{await w(e.empleado_maof),await u(),i.fire("¡Inactivo!","El usuario se inactivó","success")}catch(n){i.fire("Error",`${n.response.data.detail}`,"error")}})}}],r=()=>d.push({name:"NewUsersRolesMAOF"});return u(),{userAndRols:a,userAndRolStatus:l,featureOptions:v,headers:f,goToNewUserAndRols:r}}},P={class:"px-4 mt-10"},G={class:"flex justify-between"},J={class:"px-4"};function K(d,f,a,l,u,v){const r=b("arrow-back"),e=b("home-page"),s=b("title-bar"),n=b("button-base"),y=b("table-base");return t(),o("main",P,[c("div",G,[p(r),p(e)]),p(s,{title:"Usuarios y Roles MAOF",subtitle:"Inicio"}),c("section",J,[p(n,{label:"Alta de usuarios MAOF",onClick:l.goToNewUserAndRols,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),p(y,{options:l.featureOptions,headers:l.headers,data:l.userAndRols},null,8,["options","headers","data"])])])}const oe=x(D,[["render",K]]);export{oe as default};
