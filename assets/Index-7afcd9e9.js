import{T as u}from"./TableBase-e9da53d2.js";import{f as b,d as h}from"./resident-f356624c.js";import{A as B}from"./ArrowBack-75f05566.js";import{H as w}from"./HomePage-631a490f.js";import{B as v}from"./ButtonBase-fae998af.js";import{_ as R,u as g,r as x,a as o,o as E,c as I,b as _,g as a}from"./index-781d1396.js";import{T as k}from"./fetchApi-808f41e0.js";import{S as c}from"./sweetalert2.all-281a79b7.js";const C={name:"ResidenteIndex",components:{TableBase:u,ArrowBack:B,HomePage:w,ButtonBase:v,TitleBar:k},setup(){const n=g(),d=[{label:"Id",field:"id_residente"},{label:"Nombre",field:"nombre_completo"},{label:"Unidad MAOF",field:"unidad_maof"},{label:"Fecha de inicio",field:"fecha_inicio_residente"},{label:"Fecha de fin",field:"fecha_fin_residente"},{label:"Estado",field:"estado_residente"}],s=x([]),t=async()=>{const{data:e}=await b();s.value=e},l=[{label:"Editar",action:e=>{if(e.estado_residente==="Activo")n.push({name:"EditResident",params:{residentId:e.id_residente}});else return""}},{label:"Inactivar",action:async e=>{c.fire({title:`Estás seguro que deseas inactivar el residente "${e.nombre_completo}"?`,text:"Esto finalizara las asignaciones del residente",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Inactivar!",reverseButtons:!0}).then(async i=>{if(i.isConfirmed)try{await h(e.id_residente),await t(),c.fire("¡Inactivo!","El residente se inactivó","success")}catch(r){c.fire("Error",`${r.response.data.detail}`,"error")}})}}],m=()=>n.push({name:"NewResident"});return t(),{resident:s,featureOptions:l,headers:d,goToNewResident:m}}},N={class:"px-4 mt-10"},T={class:"flex justify-between"},y={class:"px-4"};function A(n,d,s,t,l,m){const e=o("arrow-back"),i=o("home-page"),r=o("title-bar"),f=o("button-base"),p=o("table-base");return E(),I("main",N,[_("div",T,[a(e),a(i)]),a(r,{title:"Residente",subtitle:"Inicio"}),_("section",y,[a(f,{label:"Nuevo Residente",onClick:t.goToNewResident,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),a(p,{options:t.featureOptions,headers:t.headers,data:t.resident},null,8,["options","headers","data"])])])}const z=R(C,[["render",A]]);export{z as default};
