import{T as f}from"./TableBase-610449ec.js";import{f as _,d as u}from"./resident-e425d7ab.js";import{B as b}from"./fetchApi-cdd6cb3e.js";import{_ as h,u as B,a as R,f as o,g as v,l as C,v as a,q as w}from"./index-920dd253.js";import{T as x}from"./TitleBar-1068e623.js";import{S as d}from"./sweetalert2.all-281a79b7.js";import{C as E}from"./CustomHeaderApp-0287c004.js";import"./ArrowBack-90923dcc.js";import"./HomePage-c35a3524.js";import"./LogoutComponent-5eb012a3.js";const I={name:"ResidenteIndex",components:{TableBase:f,ButtonBase:b,TitleBar:x,CustomHeaderApp:E},setup(){const s=B(),c=[{label:"Id",field:"id_residente"},{label:"Nombre",field:"nombre_completo"},{label:"Unidad MAOF",field:"unidad_maof"},{label:"Fecha de inicio",field:"fecha_inicio_residente"},{label:"Fecha de fin",field:"fecha_fin_residente"},{label:"Estado",field:"estado_residente"}],n=R([]),t=async()=>{const{data:e}=await _();n.value=e},l=[{label:"Editar",action:e=>{if(e.estado_residente==="Activo")s.push({name:"EditResident",params:{residentId:e.id_residente}});else return""}},{label:"Inactivar",action:async e=>{d.fire({title:`Estás seguro que deseas inactivar el residente "${e.nombre_completo}"?`,text:"Esto finalizara las asignaciones del residente",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Inactivar!",reverseButtons:!0}).then(async i=>{if(i.isConfirmed)try{await u(e.id_residente),await t(),d.fire("¡Inactivo!","El residente se inactivó","success")}catch(r){d.fire("Error",`${r.response.data.detail}`,"error")}})}}],m=()=>s.push({name:"NewResident"});return t(),{resident:n,featureOptions:l,headers:c,goToNewResident:m}}},g={class:"px-4 mt-10"},N={class:"px-4"};function T(s,c,n,t,l,m){const e=o("CustomHeaderApp"),i=o("title-bar"),r=o("button-base"),p=o("table-base");return v(),C("main",g,[a(e),a(i,{title:"Residente",subtitle:"Inicio"}),w("section",N,[a(r,{label:"Nuevo Residente",onClick:t.goToNewResident,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),a(p,{description:"Residentes",options:t.featureOptions,headers:t.headers,data:t.resident},null,8,["options","headers","data"])])])}const z=h(I,[["render",T]]);export{z as default};
