import{I as F}from"./InputBase-7b333c5d.js";import{b as V,B as x}from"./auth-f1c010b2.js";import{S as y}from"./SelectBase-553526a4.js";import{f as U}from"./SICTUnits-13f16526.js";import{g as k}from"./ArrowBack-e6c8a65f.js";import{f as w}from"./reviewArea-c540debc.js";import{u as O,c as d,r as c,e as q}from"./index-94304edc.js";import{S as B}from"./sweetalert2.all-281a79b7.js";import{_ as E,m as $,s as C,a as g,o as s,c as n,d as i,F as p,e as f,t as _,g as b}from"./index-9c7881ce.js";const S=k(),I=t=>V({...t,headers:S}),N=()=>I({url:"/cat_rol_maof/",method:"GET"}),h={name:"FormUnitMAOF",props:{editMode:{type:Boolean,default:!1},userAndRols:{type:Object,default:()=>({})}},components:{InputBase:F,ButtonBase:x,SelectBase:y},setup(t,{emit:l}){const r=$({userAndRols:{correo_electronico:"",nombre:"",apellido_materno:"",apellido_paterno:"",rol_maof:"",unidad_maof:""},listUnitsMAOF:[],listRolesMAOF:[]});t.editMode&&(r.userAndRols=t.userAndRols,r.userAndRols.rol_maof=t.userAndRols.rol_maof_id,r.userAndRols.unidad_maof=t.userAndRols.unidad_maof_id);const o=C(()=>({correo_electronico:{required:d.withMessage("El email es requerido",c),correo_electronico:d.withMessage("No es un correo valido",q)},nombre:{required:d.withMessage("El nombre es requerido",c)},apellido_paterno:{required:d.withMessage("El apellido paterno es requerido",c)},apellido_materno:{required:d.withMessage("El apellido materno es requerido",c)},rol_maof:{required:d.withMessage("El rol es requerido",c)},unidad_maof:{required:d.withMessage("La unidad es requerido",c)}})),v=O(o,r.userAndRols),M=async u=>{if(r.listUnitsMAOF=[],u!=="2"){const{data:e}=await U();r.listUnitsMAOF=e.map(a=>({value:a.id_unidad_maof,label:a.unidad})),r.listUnitsMAOF.sort((a,A)=>a.label>A.label?1:a.label<A.label?-1:0)}else{const{data:e}=await w();r.listUnitsMAOF=e.map(a=>({value:a.id,label:a.nombre_unidad})),r.listUnitsMAOF.sort((a,A)=>a.label>A.label?1:a.label<A.label?-1:0)}},m=async()=>{const{data:u}=await N();r.listRolesMAOF=u.map(e=>({value:e.rol_maof,label:e.nombre_rol_maof})),r.listRolesMAOF.sort((e,a)=>e.label>a.label?1:e.label<a.label?-1:0)},R=async()=>{await v.value.$validate()?l("submit",r.userAndRols):B.fire("Error","Revisa bien los datos","error")};return m(),M(),{app:r,v$:v,sendForm:R,getUnitsAndReviewArea:M}}},G={class:"max-w-xl mx-auto"};function H(t,l,r,o,v,M){const m=g("input-base"),R=g("select-base"),u=g("button-base");return s(),n("div",G,[i(m,{id:"aPaterno",label:"Apellido Paterno",class:"mb-3",modelValue:o.app.userAndRols.apellido_paterno,"onUpdate:modelValue":l[0]||(l[0]=e=>o.app.userAndRols.apellido_paterno=e)},null,8,["modelValue"]),o.v$.apellido_paterno.$error?(s(!0),n(p,{key:0},f(o.v$.apellido_paterno.$errors,e=>(s(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},_(e.$message),1))),128)):b("",!0),i(m,{id:"aMaterno",label:"Apellido Materno",class:"mb-3",modelValue:o.app.userAndRols.apellido_materno,"onUpdate:modelValue":l[1]||(l[1]=e=>o.app.userAndRols.apellido_materno=e)},null,8,["modelValue"]),o.v$.apellido_materno.$error?(s(!0),n(p,{key:1},f(o.v$.apellido_materno.$errors,e=>(s(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},_(e.$message),1))),128)):b("",!0),i(m,{id:"nombre",label:"Nombre(s)",class:"mb-3",modelValue:o.app.userAndRols.nombre,"onUpdate:modelValue":l[2]||(l[2]=e=>o.app.userAndRols.nombre=e)},null,8,["modelValue"]),o.v$.nombre.$error?(s(!0),n(p,{key:2},f(o.v$.nombre.$errors,e=>(s(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},_(e.$message),1))),128)):b("",!0),i(R,{id:"id_rol_maof",label:"Rol en el sistema",options:o.app.listRolesMAOF,class:"mb-3",modelValue:o.app.userAndRols.rol_maof,"onUpdate:modelValue":l[3]||(l[3]=e=>o.app.userAndRols.rol_maof=e),onChange:l[4]||(l[4]=e=>o.getUnitsAndReviewArea(o.app.userAndRols.rol_maof))},null,8,["options","modelValue"]),o.v$.rol_maof.$error?(s(!0),n(p,{key:3},f(o.v$.rol_maof.$errors,e=>(s(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},_(e.$message),1))),128)):b("",!0),i(R,{id:"id_unidad_maof",label:"Unidad MAOF",options:o.app.listUnitsMAOF,modelValue:o.app.userAndRols.unidad_maof,"onUpdate:modelValue":l[5]||(l[5]=e=>o.app.userAndRols.unidad_maof=e),class:"mb-3"},null,8,["options","modelValue"]),o.v$.unidad_maof.$error?(s(!0),n(p,{key:4},f(o.v$.unidad_maof.$errors,e=>(s(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},_(e.$message),1))),128)):b("",!0),i(m,{id:"email",label:"Correo electrÃ³nico",class:"mb-3",type:"email",modelValue:o.app.userAndRols.correo_electronico,"onUpdate:modelValue":l[6]||(l[6]=e=>o.app.userAndRols.correo_electronico=e)},null,8,["modelValue"]),o.v$.correo_electronico.$error?(s(!0),n(p,{key:5},f(o.v$.correo_electronico.$errors,e=>(s(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},_(e.$message),1))),128)):b("",!0),i(u,{label:"Guardar",onClick:o.sendForm,class:"mr-0 ml-auto"},null,8,["onClick"])])}const W=E(h,[["render",H]]);export{W as F};
