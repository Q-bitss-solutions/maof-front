import{j as f,_ as g,u as h,r as b,a as c,o as I,c as S,g as r,b as m,i as d,t as p}from"./index-733385a3.js";import{B as x}from"./ButtonBase-47fb9ccf.js";import{f as w,T as V}from"./fetchApi-8b9134ef.js";import{I as B}from"./InputBase-6c0b0bec.js";import"./sweetalert2.all-281a79b7.js";const T=e=>w({url:"user/login",method:"POST",data:e}),y=f("auth",{state:()=>({access:"",id_empleado:"",rol:"",refresh:""}),actions:{setInfo(){this.access=localStorage.getItem("access"),this.id_empleado=localStorage.getItem("id_empleado"),this.rol=localStorage.getItem("rol"),this.refresh=localStorage.getItem("refresh")},setToLocalStore(e){localStorage.setItem("access",e.access),localStorage.setItem("id_empleado",e.id_empleado),localStorage.setItem("rol",e.rol),localStorage.setItem("refresh",e.refresh)}},getters:{getAuthData(){return{access:this.access,id_empleado:this.id_empleado,rol:this.rol,refresh:this.refresh}}}}),k={name:"ResidenteIndex",components:{ButtonBase:x,TitleBar:V,InputBase:B},setup(){const e=h(),s=y(),l=b({email:"",password:""}),o=async()=>{try{const{data:a}=await T(l.value);s.setToLocalStore(a),s.setInfo(),t()}catch(a){console.log("error: ",a)}},t=()=>{s.access!==null&&e.push({name:"Home"})};return t(),{user:l,sendForm:o,logIn:t}}},v={class:"px-4 mt-10"},L={class:"px-4"},C={class:"max-w-xl mx-auto"};function E(e,s,l,o,t,a){const u=c("title-bar"),i=c("input-base"),_=c("button-base");return I(),S("main",v,[r(u,{title:"Login",subtitle:"Inicio"}),m("section",L,[m("div",C,[r(i,{id:"email",label:"Email",type:"email",class:"mb-3",modelValue:o.user.email,"onUpdate:modelValue":s[0]||(s[0]=n=>o.user.email=n)},null,8,["modelValue"]),d(" "+p(o.user.email)+" ",1),r(i,{id:"password",label:"Password",type:"password",class:"mb-3",modelValue:o.user.password,"onUpdate:modelValue":s[1]||(s[1]=n=>o.user.password=n)},null,8,["modelValue"]),d(" "+p(o.user.password)+" ",1),r(_,{label:"Enviar",onClick:o.sendForm,class:"mr-0 ml-auto"},null,8,["onClick"])])])])}const R=g(k,[["render",E]]);export{R as default};
