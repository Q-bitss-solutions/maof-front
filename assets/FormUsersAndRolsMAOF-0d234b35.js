import{I as V}from"./InputBase-3dbf9f97.js";import{B as g}from"./ButtonBase-56b47a72.js";import{S as y}from"./SelectBase-4536674d.js";import{f as F}from"./SICTUnits-bc7c9348.js";import{f as x}from"./fetchApi-31df9da7.js";import{u as k,c as n,r as m,e as U}from"./index-72052aca.js";import{S as q}from"./sweetalert2.all-281a79b7.js";import{_ as O,k as w,q as $,a as v,o as r,c as a,g as t,F as u,d as c,t as p,f}from"./index-5a3578da.js";const B=()=>x({url:"/cat_rol_maof/",method:"GET"}),E={name:"FormUnitMAOF",props:{editMode:{type:Boolean,default:!1},userAndRols:{type:Object,default:()=>({})}},components:{InputBase:V,ButtonBase:g,SelectBase:y},setup(_,{emit:l}){const s=w({userAndRols:{correo_electronico:"",nombre:"",apellido_materno:"",apellido_paterno:"",rol_maof:"",unidad_maof:""},listUnitsMAOF:[],listRolesMAOF:[]});_.editMode&&(s.userAndRols=_.userAndRols,s.userAndRols.rol_maof=_.userAndRols.rol_maof_id,s.userAndRols.unidad_maof=_.userAndRols.unidad_maof_id,console.log("app: ",s.userAndRols));const o=$(()=>({correo_electronico:{required:n.withMessage("El email es requerido",m),correo_electronico:n.withMessage("No es un correo valido",U)},nombre:{required:n.withMessage("El nombre es requerido",m)},apellido_paterno:{required:n.withMessage("El apellido paterno es requerido",m)},apellido_materno:{required:n.withMessage("El apellido materno es requerido",m)},rol_maof:{required:n.withMessage("El rol es requerido",m)},unidad_maof:{required:n.withMessage("La unidad es requerido",m)}})),R=k(o,s.userAndRols),M=async()=>{const{data:i}=await F();s.listUnitsMAOF=i.map(e=>({value:e.id_unidad_maof,label:e.unidad})),s.listUnitsMAOF.sort((e,b)=>e.label>b.label?1:e.label<b.label?-1:0)},d=async()=>{const{data:i}=await B();s.listRolesMAOF=i.map(e=>({value:e.rol_maof,label:e.nombre_rol_maof})),s.listRolesMAOF.sort((e,b)=>e.label>b.label?1:e.label<b.label?-1:0)},A=async()=>{await R.value.$validate()?l("submit",s.userAndRols):q.fire("Error","Revisa bien los datos","error")};return M(),d(),{app:s,sendForm:A,v$:R}}},C={class:"max-w-xl mx-auto"};function S(_,l,s,o,R,M){const d=v("input-base"),A=v("select-base"),i=v("button-base");return r(),a("div",C,[t(d,{id:"aPaterno",label:"Apellido Paterno",class:"mb-3",modelValue:o.app.userAndRols.apellido_paterno,"onUpdate:modelValue":l[0]||(l[0]=e=>o.app.userAndRols.apellido_paterno=e)},null,8,["modelValue"]),o.v$.apellido_paterno.$error?(r(!0),a(u,{key:0},c(o.v$.apellido_paterno.$errors,e=>(r(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(d,{id:"aMaterno",label:"Apellido Materno",class:"mb-3",modelValue:o.app.userAndRols.apellido_materno,"onUpdate:modelValue":l[1]||(l[1]=e=>o.app.userAndRols.apellido_materno=e)},null,8,["modelValue"]),o.v$.apellido_materno.$error?(r(!0),a(u,{key:1},c(o.v$.apellido_materno.$errors,e=>(r(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(d,{id:"nombre",label:"Nombre(s)",class:"mb-3",modelValue:o.app.userAndRols.nombre,"onUpdate:modelValue":l[2]||(l[2]=e=>o.app.userAndRols.nombre=e)},null,8,["modelValue"]),o.v$.nombre.$error?(r(!0),a(u,{key:2},c(o.v$.nombre.$errors,e=>(r(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(A,{id:"id_unidad_maof",label:"Unidad MAOF",options:o.app.listUnitsMAOF,modelValue:o.app.userAndRols.unidad_maof,"onUpdate:modelValue":l[3]||(l[3]=e=>o.app.userAndRols.unidad_maof=e),class:"mb-3"},null,8,["options","modelValue"]),o.v$.unidad_maof.$error?(r(!0),a(u,{key:3},c(o.v$.unidad_maof.$errors,e=>(r(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(A,{id:"id_rol_maof",label:"Rol en el sistema",options:o.app.listRolesMAOF,class:"mb-3",modelValue:o.app.userAndRols.rol_maof,"onUpdate:modelValue":l[4]||(l[4]=e=>o.app.userAndRols.rol_maof=e)},null,8,["options","modelValue"]),o.v$.rol_maof.$error?(r(!0),a(u,{key:4},c(o.v$.rol_maof.$errors,e=>(r(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(d,{id:"email",label:"Correo electrÃ³nico",class:"mb-3",type:"email",modelValue:o.app.userAndRols.correo_electronico,"onUpdate:modelValue":l[5]||(l[5]=e=>o.app.userAndRols.correo_electronico=e)},null,8,["modelValue"]),o.v$.correo_electronico.$error?(r(!0),a(u,{key:5},c(o.v$.correo_electronico.$errors,e=>(r(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(i,{label:"Guardar",onClick:o.sendForm,class:"mr-0 ml-auto"},null,8,["onClick"])])}const D=O(E,[["render",S]]);export{D as F};
