import{I as x}from"./InputBase-73fa837d.js";import{a as F,B as V}from"./fetchApi-d6252301.js";import{S as w}from"./SelectBase-321e395e.js";import{f as y}from"./SICTUnits-a6358ca6.js";import{f as U}from"./reviewArea-bceb817d.js";import{u as k,c as s,r as u,e as O}from"./index-60785a98.js";import{S as q}from"./sweetalert2.all-281a79b7.js";import{_ as $,m as S,s as B,b as M,o as t,c as n,e as i,F as c,f as p,t as f,h as b}from"./index-c168c190.js";const E=()=>F({url:"/cat_rol_maof/",method:"GET"}),C={name:"FormUnitMAOF",props:{editMode:{type:Boolean,default:!1},userAndRols:{type:Object,default:()=>({})}},components:{InputBase:x,ButtonBase:V,SelectBase:w},setup(_,{emit:a}){const l=S({userAndRols:{correo_electronico:"",nombre:"",apellido_materno:"",apellido_paterno:"",rol_maof:"",unidad_maof:""},listUnitsMAOF:[],listRolesMAOF:[]});_.editMode&&(l.userAndRols=_.userAndRols,l.userAndRols.rol_maof=_.userAndRols.rol_maof_id,l.userAndRols.unidad_maof=_.userAndRols.unidad_maof_id);const o=B(()=>({correo_electronico:{required:s.withMessage("El email es requerido",u),correo_electronico:s.withMessage("No es un correo valido",O)},nombre:{regex:s.withMessage("Solo caracteres alfabéticos",s.regex(/^[a-zA-Z\s]*$/)),required:s.withMessage("El nombre es requerido",u)},apellido_paterno:{regex:s.withMessage("Solo caracteres alfabéticos",s.regex(/^[a-zA-Z\s]*$/)),required:s.withMessage("El apellido paterno es requerido",u)},apellido_materno:{regex:s.withMessage("Solo caracteres alfabéticos",s.regex(/^[a-zA-Z\s]*$/)),required:s.withMessage("El apellido materno es requerido",u)},rol_maof:{required:s.withMessage("El rol es requerido",u)},unidad_maof:{required:s.withMessage("La unidad es requerido",u)}})),g=k(o,l.userAndRols),v=async m=>{if(l.listUnitsMAOF=[],m!=="2"){const{data:e}=await y();l.listUnitsMAOF=e.map(r=>({value:r.id_unidad_maof,label:r.unidad})),l.listUnitsMAOF.sort((r,A)=>r.label>A.label?1:r.label<A.label?-1:0)}else{const{data:e}=await U();l.listUnitsMAOF=e.map(r=>({value:r.id,label:r.nombre_unidad})),l.listUnitsMAOF.sort((r,A)=>r.label>A.label?1:r.label<A.label?-1:0)}},d=async()=>{const{data:m}=await E();l.listRolesMAOF=m.map(e=>({value:e.rol_maof,label:e.nombre_rol_maof})),l.listRolesMAOF.sort((e,r)=>e.label>r.label?1:e.label<r.label?-1:0)},R=async()=>{await g.value.$validate()?a("submit",l.userAndRols):q.fire("Error","Datos incompletos","error")};return d(),v(),{app:l,v$:g,sendForm:R,getUnitsAndReviewArea:v}}},h={class:"max-w-xl mx-auto"};function I(_,a,l,o,g,v){const d=M("input-base"),R=M("select-base"),m=M("button-base");return t(),n("div",h,[i(d,{id:"aPaterno",label:"Apellido Paterno",class:"mb-3",modelValue:o.app.userAndRols.apellido_paterno,"onUpdate:modelValue":a[0]||(a[0]=e=>o.app.userAndRols.apellido_paterno=e)},null,8,["modelValue"]),o.v$.apellido_paterno.$error?(t(!0),n(c,{key:0},p(o.v$.apellido_paterno.$errors,e=>(t(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):b("",!0),i(d,{id:"aMaterno",label:"Apellido Materno",class:"mb-3",modelValue:o.app.userAndRols.apellido_materno,"onUpdate:modelValue":a[1]||(a[1]=e=>o.app.userAndRols.apellido_materno=e)},null,8,["modelValue"]),o.v$.apellido_materno.$error?(t(!0),n(c,{key:1},p(o.v$.apellido_materno.$errors,e=>(t(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):b("",!0),i(d,{id:"nombre",label:"Nombre(s)",class:"mb-3",modelValue:o.app.userAndRols.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>o.app.userAndRols.nombre=e)},null,8,["modelValue"]),o.v$.nombre.$error?(t(!0),n(c,{key:2},p(o.v$.nombre.$errors,e=>(t(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):b("",!0),i(R,{id:"id_rol_maof",label:"Rol en el sistema",options:o.app.listRolesMAOF,class:"mb-3",modelValue:o.app.userAndRols.rol_maof,"onUpdate:modelValue":a[3]||(a[3]=e=>o.app.userAndRols.rol_maof=e),onChange:a[4]||(a[4]=e=>o.getUnitsAndReviewArea(o.app.userAndRols.rol_maof))},null,8,["options","modelValue"]),o.v$.rol_maof.$error?(t(!0),n(c,{key:3},p(o.v$.rol_maof.$errors,e=>(t(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):b("",!0),i(R,{id:"id_unidad_maof",label:"Unidad MAOF",options:o.app.listUnitsMAOF,modelValue:o.app.userAndRols.unidad_maof,"onUpdate:modelValue":a[5]||(a[5]=e=>o.app.userAndRols.unidad_maof=e),class:"mb-3"},null,8,["options","modelValue"]),o.v$.unidad_maof.$error?(t(!0),n(c,{key:4},p(o.v$.unidad_maof.$errors,e=>(t(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):b("",!0),i(d,{id:"email",label:"Correo electrónico",class:"mb-3",type:"email",modelValue:o.app.userAndRols.correo_electronico,"onUpdate:modelValue":a[6]||(a[6]=e=>o.app.userAndRols.correo_electronico=e)},null,8,["modelValue"]),o.v$.correo_electronico.$error?(t(!0),n(c,{key:5},p(o.v$.correo_electronico.$errors,e=>(t(),n("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):b("",!0),i(m,{label:"Guardar",onClick:o.sendForm,class:"mr-0 ml-auto"},null,8,["onClick"])])}const j=$(C,[["render",I]]);export{j as F};
