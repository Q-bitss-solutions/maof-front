import{T as k}from"./TableUsers-79f3af40.js";import{A as B}from"./ArrowBack-aef2782e.js";import{H as w}from"./HomePage-8230ec51.js";import{S as F}from"./SelectBase-90f93980.js";import{B as q}from"./ButtonBase-83ecea80.js";import{_ as C,k as E,a as u,o as f,c as h,g as s,b as a,u as j,r as D,e as V,f as y,n as A}from"./index-7813185a.js";import{T as U}from"./fetchApi-16d836d9.js";import{I}from"./InputBase-b00c7173.js";import"./sweetalert2.all-281a79b7.js";import{b as M}from"./project-b0c04a66.js";import{f as S}from"./contract-3571ae37.js";const O={name:"FormProject",props:{editMode:{type:Boolean,default:!1},project:{type:Object,default:()=>({})}},components:{InputBase:I,ButtonBase:q,SelectBase:F},setup(d,{emit:e}){const i=E({busqueda:{c_cc_cm:"",resident:"",mesEstimacion:"",anioEstimacion:"",estatusEstimacion:"",unitMAOF:"",diasInicio:"",diasFin:"",fechaInicio:"",fechaFin:""}});return d.editMode&&(i.project=d.project,console.log(d.project),i.project.fecha_inicio_proyecto=d.project.fecha_inicio_proyecto.split("-").reverse().join("-"),i.project.fecha_fin_proyecto===null?i.project.fecha_fin_proyecto="":i.project.fecha_fin_proyecto=d.project.fecha_fin_proyecto.split("-").reverse().join("-")),{app:i,sendForm:()=>e("submit",i.busqueda)}}},P={class:"max-w-4xl pb-10 grow"},T={class:"grid grid-cols-2"},N={class:"grid grid-cols-2"},R=a("p",null,"*Contrato, Convenio de Colaboración, Convenio Modificatorio",-1);function z(d,e,i,o,x,g){const r=u("select-base"),c=u("input-base"),p=u("button-base");return f(),h("div",P,[s(r,{id:"clave_cartera",label:"C, CC, CM*",class:"mb-3",modelValue:o.app.busqueda.c_cc_cm,"onUpdate:modelValue":e[0]||(e[0]=t=>o.app.busqueda.c_cc_cm=t)},null,8,["modelValue"]),s(r,{id:"nombre_proyecto",label:"Residente",class:"mb-3",modelValue:o.app.busqueda.resident,"onUpdate:modelValue":e[1]||(e[1]=t=>o.app.busqueda.resident=t)},null,8,["modelValue"]),s(r,{id:"nombre_proyecto",label:"Mes de la estimación",class:"mb-3",modelValue:o.app.busqueda.mesEstimacion,"onUpdate:modelValue":e[2]||(e[2]=t=>o.app.busqueda.mesEstimacion=t)},null,8,["modelValue"]),s(r,{id:"nombre_proyecto",label:"Año de la Estimación",class:"mb-3",modelValue:o.app.busqueda.anioEstimacion,"onUpdate:modelValue":e[3]||(e[3]=t=>o.app.busqueda.anioEstimacion=t)},null,8,["modelValue"]),s(r,{id:"nombre_proyecto",label:"Estatus de la Estimación",class:"mb-3",modelValue:o.app.busqueda.estatusEstimacion,"onUpdate:modelValue":e[4]||(e[4]=t=>o.app.busqueda.estatusEstimacion=t)},null,8,["modelValue"]),s(r,{id:"nombre_proyecto",label:"Unidad MAOF responsable",class:"mb-3",modelValue:o.app.busqueda.unitMAOF,"onUpdate:modelValue":e[5]||(e[5]=t=>o.app.busqueda.unitMAOF=t)},null,8,["modelValue"]),a("div",T,[s(c,{id:"dias_inicio",label:"Días transcurridos del",type:"number",class:"grow",modelValue:o.app.busqueda.diasInicio,"onUpdate:modelValue":e[6]||(e[6]=t=>o.app.busqueda.diasInicio=t)},null,8,["modelValue"]),s(c,{id:"dias_fin",label:"al",type:"number",class:"flex-auto",modelValue:o.app.busqueda.diasFin,"onUpdate:modelValue":e[7]||(e[7]=t=>o.app.busqueda.diasFin=t)},null,8,["modelValue"])]),a("div",N,[s(c,{id:"fecha_inicio",label:"Autorización entre",type:"date",class:"grow",modelValue:o.app.busqueda.fechaInicio,"onUpdate:modelValue":e[8]||(e[8]=t=>o.app.busqueda.fechaInicio=t)},null,8,["modelValue"]),s(c,{id:"fecha_fin",label:"y",type:"date",class:"",modelValue:o.app.busqueda.fechaFin,"onUpdate:modelValue":e[9]||(e[9]=t=>o.app.busqueda.fechaFin=t)},null,8,["modelValue"])]),s(p,{label:"Buscar",onClick:o.sendForm,class:"mr-0 ml-auto mt-5"},null,8,["onClick"]),R])}const H=C(O,[["render",z]]),G="/maof-front/assets/Filter-fb6d2bbc.png",J="/maof-front/assets/Search-94489079.png";const K={name:"UsersRolesMAOFIndex",components:{TableBase:k,ArrowBack:B,HomePage:w,ButtonBase:q,TitleBar:U,SelectBase:F,FormConsultaBusqueda:H},setup(){j();const d=[{label:"Id",field:"empleado_maof"}],e=D({filtro:{tipoDocumento:"",listFiltros:[{value:2,label:"Contrato o Convenio de Colaboración"},{value:3,label:"Convenio Modificatorio"},{value:4,label:"Esperando una acción"},{value:1,label:"Proyecto / Cartera de inversión"}],listDocsFiltrados:[],filtroDocValue:""}});let i=D(!1);const o=[],x=()=>{console.log("Se muestra el resultado ")},g=async n=>{switch(i.value===!0&&(i.value=!1),n){case"1":e.value.filtro.listDocsFiltrados=[],e.value.filtro.filtroDocValue="",r();break;case"2":e.value.filtro.listDocsFiltrados=[],e.value.filtro.filtroDocValue="",c(n);break;case"3":e.value.filtro.listDocsFiltrados=[],e.value.filtro.filtroDocValue="",c(n);break;case"4":e.value.filtro.listDocsFiltrados=[],e.value.filtro.filtroDocValue="";break;default:console.log("No se encontro nada");break}},r=async()=>{const{data:n}=await M();e.value.filtro.listDocsFiltrados=n.map(l=>({value:l.id_proyecto,label:`${l.clave_cartera}-${l.nombre_proyecto}`}))},c=async n=>{const{data:l}=await S();n==="2"&&l.forEach(m=>{m.id_tipo_contrato!==3&&(e.value.filtro.listDocsFiltrados.push({value:m.id_contrato,label:m.numero_contrato}),e.value.filtro.listDocsFiltrados.sort((b,_)=>b.label>_.label?1:b.label<_.label?-1:0))}),n==="3"&&l.forEach(m=>{m.id_tipo_contrato===3&&(e.value.filtro.listDocsFiltrados.push({value:m.id_contrato,label:m.numero_contrato}),e.value.filtro.listDocsFiltrados.sort((b,_)=>b.label>_.label?1:b.label<_.label?-1:0))})},p=()=>{e.value.filtro.tipoDocumento="",e.value.filtro.filtroDocValue="",i.value=!i.value,console.log("Se muestra la busqueda  ")};return{app:e,featureOptions:o,headers:d,showBusquedaValue:i,getStatusEstimations:x,showBusqueda:p,saveBusqueda:async n=>{console.log("Criterios de busqueda: ",n),p()},saveFiltro:n=>{console.log("Consulta con el id seleccionado: ",n)},getDocsByType:g,getProjects:r,getContracts:c}}},L={class:"px-4 mt-10"},Q={class:"flex justify-between"},W={class:"px-4"},X={class:"flex justify-center text-3xl"},Y=a("p",{class:"text-center"},"4",-1),Z=a("h1",{class:"text-center"},"Pendientes",-1),$=[Y,Z],ee=a("p",{class:"text-center"},"2",-1),oe=a("h1",{class:"text-center"},"Pagadas",-1),te=[ee,oe],ae=a("p",{class:"text-center"},"6",-1),le=a("h1",{class:"text-center"},"Total",-1),se=[ae,le],ie={class:"flex flex-col mt-20"},ne={class:"flex justify-start items-center pb-10"},re=a("img",{src:G,alt:"filter",class:"w-10 items-center"},null,-1),ce={class:"flex justify-start items-center pt-10"},de=a("img",{src:J,alt:"filter",class:"w-10 items-center"},null,-1),ue=a("h1",{class:"text-center font-bold text-lg"},"Búsqueda",-1),me={class:"flex justify-center"};function pe(d,e,i,o,x,g){const r=u("arrow-back"),c=u("home-page"),p=u("title-bar"),t=u("select-base"),v=u("button-base"),n=u("form-consulta-busqueda");return f(),h("main",L,[a("div",Q,[s(r),s(c)]),s(p,{title:"Consulta MAOF",subtitle:"Agenda de Estimaciones"}),a("section",W,[a("div",X,[a("div",{class:"px-10 text-green cursor-pointer",onClick:e[0]||(e[0]=l=>o.getStatusEstimations())},$),a("div",{class:"px-10 text-red cursor-pointer",onClick:e[1]||(e[1]=l=>o.getStatusEstimations())},te),a("div",{class:"px-10 cursor-pointer",onClick:e[2]||(e[2]=l=>o.getStatusEstimations())},se)]),a("div",ie,[a("div",ne,[re,s(t,{label:"Filtros",class:"text-center w-48 mr-10",id:"filtros",options:o.app.filtro.listFiltros,modelValue:o.app.filtro.tipoDocumento,"onUpdate:modelValue":e[3]||(e[3]=l=>o.app.filtro.tipoDocumento=l),onChange:e[4]||(e[4]=l=>o.getDocsByType(o.app.filtro.tipoDocumento))},null,8,["options","modelValue"]),o.app.filtro.listDocsFiltrados!=""&&o.app.filtro.tipoDocumento!==""?(f(),V(t,{key:0,label:"",class:"text-center w-48 ml-36",id:"filtrosDocs",options:o.app.filtro.listDocsFiltrados,modelValue:o.app.filtro.filtroDocValue,"onUpdate:modelValue":e[5]||(e[5]=l=>o.app.filtro.filtroDocValue=l)},null,8,["options","modelValue"])):y("",!0),o.app.filtro.listDocsFiltrados!=""&&o.app.filtro.tipoDocumento!==""?(f(),V(v,{key:1,label:"Aplicar",class:A(["border-gray text-black hover:bg-white hover:text-red",{"ml-[36rem]":o.app.filtro.tipoDocumento==="1"," ml-[3.7rem]":o.app.filtro.tipoDocumento!=="1"&&o.app.filtro.filtroDocValue===""," ml-[0rem]":o.app.filtro.tipoDocumento!=="1"&&o.app.filtro.filtroDocValue!==""}]),onClick:e[6]||(e[6]=l=>o.saveFiltro(o.app.filtro.filtroDocValue))},null,8,["class"])):y("",!0),o.app.filtro.tipoDocumento==="4"?(f(),V(v,{key:2,label:"Aplicar",class:"ml-40 border-gray text-black hover:bg-white hover:text-red",onClick:e[7]||(e[7]=l=>o.saveFiltro(5))})):y("",!0)]),a("div",ce,[de,ue,s(v,{label:"Criterio de búsqueda",class:"ml-5 border-gray text-black hover:bg-white hover:text-red",onClick:o.showBusqueda},null,8,["onClick"])])]),a("div",me,[o.showBusquedaValue?(f(),V(n,{key:0,onSubmit:o.saveBusqueda,class:"mt-20"},null,8,["onSubmit"])):y("",!0)])])])}const Ce=C(K,[["render",pe]]);export{Ce as default};
