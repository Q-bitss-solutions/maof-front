import{T as A}from"./TableBase-4fc1e400.js";import{f as C,d as w,a as B}from"./contract-7382ee32.js";import{A as x}from"./ArrowBack-0a1fa26c.js";import{H as y}from"./HomePage-3558943f.js";import{B as D}from"./ButtonBase-2d40ca8d.js";import{_ as I,r as u,u as k,a as r,o as b,c as p,b as e,g as i,e as E,t,f as N,T}from"./index-415b9246.js";import{T as z}from"./fetchApi-7263c64b.js";import{S as h}from"./sweetalert2.all-281a79b7.js";const O={name:"AmendingAgreementIndex",components:{TableBase:A,ArrowBack:x,HomePage:y,ButtonBase:D,TitleBar:z},setup(){const c=u(!1),l=k(),v=[{label:"Id",field:"id_contrato"},{label:"Contrato o Convenio de Colaboración",field:"clave_cartera"},{label:"Número",field:"numero_contrato"},{label:"Objeto",field:"objeto_contrato"},{label:"Monto sin IVA",field:"monto_sin_iva"},{label:"Plazo de inicio",field:"plazo_inicio"},{label:"Plazo fin",field:"plazo_fin"},{label:"Estatus",field:"estatus_contrato"}],o=u([]),d=u([]),m=async()=>{const{data:n}=await C();n.forEach(a=>{a.id_tipo_contrato===3&&(o.value.push(a),o.value.sort((s,g)=>s.label>g.label?1:s.label<g.label?-1:0))})},_=[{label:"Editar",action:n=>l.push({name:"EditAmendingAgreement",params:{amendingAgreementId:n.id_contrato}})},{label:"Inactivar",action:async n=>{h.fire({title:"Se finalizará el Convenio Modificatorio...",text:"¿Está usted seguro?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Finalizar!",reverseButtons:!0}).then(async a=>{if(a.isConfirmed)try{await w(n.id_contrato),o.value=[],await m(),h.fire("Inactivo!","El convenio modificatorio se inactivó","success")}catch(s){h.fire("Error",`${s.response.data.detail}`,"error")}})}},{label:"Detalles",action:async n=>{c.value=!0;const{data:a}=await B(n.id_contrato);d.value=a}}],f=()=>l.push({name:"NewAmendingAgreement"});return m(),{isOpen:c,amendingAgreement:o,amendingAgreementDetalles:d,featureOptions:_,headers:v,goToNewAmendingAgreement:f}}},j={class:"px-4 mt-10"},M={class:"flex justify-between"},S={class:"px-4"},V={class:"root"},F={key:0,class:"modal items-center justify-center"},P=e("h1",{class:"text-center font-semibold pb-10 pt-5"},"Detalle del Contrato",-1),H={class:"grid grid-cols-2 ml-10"},R={class:"grid grid-rows-2"},U=e("h1",{class:"font-semibold"},"Clave Cartera de Inversión",-1),q={class:"grid grid-rows-2"},G=e("h1",{class:"font-semibold"},"Nombre",-1),J={class:"grid grid-rows-2"},K=e("h1",{class:"font-semibold"},"Número de Contrato",-1),L={class:"grid grid-rows-2"},Q=e("h1",{class:"font-semibold"},"Objeto del Contrato",-1),W={class:"grid grid-cols-2"},X=e("h1",{class:"font-semibold"},"Fecha inicio",-1),Y=e("h1",{class:"font-semibold"},"fecha fin",-1),Z={class:"grid grid-rows-2"},$=e("h1",{class:"font-semibold"},"Unidad MAOF",-1),ee={class:"grid grid-cols-3 mt-10 ml-10"},oe=e("h1",{class:"font-semibold"},"Monto sin IVA",-1),te=e("h1",{class:"font-semibold"},"Estatus del Contrato",-1),ne=e("h1",{class:"font-semibold"},"¿Existen Convenios Modificatorios?",-1);function ae(c,l,v,o,d,m){const _=r("arrow-back"),f=r("home-page"),n=r("title-bar"),a=r("button-base"),s=r("table-base");return b(),p("main",j,[e("div",M,[i(_),i(f)]),i(n,{title:"Convenio Modificatorio",subtitle:"Inicio"}),e("section",S,[i(a,{label:"Nuevo Convenio Modificatorio",onClick:o.goToNewAmendingAgreement,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),i(s,{options:o.featureOptions,headers:o.headers,data:o.amendingAgreement},null,8,["options","headers","data"]),e("div",V,[(b(),E(T,{to:"body"},[o.isOpen?(b(),p("div",F,[e("div",null,[P,e("div",H,[e("div",R,[e("div",null,[U,e("p",null,t(o.amendingAgreementDetalles.numero_contrato),1)])]),e("div",q,[e("div",null,[G,e("p",null,t(o.amendingAgreementDetalles.nombre_proyecto),1)])]),e("div",J,[e("div",null,[K,e("p",null,t(o.amendingAgreementDetalles.numero_contrato),1)])]),e("div",L,[e("div",null,[Q,e("p",null,t(o.amendingAgreementDetalles.objeto_contrato),1)])]),e("div",W,[e("div",null,[X,e("p",null,t(o.amendingAgreementDetalles.plazo_inicio),1)]),e("div",null,[Y,e("p",null,t(o.amendingAgreementDetalles.plazo_fin),1)])]),e("div",Z,[e("div",null,[$,e("p",null,t(o.amendingAgreementDetalles.nombre_unidad),1)])])]),e("div",ee,[e("div",null,[oe,e("p",null," $"+t(o.amendingAgreementDetalles.monto_sin_iva),1)]),e("div",null,[te,e("p",null,t(o.amendingAgreementDetalles.estatus_contrato),1)]),e("div",null,[ne,e("p",null,t(o.amendingAgreementDetalles.objeto_contrato),1)])]),i(a,{label:"Cerrar",onClick:l[0]||(l[0]=g=>o.isOpen=!1),class:"mr-5 mx-auto my-5"})])])):N("",!0)]))])])])}const fe=I(O,[["render",ae]]);export{fe as default};
