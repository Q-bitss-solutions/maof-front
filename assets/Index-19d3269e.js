import{T as R,D as v}from"./DetailEstimate-3565ec35.js";import{T as g}from"./TableBase-c7359489.js";import{f as C,a as I,b as A}from"./residentEstimate-74e9ae78.js";import{B as T}from"./fetchApi-310f3a8f.js";import{T as N}from"./ToggleSwtich-2a099ee4.js";import{_ as B,a as w,u as y,r as m,b as i,o as E,c as D,e as r,d as h,g as x,h as H}from"./index-4f9f8ac2.js";import{T as O}from"./TitleBar-474b18e0.js";import{C as V}from"./CustomHeaderApp-eca25b67.js";import"./contract-24952fae.js";import"./PDF-a4bdfbbc.js";import"./ArrowBack-73665793.js";import"./HomePage-c475aeba.js";import"./LogoutComponent-82eaf1e5.js";const k={name:"ResidentEstimateIndex",components:{TableroEstimacionResidente:R,CustomHeaderApp:V,ButtonBase:T,TitleBar:O,TableBase:g,ToggleSwitch:N,DetailEstimate:v},setup(){const b=w(),{rol:s}=b.getAuthData,n=y(),t=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],d=m([]);m();const _=m([]);let a=!1,l=m(!1);const c=async()=>{const{data:e}=await C();d.value=e},f=[{label:"Detalles",disabled:!1,action:async e=>{l.value=!l.value;const{data:o}=await I(e.id_estimacion);o.fecha_recepcion_info_contratista=o.fecha_recepcion_info_contratista.split(" ")[0],o.fecha_periodo_inicio_estimacion=o.fecha_periodo_inicio_estimacion.split(" ")[0],o.fecha_periodo_fin_estimacion=o.fecha_periodo_fin_estimacion.split(" ")[0],_.value=o}},{label:"Nuevo",disabled:s!="Residente",action:e=>{n.push({name:"NewResidentEstimateById",params:{residentEstimateId:e.contrato_estimacion}})}},{label:"Archivo",disabled:!1,action:async e=>{n.push({name:"FilesResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}},{label:"Histórico",disabled:!1,action:async e=>{n.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}}],p=()=>n.push({name:"NewResidentEstimate"}),u=async()=>{if(a=!a,a===!0){const{data:e}=await A(9);d.value=e}a===!1&&c()};return c(),{residentEstimate:d,featureOptions:f,headers:t,goToNewResidentEstimate:p,getResidentEstimate:c,processo:u,procesoVariable:a,detalleEstimacionData:_,detalleEstimacion:l,rol:s}}},S={class:"px-4 mt-10"},j={class:"px-4"},P={class:"flex justify-end"};function F(b,s,n,t,d,_){const a=i("CustomHeaderApp"),l=i("title-bar"),c=i("detail-estimate"),f=i("button-base"),p=i("toggle-switch"),u=i("tablero-estimacion-residente");return E(),D("main",S,[r(a),r(l,{title:"Estimación Residente",subtitle:"Inicio"}),h("section",j,[h("div",P,[r(c,{data:t.detalleEstimacionData,isOpen:t.detalleEstimacion,onSubmit:s[0]||(s[0]=e=>t.detalleEstimacion=!1)},null,8,["data","isOpen"]),t.rol=="Residente"?(E(),x(f,{key:0,label:"Nueva Estimación Residente",onClick:t.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"])):H("",!0),r(p,{label:"En Proceso",onChange:t.processo,class:"mb-3 mr-0 ml-10",placeholder:"En Proceso"},null,8,["onChange"])]),r(u,{options:t.featureOptions,headers:t.headers,data:t.residentEstimate},null,8,["options","headers","data"])])])}const $=B(k,[["render",F]]);export{$ as default};
