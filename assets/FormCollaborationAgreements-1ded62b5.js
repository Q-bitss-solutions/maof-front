import{I as b}from"./InputBase-4a1233f1.js";import{T as u}from"./TextAreaBase-9719b6e6.js";import{a as f,B as A}from"./fetchApi-346063d6.js";import{S as g}from"./SelectBase-252afb0a.js";import{f as V}from"./reviewArea-e23935a1.js";import{f as v}from"./contractor-4573d397.js";import{b as y}from"./project-8c12cb53.js";import{_ as C,m as z,b as c,o as x,c as U,e as l}from"./index-3d023741.js";const B=()=>f({url:"/cat-tipo-contrato/",method:"GET"});const T={name:"FormCollaborationAgreements",props:{editMode:{type:Boolean,default:!1},collaborationAgreements:{type:Object,default:()=>({})}},components:{InputBase:b,ButtonBase:A,SelectBase:g,TextAreaBase:u},setup(m,{emit:e}){const n=z({collaborationAgreements:{numero_contrato:"",id_proyecto:"",id_contratista:"",id_area_revisora:"",id_tipo_contrato:"",monto_sin_iva:"",plazo_inicio:"",plazo_fin:"",objeto_contrato:""},idAreaRevisora:"",listReviewAreas:[],listProyects:[],listContratista:[],listTypeContracts:[]});m.editMode&&(n.collaborationAgreements=m.collaborationAgreements,delete m.collaborationAgreements.id_contrato_padre,n.collaborationAgreements.plazo_inicio=m.collaborationAgreements.plazo_inicio.split("/").reverse().join("-"),n.collaborationAgreements.plazo_fin=m.collaborationAgreements.plazo_fin.split("/").reverse().join("-"));const o=()=>e("submit",n.collaborationAgreements),d=async()=>{const{data:i}=await y();n.listProyects=i.map(t=>({value:t.id_proyecto,label:`${t.clave_cartera} - ${t.nombre_proyecto}`}))},p=async()=>{const{data:i}=await V();n.listReviewAreas=i.map(t=>({value:t.id,label:`${t.id_unidad_maof} - ${t.nombre_unidad}`,id_unit_maof:t.id_unidad_maof})),n.listReviewAreas.sort((t,a)=>t.id_unit_maof>a.id_unit_maof?1:t.id_unit_maof<a.id_unit_maof?-1:0)},r=async()=>{const{data:i}=await v();i.forEach(t=>{t.estatus_contratista==="Activo"&&(n.listContratista.push({value:t.id_contratista,label:t.nombre_contratista}),n.listContratista.sort((a,_)=>a.nombre_contratista>_.nombre_contratista?1:a.nombre_contratista<_.nombre_contratista?-1:0))})},s=async()=>{const{data:i}=await B();i.forEach(t=>{t.tipo_contrato_nombre!=="Convenio Modificatorio"&&n.listTypeContracts.push({value:t.tipo_contrato,label:`${t.tipo_contrato} - ${t.tipo_contrato_nombre}`})})};return p(),r(),s(),d(),{app:n,sendForm:o,getReviewAreas:p,getContratistas:r,getTypeContracts:s,getProjects:d}}},j={class:"max-w-xl mx-auto"};function w(m,e,n,o,d,p){const r=c("select-base"),s=c("input-base"),i=c("text-area-base"),t=c("button-base");return x(),U("div",j,[l(r,{id:"tipo_contrato",label:"Tipo",options:o.app.listTypeContracts,class:"mb-3",modelValue:o.app.collaborationAgreements.id_tipo_contrato,"onUpdate:modelValue":e[0]||(e[0]=a=>o.app.collaborationAgreements.id_tipo_contrato=a)},null,8,["options","modelValue"]),l(r,{id:"proyecto",label:"Número de proyecto (Cartera de Inversión)",options:o.app.listProyects,class:"mb-3",modelValue:o.app.collaborationAgreements.id_proyecto,"onUpdate:modelValue":e[1]||(e[1]=a=>o.app.collaborationAgreements.id_proyecto=a)},null,8,["options","modelValue"]),l(r,{id:"Contratista",label:"Contratista",options:o.app.listContratista,class:"mb-3",modelValue:o.app.collaborationAgreements.id_contratista,"onUpdate:modelValue":e[2]||(e[2]=a=>o.app.collaborationAgreements.id_contratista=a)},null,8,["options","modelValue"]),l(r,{id:"empleado_maof",label:"Unidad MAOF",options:o.app.listReviewAreas,class:"mb-3",modelValue:o.app.collaborationAgreements.id_area_revisora,"onUpdate:modelValue":e[3]||(e[3]=a=>o.app.collaborationAgreements.id_area_revisora=a)},null,8,["options","modelValue"]),l(s,{id:"numero_Contrato",label:"Número de Contrato o Convenio de Colaboración",type:"text",class:"mb-3",modelValue:o.app.collaborationAgreements.numero_contrato,"onUpdate:modelValue":e[4]||(e[4]=a=>o.app.collaborationAgreements.numero_contrato=a)},null,8,["modelValue"]),l(i,{id:"objeto",label:"Objeto",class:"mb-3",modelValue:o.app.collaborationAgreements.objeto_contrato,"onUpdate:modelValue":e[5]||(e[5]=a=>o.app.collaborationAgreements.objeto_contrato=a)},null,8,["modelValue"]),l(s,{id:"monto",label:"Monto sin IVA",type:"number",class:"mb-3",modelValue:o.app.collaborationAgreements.monto_sin_iva,"onUpdate:modelValue":e[6]||(e[6]=a=>o.app.collaborationAgreements.monto_sin_iva=a)},null,8,["modelValue"]),l(s,{id:"plazo_inicio",label:"Plazo (inicio)",type:"date",class:"mb-3",modelValue:o.app.collaborationAgreements.plazo_inicio,"onUpdate:modelValue":e[7]||(e[7]=a=>o.app.collaborationAgreements.plazo_inicio=a)},null,8,["modelValue"]),l(s,{id:"plazo_fin",label:"Plazo (fin)",type:"date",class:"mb-3",modelValue:o.app.collaborationAgreements.plazo_fin,"onUpdate:modelValue":e[8]||(e[8]=a=>o.app.collaborationAgreements.plazo_fin=a)},null,8,["modelValue"]),l(t,{label:"Guardar",onClick:o.sendForm,class:"mr-0 ml-auto"},null,8,["onClick"])])}const O=C(T,[["render",w]]);export{O as F};
