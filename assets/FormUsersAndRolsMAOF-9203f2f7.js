import{I as V}from"./InputBase-c6044481.js";import{B as y}from"./ButtonBase-b7e739f1.js";import{S as F}from"./SelectBase-f2133477.js";import{b as g}from"./SICTUnits-61058dc4.js";import{f as x}from"./fetchApi-3cb91e59.js";import{u as k,c as i,r as b,e as U}from"./index-390a9a59.js";import{S as O}from"./sweetalert2.all-281a79b7.js";import{_ as q,k as w,q as $,a as v,o,c as r,g as t,F as u,d as c,t as p,f}from"./index-be88d765.js";const B=()=>x({url:"/roles/",method:"GET"}),E={name:"FormUnitMAOF",props:{editMode:{type:Boolean,default:!1},userAndRols:{type:Object,default:()=>({})}},components:{InputBase:V,ButtonBase:y,SelectBase:F},setup(n,{emit:s}){const l=w({userAndRols:{email:"",first_name:"",last_name:"",rol:"",unidad_maof:""},maternal_surname:"",listUnitsMAOF:[],listRolesMAOF:[]});n.editMode&&(l.userAndRols=n.userAndRols,l.maternal_surname=n.userAndRols.last_name.split(" ")[1],l.userAndRols.last_name=n.userAndRols.last_name.split(" ")[0],l.userAndRols.rol=n.userAndRols.rol_id,l.userAndRols.unidad_maof=n.userAndRols.unidad_maof_id,console.log("app: ",l.userAndRols));const a=$(()=>({email:{required:i.withMessage("El email es requerido",b),email:i.withMessage("No es un correo valido",U)},first_name:{required:i.withMessage("El nombre es requerido",b)},last_name:{required:i.withMessage("El apellido es requerido",b)},rol:{required:i.withMessage("El rol es requerido",b)},unidad_maof:{required:i.withMessage("La unidad es requerido",b)}})),R=k(a,l.userAndRols),M=async()=>{const{data:m}=await g();l.listUnitsMAOF=m.map(e=>({value:e.id_unidad_maof,label:e.unidad})),l.listUnitsMAOF.sort((e,_)=>e.label>_.label?1:e.label<_.label?-1:0)},d=async()=>{const{data:m}=await B();l.listRolesMAOF=m.map(e=>({value:e.id,label:e.nombre_rol})),l.listRolesMAOF.sort((e,_)=>e.label>_.label?1:e.label<_.label?-1:0)},A=async()=>{await R.value.$validate()?(l.userAndRols.last_name=l.userAndRols.last_name+" "+l.maternal_surname,s("submit",l.userAndRols)):O.fire("Error","Revisa bien los datos","error")};return M(),d(),{app:l,sendForm:A,v$:R}}},C={class:"max-w-xl mx-auto"};function S(n,s,l,a,R,M){const d=v("input-base"),A=v("select-base"),m=v("button-base");return o(),r("div",C,[t(d,{id:"aPaterno",label:"Apellido paterno",class:"mb-3",modelValue:a.app.userAndRols.last_name,"onUpdate:modelValue":s[0]||(s[0]=e=>a.app.userAndRols.last_name=e)},null,8,["modelValue"]),a.v$.last_name.$error?(o(!0),r(u,{key:0},c(a.v$.last_name.$errors,e=>(o(),r("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(d,{id:"aMaterno",label:"Apellido materno",class:"mb-3",modelValue:a.app.maternal_surname,"onUpdate:modelValue":s[1]||(s[1]=e=>a.app.maternal_surname=e)},null,8,["modelValue"]),a.v$.last_name.$error?(o(!0),r(u,{key:1},c(a.v$.last_name.$errors,e=>(o(),r("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(d,{id:"nombre",label:"Nombres(s)",class:"mb-3",modelValue:a.app.userAndRols.first_name,"onUpdate:modelValue":s[2]||(s[2]=e=>a.app.userAndRols.first_name=e)},null,8,["modelValue"]),a.v$.first_name.$error?(o(!0),r(u,{key:2},c(a.v$.first_name.$errors,e=>(o(),r("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(A,{id:"id_unidad_maof",label:"Unidad MAOF",options:a.app.listUnitsMAOF,modelValue:a.app.userAndRols.unidad_maof,"onUpdate:modelValue":s[3]||(s[3]=e=>a.app.userAndRols.unidad_maof=e),class:"mb-3"},null,8,["options","modelValue"]),a.v$.unidad_maof.$error?(o(!0),r(u,{key:3},c(a.v$.unidad_maof.$errors,e=>(o(),r("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(A,{id:"id_rol_maof",label:"Rol en el sistema",options:a.app.listRolesMAOF,class:"mb-3",modelValue:a.app.userAndRols.rol,"onUpdate:modelValue":s[4]||(s[4]=e=>a.app.userAndRols.rol=e)},null,8,["options","modelValue"]),a.v$.rol.$error?(o(!0),r(u,{key:4},c(a.v$.rol.$errors,e=>(o(),r("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(d,{id:"email",label:"Correo electrÃ³nico",class:"mb-3",type:"email",modelValue:a.app.userAndRols.email,"onUpdate:modelValue":s[5]||(s[5]=e=>a.app.userAndRols.email=e)},null,8,["modelValue"]),a.v$.email.$error?(o(!0),r(u,{key:5},c(a.v$.email.$errors,e=>(o(),r("span",{key:e,class:"text-red font-semibold text-center ml-80"},p(e.$message),1))),128)):f("",!0),t(m,{label:"Guardar",onClick:a.sendForm,class:"mr-0 ml-auto"},null,8,["onClick"])])}const h=q(E,[["render",S]]);export{h as F};
