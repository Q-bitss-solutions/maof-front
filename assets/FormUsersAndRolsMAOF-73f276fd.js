import{I as g}from"./InputBase-6c0b0bec.js";import{B as V}from"./ButtonBase-47fb9ccf.js";import{S as y}from"./SelectBase-f1ad2f81.js";import{f as F}from"./SICTUnits-a83474d2.js";import{f as x}from"./fetchApi-8b9134ef.js";import{g as k}from"./ArrowBack-5369885d.js";import{u as U,c as t,r as u,e as q}from"./index-fc4be8d4.js";import{S as O}from"./sweetalert2.all-281a79b7.js";import{_ as w,l as $,s as B,a as v,o as l,c as a,g as d,F as c,d as p,t as f,f as _}from"./index-733385a3.js";const E=k(),C=n=>x({...n,headers:E}),S=()=>C({url:"/cat_rol_maof/",method:"GET"}),h={name:"FormUnitMAOF",props:{editMode:{type:Boolean,default:!1},userAndRols:{type:Object,default:()=>({})}},components:{InputBase:g,ButtonBase:V,SelectBase:y},setup(n,{emit:r}){const s=$({userAndRols:{correo_electronico:"",nombre:"",apellido_materno:"",apellido_paterno:"",rol_maof:"",unidad_maof:""},listUnitsMAOF:[],listRolesMAOF:[]});n.editMode&&(s.userAndRols=n.userAndRols,s.userAndRols.rol_maof=n.userAndRols.rol_maof_id,s.userAndRols.unidad_maof=n.userAndRols.unidad_maof_id,console.log("app: ",s.userAndRols));const o=B(()=>({correo_electronico:{required:t.withMessage("El email es requerido",u),correo_electronico:t.withMessage("No es un correo valido",q)},nombre:{required:t.withMessage("El nombre es requerido",u)},apellido_paterno:{required:t.withMessage("El apellido paterno es requerido",u)},apellido_materno:{required:t.withMessage("El apellido materno es requerido",u)},rol_maof:{required:t.withMessage("El rol es requerido",u)},unidad_maof:{required:t.withMessage("La unidad es requerido",u)}})),R=U(o,s.userAndRols),M=async()=>{const{data:m}=await F();s.listUnitsMAOF=m.map(e=>({value:e.id_unidad_maof,label:e.unidad})),s.listUnitsMAOF.sort((e,b)=>e.label>b.label?1:e.label<b.label?-1:0)},i=async()=>{const{data:m}=await S();s.listRolesMAOF=m.map(e=>({value:e.rol_maof,label:e.nombre_rol_maof})),s.listRolesMAOF.sort((e,b)=>e.label>b.label?1:e.label<b.label?-1:0)},A=async()=>{await R.value.$validate()?r("submit",s.userAndRols):O.fire("Error","Revisa bien los datos","error")};return M(),i(),{app:s,sendForm:A,v$:R}}},N={class:"max-w-xl mx-auto"};function I(n,r,s,o,R,M){const i=v("input-base"),A=v("select-base"),m=v("button-base");return l(),a("div",N,[d(i,{id:"aPaterno",label:"Apellido Paterno",class:"mb-3",modelValue:o.app.userAndRols.apellido_paterno,"onUpdate:modelValue":r[0]||(r[0]=e=>o.app.userAndRols.apellido_paterno=e)},null,8,["modelValue"]),o.v$.apellido_paterno.$error?(l(!0),a(c,{key:0},p(o.v$.apellido_paterno.$errors,e=>(l(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):_("",!0),d(i,{id:"aMaterno",label:"Apellido Materno",class:"mb-3",modelValue:o.app.userAndRols.apellido_materno,"onUpdate:modelValue":r[1]||(r[1]=e=>o.app.userAndRols.apellido_materno=e)},null,8,["modelValue"]),o.v$.apellido_materno.$error?(l(!0),a(c,{key:1},p(o.v$.apellido_materno.$errors,e=>(l(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):_("",!0),d(i,{id:"nombre",label:"Nombre(s)",class:"mb-3",modelValue:o.app.userAndRols.nombre,"onUpdate:modelValue":r[2]||(r[2]=e=>o.app.userAndRols.nombre=e)},null,8,["modelValue"]),o.v$.nombre.$error?(l(!0),a(c,{key:2},p(o.v$.nombre.$errors,e=>(l(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):_("",!0),d(A,{id:"id_unidad_maof",label:"Unidad MAOF",options:o.app.listUnitsMAOF,modelValue:o.app.userAndRols.unidad_maof,"onUpdate:modelValue":r[3]||(r[3]=e=>o.app.userAndRols.unidad_maof=e),class:"mb-3"},null,8,["options","modelValue"]),o.v$.unidad_maof.$error?(l(!0),a(c,{key:3},p(o.v$.unidad_maof.$errors,e=>(l(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):_("",!0),d(A,{id:"id_rol_maof",label:"Rol en el sistema",options:o.app.listRolesMAOF,class:"mb-3",modelValue:o.app.userAndRols.rol_maof,"onUpdate:modelValue":r[4]||(r[4]=e=>o.app.userAndRols.rol_maof=e)},null,8,["options","modelValue"]),o.v$.rol_maof.$error?(l(!0),a(c,{key:4},p(o.v$.rol_maof.$errors,e=>(l(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):_("",!0),d(i,{id:"email",label:"Correo electrÃ³nico",class:"mb-3",type:"email",modelValue:o.app.userAndRols.correo_electronico,"onUpdate:modelValue":r[5]||(r[5]=e=>o.app.userAndRols.correo_electronico=e)},null,8,["modelValue"]),o.v$.correo_electronico.$error?(l(!0),a(c,{key:5},p(o.v$.correo_electronico.$errors,e=>(l(),a("span",{key:e,class:"text-red font-semibold text-center ml-80"},f(e.$message),1))),128)):_("",!0),d(m,{label:"Guardar",onClick:o.sendForm,class:"mr-0 ml-auto"},null,8,["onClick"])])}const K=w(h,[["render",I]]);export{K as F};
