import{F as E}from"./FormResidentEstimateSemaforoById-b1b33133.js";import{A as k}from"./ArrowBack-7a435b28.js";import{T as w}from"./TitleBar-e5c8df83.js";import{_ as g,o as a,c as i,d as e,t as s,F as p,f as h,n as j,h as v,j as I,a as H,q as B,u as A,m as R,b as f,e as b,p as C,k as S}from"./index-c1f09a3a.js";import{a as F,j as N}from"./residentEstimate-710d6c6b.js";import{S as z}from"./sweetalert2.all-281a79b7.js";import{L as T}from"./LogoutComponent-b10e70fb.js";import{H as L}from"./HomePage-aa58e36f.js";import"./InputBase-88596ea4.js";import"./fetchApi-b849a3bc.js";import"./SelectBase-e20657df.js";import"./TextAreaBase-f6450077.js";import"./index-28017459.js";const V={name:"TableBase",props:{description:{type:String,required:!1,default:""},headers:{type:Array,default:()=>[{label:"Example Header",field:"example"}]},data:{type:Array,default:()=>[{example:"value 1"}]},options:{type:Array,default:[]}},setup(){return{dots:[1,2,3],openActions:c=>{document.getElementById(c).classList.toggle("hidden")}}}},D={class:"border border-solid border-black border-collapse text-gray-900 w-full"},q={class:"text-white"},M={key:0},O={key:0,class:"p-2 border border-solid border-gray-100 relative"},P={class:"flex justify-center"},G=["onClick"],J=["id","onMouseleave"],K={class:"flex flex-col"},Q=["onClick"];function U(_,x,c,t,r,u){return a(),i("table",D,[e("caption",q,s(c.description),1),e("tr",null,[(a(!0),i(p,null,h(c.headers,(m,d)=>(a(),i("th",{key:d,class:"p-2 border border-b-2 border-solid border-black"},s(m.label),1))),128))]),(a(!0),i(p,null,h(c.data,(m,d)=>(a(),i("tr",{id:"rows",class:j(["",{" bg-gray-100":d%2===0}]),key:d},[(a(!0),i(p,null,h(c.headers,(l,o)=>(a(),i("td",{key:o,class:"p-2 border border-solid border-black"},[l.label==="#"?(a(),i("p",M,s(d+1),1)):v("",!0),I(" "+s(m[l.field]),1)]))),128)),c.options.length?(a(),i("td",O,[e("div",P,[e("div",{class:"p-1 cursor-pointer",onClick:l=>t.openActions(`table-actions-${d}`)},[(a(!0),i(p,null,h(t.dots,(l,o)=>(a(),i("span",{key:o,class:"rounded-full h-1 w-1 block bg-blue mb-1"}))),128))],8,G)]),_.option!==null?(a(),i("div",{key:0,class:"hidden absolute right-4 top-8 bg-white z-10",style:{"box-shadow":"-3px 3px 6px #00000029"},id:`table-actions-${d}`,onMouseleave:l=>t.openActions(`table-actions-${d}`)},[e("div",K,[(a(!0),i(p,null,h(c.options,(l,o)=>(a(),i("div",{key:o,class:"h-8 flex justify-center items-center py-2 px-8"},[e("p",{class:"text-xs border-b border-solid border-gray-100 cursor-pointer hover:border-gray hover:font-medium",onClick:y=>l.action(m)},s(l.label),9,Q)]))),128))])],40,J)):v("",!0)])):v("",!0)],2))),128))])}const W=g(V,[["render",U]]);const X={name:"Historico",components:{FormResidentEstimate:E,ArrowBack:k,TitleBar:w,LogoutComponent:T,HomePage:L,TableBaseIndex:W},setup(){const _=H(),{rol:x}=_.getAuthData,c=B(),t=A(),r=R({residentEstimate:{},residentEstimateHistory:[],fecha_recepcion_info_contratista:"",fecha_periodo_inicio_estimacion:"",fecha_periodo_fin_estimacion:"",loading:!0}),u=[{label:"#",field:""},{label:"Fecha",field:"fecha_historial_estimacion"},{label:"Estatus",field:"estatus_historial_estimacion"},{label:"Observaciones",field:"observaciones_residente"}],m=async()=>{r.loading=!0;const{data:o}=await F(c.params.residentEstimateId);r.residentEstimate=o,r.fecha_recepcion_info_contratista=o.fecha_recepcion_info_contratista.split(" ")[0],r.fecha_periodo_inicio_estimacion=o.fecha_periodo_inicio_estimacion.split(" ")[0],r.fecha_periodo_fin_estimacion=o.fecha_periodo_fin_estimacion.split(" ")[0],r.loading=!1},d=async()=>{r.loading=!0;const{data:o}=await N(c.params.residentEstimateId);r.residentEstimateHistory=o,r.loading=!1},l=async o=>{await updateResident(o),z.fire("¡Éxito!","!Estimación residente actualizado con éxito!","success"),t.push({name:"Resident"})};return m(),d(),{app:r,headers:u,rol:x,saveResident:l}}},n=_=>(C("data-v-a0606b2b"),_=_(),S(),_),Y={class:"px-4 mt-10"},Z={class:"flex justify-between"},$={class:"flex justify-center items-center"},ee={class:"text-black font-semibold mr-4 items-center content-center"},te={class:"mb-10"},se={class:"flex items-center"},oe=n(()=>e("p",{class:"font-semibold text-center"},"Número de contrato (de origen)",-1)),ae={class:"text-sm text-center ml-2"},ie=n(()=>e("p",{class:"font-semibold text-center ml-80 text-red"},"Número de la Estimación",-1)),ne={class:"text-xl font-semibold text-red text-center ml-2"},ce=n(()=>e("p",{class:"font-semibold text-center ml-10 text-red"},"Días transcurridos",-1)),re={class:"text-sm font-semibold text-red text-center ml-4"},de={class:"flex items-center"},le=n(()=>e("p",{class:"font-semibold text-center"},"Objeto del contrato",-1)),_e={class:"text-sm text-center ml-4"},me={class:"flex items-center"},pe=n(()=>e("p",{class:"font-semibold text-center"},"Fecha de recepción",-1)),he={class:"text-sm text-center ml-2"},fe=n(()=>e("p",{class:"font-semibold text-center ml-2 text-red"},"Fecha de autorización",-1)),be={class:"text-sm text-center ml-2 text-red"},xe=n(()=>e("p",{class:"font-semibold text-center ml-2"},"Periodo de la Estimación",-1)),ue={class:"text-sm text-center ml-2"},ve=n(()=>e("p",{class:"font-semibold text-center ml-2"},"al",-1)),ye={class:"text-sm text-center ml-2"},ge={class:"flex items-center"},Ee=n(()=>e("p",{class:"font-semibold text-center"},"Importe de la obra ejecutada",-1)),ke={class:"text-sm text-center ml-2"},we=n(()=>e("p",{class:"font-semibold text-center ml-2"},"Importe a pagar",-1)),je={class:"text-sm text-center ml-2"},Ie={class:"flex items-center"},He=n(()=>e("p",{class:"font-semibold text-center"},"% de avance físico",-1)),Be={class:"text-sm text-center ml-2"},Ae=n(()=>e("p",{class:"font-semibold text-center ml-2"},"% de avance financiero",-1)),Re={class:"text-sm text-center ml-2"},Ce=n(()=>e("p",{class:"font-semibold text-center ml-2"},"% de grado de avance",-1)),Se={class:"text-sm text-center ml-2"},Fe=n(()=>e("p",{class:"font-semibold text-center ml-2"},"% de avance de la Estimación",-1)),Ne={class:"text-sm text-center ml-2"},ze=n(()=>e("p",{class:"font-semibold text-center ml-2"},"% de avance de la Estimación acumulado",-1)),Te={class:"text-sm text-center ml-2"};function Le(_,x,c,t,r,u){const m=f("arrow-back"),d=f("home-page"),l=f("logout-component"),o=f("title-bar"),y=f("table-base-index");return a(),i("main",Y,[e("div",Z,[b(m),e("div",$,[e("p",ee,s(t.rol),1),b(d),b(l)])]),b(o,{title:"Estimación Residente",subtitle:"Histórico"}),e("div",te,[e("div",se,[oe,e("p",ae,s(t.app.residentEstimate.numero_contrato),1),ie,e("p",ne,s(t.app.residentEstimate.num_consecutivo_estimacion),1),ce,e("p",re,s(t.app.residentEstimate.dias_transcurridos),1)]),e("div",de,[le,e("p",_e,s(t.app.residentEstimate.objeto_contrato),1)]),e("div",me,[pe,e("p",he,s(t.app.fecha_recepcion_info_contratista),1),fe,e("p",be,s(t.app.residentEstimate.fecha_autorizacion_contratista),1),xe,e("p",ue,s(t.app.fecha_periodo_inicio_estimacion),1),ve,e("p",ye,s(t.app.fecha_periodo_fin_estimacion),1)]),e("div",ge,[Ee,e("p",ke,s(t.app.residentEstimate.frt_importe_obra_ejecutada),1),we,e("p",je,s(t.app.residentEstimate.frt_importe_pagar),1)]),e("div",Ie,[He,e("p",Be,s(t.app.residentEstimate.porcentaje_avance_fisico)+"%",1),Ae,e("p",Re,s(t.app.residentEstimate.porcensaje_avance_financiero)+"%",1),Ce,e("p",Se,s(t.app.residentEstimate.grado_avance_obra)+"%",1),Fe,e("p",Ne,s(t.app.residentEstimate.porcentaje_avance_estimacion)+"%",1),ze,e("p",Te,s(t.app.residentEstimate.porcentaje_avance_estimacion_acumulado)+"%",1)])]),b(y,{class:"mb-10",description:"Histórico",headers:t.headers,data:t.app.residentEstimateHistory,option:[]},null,8,["headers","data"])])}const Ye=g(X,[["render",Le],["__scopeId","data-v-a0606b2b"]]);export{Ye as default};
