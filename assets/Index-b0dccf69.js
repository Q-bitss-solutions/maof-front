import{T as j}from"./TableUsers-bae093d6.js";import{A as q}from"./ArrowBack-bddd7b88.js";import{H as E}from"./HomePage-fb0c3503.js";import{S as k}from"./SelectBase-79a58bd4.js";import{B}from"./ButtonBase-c666209a.js";import{_ as V,k as S,a as d,o as f,c as w,g as l,b as t,u as A,r as g,e as v,f as h,n as M,i as C,t as F}from"./index-1363e84a.js";import{T}from"./fetchApi-3ae1ed23.js";import{I}from"./InputBase-5469dbcd.js";import"./sweetalert2.all-281a79b7.js";import{b as P}from"./project-46b7e22f.js";import{f as N}from"./contract-cefd4b8c.js";const O={name:"FormProject",props:{editMode:{type:Boolean,default:!1},project:{type:Object,default:()=>({})}},components:{InputBase:I,ButtonBase:B,SelectBase:k},setup(c,{emit:o}){const a=S({project:{clave_cartera:"",nombre_proyecto:"",monto_total_inversion:"",fecha_inicio_proyecto:"",fecha_fin_proyecto:""}});return c.editMode&&(a.project=c.project,console.log(c.project),a.project.fecha_inicio_proyecto=c.project.fecha_inicio_proyecto.split("-").reverse().join("-"),a.project.fecha_fin_proyecto===null?a.project.fecha_fin_proyecto="":a.project.fecha_fin_proyecto=c.project.fecha_fin_proyecto.split("-").reverse().join("-")),{app:a,sendForm:()=>o("submit",a.project)}}},U={class:"max-w-4xl pb-10 grow"},R={class:"grid grid-cols-2"},z={class:"grid grid-cols-2"};function H(c,o,a,e,y,x){const i=d("select-base"),n=d("input-base"),m=d("button-base");return f(),w("div",U,[l(i,{id:"clave_cartera",label:"C, CC, CM*",class:"mb-3"}),l(i,{id:"nombre_proyecto",label:"Residente",class:"mb-3"}),l(i,{id:"nombre_proyecto",label:"Mes de la estimación",class:"mb-3"}),l(i,{id:"nombre_proyecto",label:"Año de la Estimación",class:"mb-3"}),l(i,{id:"nombre_proyecto",label:"Estatus de la Estimación",class:"mb-3"}),l(i,{id:"nombre_proyecto",label:"Unidad MAOF responsable",class:"mb-3"}),t("div",R,[l(n,{id:"dias_inicio",label:"Días transcurridos del",type:"number",class:"grow"}),l(n,{id:"dias_fin",label:"al",type:"number",class:"flex-auto"})]),t("div",z,[l(n,{id:"fecha_inicio",label:"Autorización entre",type:"date",class:"grow"}),l(n,{id:"fecha_fin",label:"y",type:"date",class:""})]),l(m,{label:"Buscar",onClick:e.sendForm,class:"mr-0 ml-auto mt-5"},null,8,["onClick"])])}const G=V(O,[["render",H]]),J="/maof-front/assets/Filter-fb6d2bbc.png",K="/maof-front/assets/Search-94489079.png";const L={name:"UsersRolesMAOFIndex",components:{TableBase:j,ArrowBack:q,HomePage:E,ButtonBase:B,TitleBar:T,SelectBase:k,FormConsultaBusqueda:G},setup(){A();const c=[{label:"Id",field:"empleado_maof"}],o=g({filtro:{tipoDocumento:"",listFiltros:[{value:2,label:"Contrato o Convenio de Colaboración"},{value:3,label:"Convenio Modificatorio"},{value:4,label:"Esperando una acción"},{value:1,label:"Proyecto / Cartera de inversión"}],listDocsFiltrados:[],filtroDocValue:""}});let a=g(!1);const e=[],y=()=>{console.log("Se muestra el resultado ")},x=async r=>{switch(a.value===!0&&(a.value=!1),r){case"1":o.value.filtro.listDocsFiltrados=[],o.value.filtro.filtroDocValue="",i();break;case"2":o.value.filtro.listDocsFiltrados=[],o.value.filtro.filtroDocValue="",n(r);break;case"3":o.value.filtro.listDocsFiltrados=[],o.value.filtro.filtroDocValue="",n(r);break;case"4":o.value.filtro.listDocsFiltrados=[],o.value.filtro.filtroDocValue="";break;default:console.log("No se encontro nada");break}},i=async()=>{const{data:r}=await P();o.value.filtro.listDocsFiltrados=r.map(s=>({value:s.id_proyecto,label:`${s.clave_cartera}-${s.nombre_proyecto}`}))},n=async r=>{const{data:s}=await N();r==="2"&&s.forEach(u=>{u.id_tipo_contrato!==3&&(o.value.filtro.listDocsFiltrados.push({value:u.id_contrato,label:u.numero_contrato}),o.value.filtro.listDocsFiltrados.sort((p,_)=>p.label>_.label?1:p.label<_.label?-1:0))}),r==="3"&&s.forEach(u=>{u.id_tipo_contrato===3&&(o.value.filtro.listDocsFiltrados.push({value:u.id_contrato,label:u.numero_contrato}),o.value.filtro.listDocsFiltrados.sort((p,_)=>p.label>_.label?1:p.label<_.label?-1:0))})};return{app:o,featureOptions:e,headers:c,showBusquedaValue:a,getStatusEstimations:y,showBusqueda:()=>{o.value.filtro.tipoDocumento="",o.value.filtro.filtroDocValue="",a.value=!a.value,console.log("Se muestra el la busqueda  ")},saveBusqueda:async r=>{console.log("Criterios de busqueda: ",r)},saveFiltro:r=>{console.log("Consulta con el id seleccionado: ",r)},getDocsByType:x,getProjects:i,getContracts:n}}},Q={class:"px-4 mt-10"},W={class:"flex justify-between"},X={class:"px-4"},Y={class:"flex justify-center text-3xl"},Z=t("p",{class:"text-center"},"4",-1),$=t("h1",{class:"text-center"},"Pendientes",-1),oo=[Z,$],eo=t("p",{class:"text-center"},"2",-1),to=t("h1",{class:"text-center"},"Pagadas",-1),so=[eo,to],lo=t("p",{class:"text-center"},"6",-1),ao=t("h1",{class:"text-center"},"Total",-1),ro=[lo,ao],io={class:"flex flex-col mt-20"},no={class:"flex justify-start items-center pb-10"},co=t("img",{src:J,alt:"filter",class:"w-10 items-center"},null,-1),uo=t("br",null,null,-1),fo={class:"flex justify-start items-center pt-10"},po=t("img",{src:K,alt:"filter",class:"w-10 items-center"},null,-1),_o=t("h1",{class:"text-center font-bold text-lg"},"Búsqueda",-1),mo={class:"flex justify-center"};function bo(c,o,a,e,y,x){const i=d("arrow-back"),n=d("home-page"),m=d("title-bar"),D=d("select-base"),b=d("button-base"),r=d("form-consulta-busqueda");return f(),w("main",Q,[t("div",W,[l(i),l(n)]),l(m,{title:"Consulta MAOF",subtitle:"Agenda de Estimaciones"}),t("section",X,[t("div",Y,[t("div",{class:"px-10 text-green cursor-pointer",onClick:o[0]||(o[0]=s=>e.getStatusEstimations())},oo),t("div",{class:"px-10 text-red cursor-pointer",onClick:o[1]||(o[1]=s=>e.getStatusEstimations())},so),t("div",{class:"px-10 cursor-pointer",onClick:o[2]||(o[2]=s=>e.getStatusEstimations())},ro)]),t("div",io,[t("div",no,[co,l(D,{label:"Filtros",class:"text-center w-48 mr-10",id:"filtros",options:e.app.filtro.listFiltros,modelValue:e.app.filtro.tipoDocumento,"onUpdate:modelValue":o[3]||(o[3]=s=>e.app.filtro.tipoDocumento=s),onChange:o[4]||(o[4]=s=>e.getDocsByType(e.app.filtro.tipoDocumento))},null,8,["options","modelValue"]),e.app.filtro.listDocsFiltrados!=""&&e.app.filtro.tipoDocumento!==""?(f(),v(D,{key:0,label:"",class:"text-center w-48 ml-36",id:"filtrosDocs",options:e.app.filtro.listDocsFiltrados,modelValue:e.app.filtro.filtroDocValue,"onUpdate:modelValue":o[5]||(o[5]=s=>e.app.filtro.filtroDocValue=s)},null,8,["options","modelValue"])):h("",!0),e.app.filtro.listDocsFiltrados!=""&&e.app.filtro.tipoDocumento!==""?(f(),v(b,{key:1,label:"Aplicar",class:M(["border-gray text-black hover:bg-white hover:text-red",{"ml-[36rem]":e.app.filtro.tipoDocumento==="1"," ml-[3.7rem]":e.app.filtro.tipoDocumento!=="1"&&e.app.filtro.filtroDocValue===""," ml-[0rem]":e.app.filtro.tipoDocumento!=="1"&&e.app.filtro.filtroDocValue!==""}]),onClick:o[6]||(o[6]=s=>e.saveFiltro(e.app.filtro.filtroDocValue))},null,8,["class"])):h("",!0),e.app.filtro.tipoDocumento==="4"?(f(),v(b,{key:2,label:"Aplicar",class:"ml-40 border-gray text-black hover:bg-white hover:text-red",onClick:o[7]||(o[7]=s=>e.saveFiltro(5))})):h("",!0)]),C(" Id tipoDocumento "+F(e.app.filtro.tipoDocumento)+" ",1),uo,C(" id filtroDocValue "+F(e.app.filtro.filtroDocValue)+" ",1),t("div",fo,[po,_o,l(b,{label:"Criterio de búsqueda",class:"ml-5 border-gray text-black hover:bg-white hover:text-red",onClick:e.showBusqueda},null,8,["onClick"])])]),t("div",mo,[e.showBusquedaValue?(f(),v(r,{key:0,onSubmit:e.saveBusqueda,class:"mt-20"},null,8,["onSubmit"])):h("",!0)])])])}const wo=V(L,[["render",bo]]);export{wo as default};
