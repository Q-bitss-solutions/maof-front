import{I as b}from"./InputBase-4fe4b93b.js";import{B as u}from"./fetchApi-580c81dd.js";import{S as v}from"./SelectBase-32ba122c.js";import{f as R}from"./reviewArea-92e262a4.js";import{f as y}from"./users-18b9150d.js";import{S as E}from"./sweetalert2.all-281a79b7.js";import{_ as V,m as A,b as n,o as m,c as h,g as c,h as _,e as f}from"./index-9f5a0b1b.js";const B={name:"FormResident",props:{editMode:{type:Boolean,default:!1},resident:{type:Object,default:()=>({})}},components:{InputBase:b,ButtonBase:u,SelectBase:v},setup(l,{emit:o}){const a=A({resident:{id_empleado_maof:"",fecha_inicio_residente:"",fecha_fin_residente:""},idAreaRevisora:"",disabled:!1,listReviewAreas:[],listEmpleados:[]});l.editMode&&(a.resident=l.resident,a.resident.fecha_inicio_residente=l.resident.fecha_inicio_residente.split("-").reverse().join("-"));const e=()=>o("submit",a.resident),r=async()=>{const{data:i}=await R();a.listReviewAreas=i.map(s=>({value:s.id_unidad_maof,label:s.nombre_unidad}))},p=async()=>{try{const{data:i}=await y(a.idAreaRevisora);let s=[];i.forEach(d=>{d.rol_maof==="Residente"&&s.push({value:d.empleado_maof,label:d.nombre_completo})}),a.listEmpleados=s,a.disabled=!1}catch(i){E.fire("Error",`${i.response.data.detail}`,"error"),a.disabled=!0,a.listEmpleados=[]}};return r(),{app:a,sendForm:e,getReviewAreas:r,getEmpleadosSICT:p}}},w={class:"max-w-xl mx-auto"};function F(l,o,a,e,r,p){const i=n("select-base"),s=n("input-base"),d=n("button-base");return m(),h("div",w,[a.editMode!==!0?(m(),c(i,{key:0,id:"id_area_revisora",label:"Área revisora",options:e.app.listReviewAreas,modelValue:e.app.idAreaRevisora,"onUpdate:modelValue":o[0]||(o[0]=t=>e.app.idAreaRevisora=t),onChange:o[1]||(o[1]=t=>e.getEmpleadosSICT()),class:"mb-3"},null,8,["options","modelValue"])):_("",!0),a.editMode!==!0?(m(),c(i,{key:1,id:"id_empleado_maof",label:"Empleado MAOF",options:e.app.listEmpleados,class:"mb-3",modelValue:e.app.resident.id_empleado_maof,"onUpdate:modelValue":o[2]||(o[2]=t=>e.app.resident.id_empleado_maof=t),disabled:e.app.disabled},null,8,["options","modelValue","disabled"])):_("",!0),f(s,{id:"fecha_inicio_proyecto",label:"Fecha inicio del residente",type:"date",class:"mb-3",modelValue:e.app.resident.fecha_inicio_residente,"onUpdate:modelValue":o[3]||(o[3]=t=>e.app.resident.fecha_inicio_residente=t)},null,8,["modelValue"]),f(d,{label:"Guardar",onClick:e.sendForm,class:"mr-0 ml-auto",disabled:e.app.disabled},null,8,["onClick","disabled"])])}const O=V(B,[["render",F]]);export{O as F};
