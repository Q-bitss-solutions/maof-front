import{T as R,D as g}from"./DetailEstimate-ad81c8e5.js";import{T as v}from"./TableBase-6582d812.js";import{f as w,a as I,b as T}from"./residentEstimate-f98c34ff.js";import{A}from"./ArrowBack-e6c8a65f.js";import{H as B}from"./HomePage-f71174c1.js";import{B as N,a as C}from"./auth-f1c010b2.js";import{T as y}from"./ToggleSwtich-ce9b2d62.js";import{L as k}from"./LogoutComponent-c8cac54b.js";import{_ as x,u as D,r as b,a as o,o as E,c as O,b as d,d as s,f as V,g as j}from"./index-9c7881ce.js";import{T as H}from"./TitleBar-a7fd04ba.js";import"./sweetalert2.all-281a79b7.js";import"./assingResident-cc83d359.js";import"./contract-980fe056.js";import"./PDF-a4bdfbbc.js";const S={name:"ResidentEstimateIndex",components:{TableroEstimacionResidente:R,ArrowBack:A,HomePage:B,ButtonBase:N,TitleBar:H,TableBase:v,ToggleSwitch:y,DetailEstimate:g,LogoutComponent:k},setup(){const h=C(),{rol:r}=h.getAuthData,n=D(),t=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],m=b([]),_=b([]);let i=!1,c=b(!1);const l=async()=>{const{data:e}=await w();m.value=e},f=[{label:"Detalles",action:async e=>{c.value=!c.value;const{data:a}=await I(e.id_estimacion);a.fecha_recepcion_info_contratista=a.fecha_recepcion_info_contratista.split(" ")[0],a.fecha_periodo_inicio_estimacion=a.fecha_periodo_inicio_estimacion.split(" ")[0],a.fecha_periodo_fin_estimacion=a.fecha_periodo_fin_estimacion.split(" ")[0],_.value=a}},{label:"Nuevo",action:e=>n.push({name:"NewResidentEstimateById",params:{residentEstimateId:e.contrato_estimacion}})},{label:"Archivo",action:async e=>{n.push({name:"FilesResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}},{label:"Histórico",action:async e=>{n.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:e.id_estimacion}})}}],p=()=>n.push({name:"NewResidentEstimate"}),u=async()=>{if(i=!i,i===!0){const{data:e}=await T(9);m.value=e}i===!1&&l()};return l(),{residentEstimate:m,featureOptions:f,headers:t,goToNewResidentEstimate:p,getResidentEstimate:l,processo:u,procesoVariable:i,detalleEstimacionData:_,detalleEstimacion:c,rol:r}}},P={class:"px-4 mt-10"},F={class:"flex justify-between"},z={class:"px-4"},G={class:"flex justify-end"};function L(h,r,n,t,m,_){const i=o("arrow-back"),c=o("home-page"),l=o("logout-component"),f=o("title-bar"),p=o("detail-estimate"),u=o("button-base"),e=o("toggle-switch"),a=o("tablero-estimacion-residente");return E(),O("main",P,[d("div",F,[s(i),d("div",null,[s(c),s(l)])]),s(f,{title:"Estimación Residente",subtitle:"Inicio"}),d("section",z,[d("div",G,[s(p,{data:t.detalleEstimacionData,isOpen:t.detalleEstimacion,onSubmit:r[0]||(r[0]=M=>t.detalleEstimacion=!1)},null,8,["data","isOpen"]),t.rol=="Residente"?(E(),V(u,{key:0,label:"Nueva Estimación Residente",onClick:t.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"])):j("",!0),s(e,{label:"En Proceso",onChange:t.processo,class:"mb-3 mr-0 ml-10"},null,8,["onChange"])]),s(a,{options:t.featureOptions,headers:t.headers,data:t.residentEstimate},null,8,["options","headers","data"])])])}const ie=x(S,[["render",L]]);export{ie as default};
