import{I as b}from"./InputBase-069e1973.js";import{B as u}from"./ButtonBase-41bc6cfe.js";import{S as v}from"./SelectBase-7bb38132.js";import{f as R}from"./reviewArea-d086d2f6.js";import{f as y}from"./fetchApi-a406ff59.js";import{S as E}from"./sweetalert2.all-281a79b7.js";import{_ as V,k as A,a as n,o as r,c as w,e as c,f as p,g as _}from"./index-4e9c12ea.js";const B=t=>y({url:`/cat_empleados_sict/?unidad_sict=${t}`,method:"GET"}),C={name:"FormResident",props:{editMode:{type:Boolean,default:!1},resident:{type:Object,default:()=>({})}},components:{InputBase:b,ButtonBase:u,SelectBase:v},setup(t,{emit:o}){const e=A({resident:{id_empleado_sict:"",fecha_inicio_residente:"",fecha_fin_residente:""},idAreaRevisora:"",disabled:!1,listReviewAreas:[],listEmpleados:[]});t.editMode&&(e.resident=t.resident,e.resident.fecha_inicio_residente=t.resident.fecha_inicio_residente.split("-").reverse().join("-"));const a=()=>o("submit",e.resident),l=async()=>{const{data:i}=await R();console.log(i),e.listReviewAreas=i.map(s=>({value:s.id_unidad_maof,label:s.nombre_unidad})),console.log(e.listReviewAreas)},m=async()=>{try{const{data:i}=await B(e.idAreaRevisora);e.listEmpleados=i.map(s=>({value:s.empleado_sict,label:s.nombre_completo})),e.disabled=!1}catch(i){E.fire("Error",`${i.response.data.detail}`,"error"),e.disabled=!0,e.listEmpleados=[]}};return l(),{app:e,sendForm:a,getReviewAreas:l,getEmpleadosSICT:m}}},h={class:"max-w-xl mx-auto"};function k(t,o,e,a,l,m){const i=n("select-base"),s=n("input-base"),f=n("button-base");return r(),w("div",h,[e.editMode!==!0?(r(),c(i,{key:0,id:"id_area_revisora",label:"Ãrea revisora",options:a.app.listReviewAreas,modelValue:a.app.idAreaRevisora,"onUpdate:modelValue":o[0]||(o[0]=d=>a.app.idAreaRevisora=d),onChange:o[1]||(o[1]=d=>a.getEmpleadosSICT()),class:"mb-3"},null,8,["options","modelValue"])):p("",!0),e.editMode!==!0?(r(),c(i,{key:1,id:"id_empleado_sict",label:"Empleado SICT",options:a.app.listEmpleados,class:"mb-3",modelValue:a.app.resident.id_empleado_sict,"onUpdate:modelValue":o[2]||(o[2]=d=>a.app.resident.id_empleado_sict=d),disabled:a.app.disabled},null,8,["options","modelValue","disabled"])):p("",!0),_(s,{id:"fecha_inicio_proyecto",label:"Fecha inicio del residente",type:"date",class:"mb-3",modelValue:a.app.resident.fecha_inicio_residente,"onUpdate:modelValue":o[3]||(o[3]=d=>a.app.resident.fecha_inicio_residente=d)},null,8,["modelValue"]),_(f,{label:"Guardar",onClick:a.sendForm,class:"mr-0 ml-auto",disabled:a.app.disabled},null,8,["onClick","disabled"])])}const U=V(C,[["render",k]]);export{U as F};
