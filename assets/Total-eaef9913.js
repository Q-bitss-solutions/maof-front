import{T as y,D as T}from"./DetailEstimate-972c9698.js";import{A as w}from"./ArrowBack-d291de79.js";import{T as C}from"./TitleBar-f10748a0.js";import{H as N}from"./HomePage-4a126370.js";import{B as k}from"./fetchApi-ad601357.js";import{T as A}from"./ToggleSwtich-035824ed.js";import{_ as B,a as D,r as b,u as I,b as a,o as h,c as x,d,e as n,t as O,g as v,h as R}from"./index-7fa234a7.js";import"./sweetalert2.all-281a79b7.js";import{a as S}from"./residentEstimate-9b9575eb.js";import{c as P}from"./consultas-eb2d9f1d.js";import{L as V}from"./LogoutComponent-43b9f8f1.js";import"./contract-9e3cb0c4.js";import"./PDF-a4bdfbbc.js";const F={name:"ConsultaPendientes",components:{TableroEstimacionResidente:y,ArrowBack:w,HomePage:N,ButtonBase:k,TitleBar:C,DetailEstimate:T,ToggleSwitch:A,LogoutComponent:V},setup(){const E=D(),{rol:l}=E.getAuthData,i=b({total:{},loading:!0}),e=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],g=[{label:"Detalles",action:async t=>{m.value=!m.value;const{data:o}=await S(t.id_estimacion);o.fecha_recepcion_info_contratista=o.fecha_recepcion_info_contratista.split(" ")[0],o.fecha_periodo_inicio_estimacion=o.fecha_periodo_inicio_estimacion.split(" ")[0],o.fecha_periodo_fin_estimacion=o.fecha_periodo_fin_estimacion.split(" ")[0],_.value=o}},{label:"Nuevo",disabled:l!="Residente",action:t=>c.push({name:"NewResidentEstimateById",params:{residentEstimateId:t.contrato_estimacion}})},{label:"Archivo",action:async t=>{c.push({name:"FilesResidentEstimate",params:{residentEstimateId:t.id_estimacion}})}},{label:"Histórico",action:async t=>{c.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:t.id_estimacion}})}}],c=I(),r=P(),_=b([]);let m=b(!1),s=!1;const p=async()=>{s=!s,s===!0&&(i.value.total=r.filtros.pendientes),s===!1&&(i.value.total=r.filtros.total)},u=()=>c.push({name:"NewResidentEstimate"}),f=()=>{i.value.loading=!0,i.value.total=r.filtros.total,i.value.loading=!1};return f(),{app:i,procesoVariable:s,headers:e,featureOptions:g,detalleEstimacionData:_,detalleEstimacion:m,rol:l,goToNewResidentEstimate:u,getQuery:f,processo:p}}},H={class:"px-4 mt-10"},j={class:"flex justify-between"},z={class:"flex justify-center items-center"},G={class:"text-black font-semibold mr-4 items-center content-center"},L={class:"px-4"},M={class:"flex justify-end"};function Q(E,l,i,e,g,c){const r=a("arrow-back"),_=a("home-page"),m=a("logout-component"),s=a("title-bar"),p=a("detail-estimate"),u=a("button-base"),f=a("toggle-switch"),t=a("tablero-estimacion-residente");return h(),x("main",H,[d("div",j,[n(r),d("div",z,[d("p",G,O(e.rol),1),n(_),n(m)])]),n(s,{title:"Estimación Residente",subtitle:"Totales"}),d("section",L,[d("div",M,[n(p,{data:e.detalleEstimacionData,isOpen:e.detalleEstimacion,onSubmit:l[0]||(l[0]=o=>e.detalleEstimacion=!1)},null,8,["data","isOpen"]),e.rol=="Residente"?(h(),v(u,{key:0,label:"Nueva Estimación Residente",onClick:e.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"])):R("",!0),n(f,{label:"En Proceso",onChange:e.processo,class:"mb-3 mr-0 ml-10"},null,8,["onChange"])]),e.app.loading?R("",!0):(h(),v(t,{key:0,options:e.featureOptions,headers:e.headers,data:e.app.total},null,8,["options","headers","data"]))])])}const ie=B(F,[["render",Q]]);export{ie as default};
