import{T as v,D as g}from"./DetailEstimate-da4a1e46.js";import{A as y}from"./ArrowBack-118203f2.js";import{T as A}from"./TitleBar-634d05d1.js";import{H as N}from"./HomePage-bcf53f11.js";import{B as k}from"./fetchApi-cf1b52b8.js";import{_ as B,a as D,r as f,u as I,b as o,o as u,c as w,d as l,e as r,t as x,g as E,h as R}from"./index-aacd3d9f.js";import"./sweetalert2.all-281a79b7.js";import{L as C}from"./LogoutComponent-1aef6940.js";import{a as T}from"./residentEstimate-98c0bfae.js";import{c as O}from"./consultas-7cdc8815.js";import"./contract-978b80e6.js";import"./PDF-a4bdfbbc.js";const S={name:"ResponsableEstimacionMAOF",components:{TableroEstimacionResidente:v,ArrowBack:y,HomePage:N,ButtonBase:k,TitleBar:A,DetailEstimate:g,LogoutComponent:C},setup(){const b=D(),{rol:i}=b.getAuthData,s=f({responsable_estimacion:[],loading:!0}),e=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],h=[{label:"Detalles",action:async t=>{c.value=!c.value;const{data:a}=await T(t.id_estimacion);a.fecha_recepcion_info_contratista=a.fecha_recepcion_info_contratista.split(" ")[0],a.fecha_periodo_inicio_estimacion=a.fecha_periodo_inicio_estimacion.split(" ")[0],a.fecha_periodo_fin_estimacion=a.fecha_periodo_fin_estimacion.split(" ")[0],m.value=a}},{label:"Nuevo",disabled:i!="Residente",action:t=>n.push({name:"NewResidentEstimateById",params:{residentEstimateId:t.contrato_estimacion}})},{label:"Archivo",action:async t=>{n.push({name:"FilesResidentEstimate",params:{residentEstimateId:t.id_estimacion}})}},{label:"Histórico",action:async t=>{n.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:t.id_estimacion}})}}],n=I(),_=O(),m=f([]);let c=f(!1);const p=()=>n.push({name:"NewResidentEstimate"}),d=()=>{s.value.loading=!0,s.value.responsable_estimacion=_.filtros.responsableEstimacion,s.value.loading=!1};return d(),{app:s,headers:e,featureOptions:h,detalleEstimacionData:m,detalleEstimacion:c,rol:i,goToNewResidentEstimate:p,getQuery:d}}},F={class:"px-4 mt-10"},j={class:"flex justify-between"},H={class:"flex justify-center items-center"},V={class:"text-black font-semibold mr-4 items-center content-center"},M={class:"px-4"},P={class:"flex justify-end"};function z(b,i,s,e,h,n){const _=o("arrow-back"),m=o("home-page"),c=o("logout-component"),p=o("title-bar"),d=o("detail-estimate"),t=o("button-base"),a=o("tablero-estimacion-residente");return u(),w("main",F,[l("div",j,[r(_),l("div",H,[l("p",V,x(e.rol),1),r(m),r(c)])]),r(p,{title:"Estimación Residente",subtitle:"Estimaciones bajo su responsabilidad"}),l("section",M,[l("div",P,[r(d,{data:e.detalleEstimacionData,isOpen:e.detalleEstimacion,onSubmit:i[0]||(i[0]=G=>e.detalleEstimacion=!1)},null,8,["data","isOpen"]),e.rol=="Residente"?(u(),E(t,{key:0,label:"Nueva Estimación Residente",onClick:e.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"])):R("",!0)]),e.app.loading?R("",!0):(u(),E(a,{key:0,options:e.featureOptions,headers:e.headers,data:e.app.responsable_estimacion},null,8,["options","headers","data"]))])])}const te=B(S,[["render",z]]);export{te as default};
