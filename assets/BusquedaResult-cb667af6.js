import{T as E,D as g}from"./DetailEstimate-3565ec35.js";import{T as v}from"./TitleBar-474b18e0.js";import{B as R}from"./fetchApi-310f3a8f.js";import{T as B}from"./ToggleSwtich-2a099ee4.js";import{_ as C,r as f,u as A,b as l,o as b,c as q,e as r,d as h,g as I,h as N}from"./index-4f9f8ac2.js";import{a as T}from"./residentEstimate-74e9ae78.js";import{c as y}from"./consultas-045143bd.js";import{C as D}from"./CustomHeaderApp-eca25b67.js";import"./contract-24952fae.js";import"./PDF-a4bdfbbc.js";import"./ArrowBack-73665793.js";import"./HomePage-c475aeba.js";import"./LogoutComponent-82eaf1e5.js";const O={name:"ConsultasBusquedaMAOF",components:{TableroEstimacionResidente:E,ButtonBase:R,TitleBar:v,DetailEstimate:g,ToggleSwitch:B,CustomHeaderApp:D},setup(){const t=f({busqueda:{},loading:!0}),c=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],p=[{label:"Detalles",action:async a=>{i.value=!i.value;const{data:s}=await T(a.id_estimacion);s.fecha_recepcion_info_contratista=s.fecha_recepcion_info_contratista.split(" ")[0],s.fecha_periodo_inicio_estimacion=s.fecha_periodo_inicio_estimacion.split(" ")[0],s.fecha_periodo_fin_estimacion=s.fecha_periodo_fin_estimacion.split(" ")[0],m.value=s}},{label:"Nuevo",action:a=>e.push({name:"NewResidentEstimateById",params:{residentEstimateId:a.contrato_estimacion}})},{label:"Archivo",action:async a=>{e.push({name:"FilesResidentEstimate",params:{residentEstimateId:a.id_estimacion}})}},{label:"Histórico",action:async a=>{e.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:a.id_estimacion}})}}],e=A(),d=y(),m=f([]);let i=f(!1),o=!1;const u=async()=>{o=!o,o===!0&&(t.value.loading=!0,t.value.busqueda=t.value.busqueda.filter(a=>a.estatus_semaforo!=="Pago Efectuado"),t.value.loading=!1),o===!1&&n()},_=()=>e.push({name:"NewResidentEstimate"}),n=()=>{t.value.loading=!0,console.log(d.busqueda),t.value.busqueda=d.busqueda,t.value.loading=!1};return n(),{app:t,procesoVariable:o,headers:c,featureOptions:p,detalleEstimacionData:m,detalleEstimacion:i,goToNewResidentEstimate:_,getQuery:n,processo:u}}},w={class:"px-4 mt-10"},x={class:"px-4"},F={class:"flex justify-end"};function H(t,c,p,e,d,m){const i=l("CustomHeaderApp"),o=l("title-bar"),u=l("detail-estimate"),_=l("toggle-switch"),n=l("tablero-estimacion-residente");return b(),q("main",w,[r(i),r(o,{title:"Estimación Residente",subtitle:"Busqueda"}),h("section",x,[h("div",F,[r(u,{data:e.detalleEstimacionData,isOpen:e.detalleEstimacion,onSubmit:c[0]||(c[0]=a=>e.detalleEstimacion=!1)},null,8,["data","isOpen"]),r(_,{label:"En Proceso",onChange:e.processo,class:"mb-3 mr-0 ml-10"},null,8,["onChange"])]),e.app.loading?N("",!0):(b(),I(n,{key:0,options:e.featureOptions,headers:e.headers,data:e.app.busqueda},null,8,["options","headers","data"]))])])}const U=C(O,[["render",H]]);export{U as default};
