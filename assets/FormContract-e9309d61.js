import{I as m}from"./InputBase-509f2428.js";import{B as _}from"./fetchApi-cdd6cb3e.js";import{S as b}from"./SelectBase-b68b9840.js";import{f as u}from"./project-471c83d3.js";import{f}from"./reviewArea-85f8b2ad.js";import{f as V}from"./contractor-f5cd4ed4.js";import{_ as v,r as y,f as s,g as j,l as z,v as r}from"./index-920dd253.js";const C={name:"FormContract",props:{editMode:{type:Boolean,default:!1},contract:{type:Object,default:()=>({})}},components:{InputBase:m,ButtonBase:_,SelectBase:b},setup(i,{emit:a}){const l=y({contract:{id_proyecto:"",id_contratista:"",id_area_revisora:"",monto_sin_iva:"",plazo_inicio:"",plazo_fin:"",objeto_contrato:""},listProjects:[],listContractors:[],listReviewAreas:[]});i.editMode&&(l.contract=i.contract,l.contract.plazo_inicio=i.contract.plazo_inicio.split("-").reverse().join("-"),l.contract.plazo_fin=i.contract.plazo_fin.split("-").reverse().join("-"));const o=()=>a("submit",l.contract),p=async()=>{const{data:e}=await u();l.listProjects=e.map(n=>({value:n.id_proyecto,label:n.nombre_proyecto}))},d=async()=>{const{data:e}=await V();l.listContractors=e.map(n=>({value:n.id_contratista,label:n.nombre_contratista}))},c=async()=>{const{data:e}=await f();l.listReviewAreas=e.map(n=>({value:n.id,label:n.nombre_unidad}))};return p(),d(),c(),{app:l,sendForm:o}}},w={class:"max-w-xl mx-auto"};function B(i,a,l,o,p,d){const c=s("select-base"),e=s("input-base"),n=s("button-base");return j(),z("div",w,[r(c,{id:"id_proyecto",label:"Proyecto",modelValue:o.app.contract.id_proyecto,"onUpdate:modelValue":a[0]||(a[0]=t=>o.app.contract.id_proyecto=t),options:o.app.listProjects,class:"mb-3"},null,8,["modelValue","options"]),r(c,{id:"id_contratista",label:"Contratista",modelValue:o.app.contract.id_contratista,"onUpdate:modelValue":a[1]||(a[1]=t=>o.app.contract.id_contratista=t),options:o.app.listContractors,class:"mb-3"},null,8,["modelValue","options"]),r(c,{id:"area_revisora",label:"Área revisora",modelValue:o.app.contract.id_area_revisora,"onUpdate:modelValue":a[2]||(a[2]=t=>o.app.contract.id_area_revisora=t),options:o.app.listReviewAreas,class:"mb-3"},null,8,["modelValue","options"]),r(e,{id:"monto_sin_iva",label:"Monto sin IVA",placeholder:"Escribe el monto sin IVA",type:"number",modelValue:o.app.contract.monto_sin_iva,"onUpdate:modelValue":a[3]||(a[3]=t=>o.app.contract.monto_sin_iva=t),class:"mb-3"},null,8,["modelValue"]),r(e,{id:"objeto_contrato",label:"Objeto contrato",placeholder:"Escribe el objeto contrato",modelValue:o.app.contract.objeto_contrato,"onUpdate:modelValue":a[4]||(a[4]=t=>o.app.contract.objeto_contrato=t),class:"mb-4"},null,8,["modelValue"]),r(e,{id:"plazo_inicio",label:"Fecha inicio",type:"date",modelValue:o.app.contract.plazo_inicio,"onUpdate:modelValue":a[5]||(a[5]=t=>o.app.contract.plazo_inicio=t),class:"mb-4"},null,8,["modelValue"]),r(e,{id:"plazo_fin",label:"Fecha fin",type:"date",modelValue:o.app.contract.plazo_fin,"onUpdate:modelValue":a[6]||(a[6]=t=>o.app.contract.plazo_fin=t),class:"mb-4"},null,8,["modelValue"]),r(n,{label:"Guardar",onClick:o.sendForm,class:"mr-0 ml-auto"},null,8,["onClick"])])}const k=v(C,[["render",B]]);export{k as F};
