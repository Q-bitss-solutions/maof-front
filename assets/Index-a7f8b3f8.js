import{T as p}from"./TableBase-a5ffb511.js";import{f as b,d as f}from"./users-defe7bca.js";import{A as B}from"./ArrowBack-4e8cf96d.js";import{B as h}from"./ButtonBase-f4a85546.js";import{_ as w,u as v,r as _,a as n,o as A,c as C,g as i,b as E}from"./index-0f034145.js";import{T as U}from"./fetchApi-9b5c6a20.js";import{S as t}from"./sweetalert2.all-281a79b7.js";const O={name:"UsersRolesMAOFIndex",components:{TableBase:p,ArrowBack:B,ButtonBase:h,TitleBar:U},setup(){const c=v(),d=[{label:"Id",field:"id"},{label:"Nombre",field:"nombre_completo"},{label:"Unidad MAOF",field:"unidad_maof"},{label:"Correo",field:"email"},{label:"Rol MAOF",field:"rol"},{label:"Estatus",field:"estatus_usuario"}],l=_([]),o=_({estatus_usuario:""}),r=async()=>{const{data:e}=await b();l.value=e},m=[{label:"Editar",action:e=>{console.log(e),c.push({name:"EditUsersRolesMAOF",params:{userRolMAOFId:e.id}})}},{label:"Cambio Estatus",action:async e=>{e.estatus_usuario==="Activo"&&t.fire({title:`Estás seguro que desea inactivar al usuario "${e.nombre_completo}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Inactivar!",reverseButtons:!0}).then(async a=>{if(a.isConfirmed)try{o.estatus_usuario=2,await f(e.id,o),await r(),t.fire("¡Inactivo!","El usuario se inactivó","success")}catch(s){t.fire("Error",`${s.response.data.detail}`,"error")}}),e.estatus_usuario==="Desactivado"&&t.fire({title:`Estás seguro que desea activar al usuario "${e.nombre_completo}"?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Activar!",reverseButtons:!0}).then(async a=>{if(a.isConfirmed)try{o.estatus_usuario=0,await f(e.id,o),await r(),t.fire("¡Activo!","El usuario se activó","success")}catch(s){t.fire("Error",`${s.response.data.detail}`,"error")}})}}],u=()=>c.push({name:"NewUsersRolesMAOF"});return r(),{userAndRols:l,userAndRolStatus:o,featureOptions:m,headers:d,goToNewUserAndRols:u}}},g={class:"px-4 mt-10"},x={class:"px-4"};function F(c,d,l,o,r,m){const u=n("arrow-back"),e=n("title-bar"),a=n("button-base"),s=n("table-base");return A(),C("main",g,[i(u),i(e,{title:"Usuarios y Roles MAOF",subtitle:"Inicio"}),E("section",x,[i(a,{label:"Alta de Usuarios MAOF",onClick:o.goToNewUserAndRols,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),i(s,{options:o.featureOptions,headers:o.headers,data:o.userAndRols},null,8,["options","headers","data"])])])}const S=w(O,[["render",F]]);export{S as default};
