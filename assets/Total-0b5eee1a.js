import{T,D as w}from"./DetailEstimate-32fb1380.js";import{A as C}from"./ArrowBack-70eddf27.js";import{T as N}from"./TitleBar-5421c6de.js";import{H as y}from"./HomePage-0d33632e.js";import{B as A}from"./fetchApi-86472177.js";import{T as B}from"./ToggleSwtich-12eb6950.js";import{_ as k,a as I,r as b,u as D,b as a,o as h,c as x,d as f,e as n,g as v,h as R}from"./index-defa86dc.js";import"./sweetalert2.all-281a79b7.js";import{f as O}from"./residentEstimate-0f7626c1.js";import{c as S}from"./consultas-a1e22236.js";import{L as P}from"./LogoutComponent-152cc52a.js";import"./contract-b40c563e.js";import"./PDF-a4bdfbbc.js";const V={name:"ConsultaPendientes",components:{TableroEstimacionResidente:T,ArrowBack:C,HomePage:y,ButtonBase:A,TitleBar:N,DetailEstimate:w,ToggleSwitch:B,LogoutComponent:P},setup(){const E=I(),{rol:m}=E.getAuthData,i=b({total:{},loading:!0}),e=[{label:"#",field:""},{label:"Contrato o Convenio de Colaboración",field:"numero_contrato"},{label:"Convenio Modificatorio",field:"numero_contrato_padre"},{label:" ",field:"documents"},{label:"# Estimación",field:"num_consecutivo_estimacion"},{label:"Inicio",field:"fecha_periodo_inicio_estimacion"},{label:"Fin",field:"fecha_periodo_fin_estimacion"},{label:"Alta",field:"fecha_alta"},{label:"Fecha de autorización",field:"fecha_autorizacion_contratista"},{label:"Días transcurridos",field:"dias_transcurridos"},{label:"RESIDENTE",field:"estatus_semaforo"},{label:"ÁREA REVISORA",field:"estatus_semaforo"},{label:"FINANZAS",field:"estatus_semaforo"},{label:"TRÁMITE DE PAGO",field:"estatus_semaforo"},{label:"PAGO",field:"estatus_semaforo"}],g=[{label:"Detalles",action:async t=>{r.value=!r.value;const{data:o}=await O(t.id_estimacion);o.fecha_recepcion_info_contratista=o.fecha_recepcion_info_contratista.split(" ")[0],o.fecha_periodo_inicio_estimacion=o.fecha_periodo_inicio_estimacion.split(" ")[0],o.fecha_periodo_fin_estimacion=o.fecha_periodo_fin_estimacion.split(" ")[0],d.value=o}},{label:"Nuevo",action:t=>l.push({name:"NewResidentEstimateById",params:{residentEstimateId:t.contrato_estimacion}})},{label:"Archivo",action:async t=>{l.push({name:"FilesResidentEstimate",params:{residentEstimateId:t.id_estimacion}})}},{label:"Histórico",action:async t=>{l.push({name:"HistoricoResidentEstimate",params:{residentEstimateId:t.id_estimacion}})}}],l=D(),c=S(),d=b([]);let r=b(!1),s=!1;const p=async()=>{s=!s,s===!0&&(i.value.total=c.filtros.pendientes),s===!1&&(i.value.total=c.filtros.total)},u=()=>l.push({name:"NewResidentEstimate"}),_=()=>{i.value.loading=!0,i.value.total=c.filtros.total,i.value.loading=!1};return _(),{app:i,procesoVariable:s,headers:e,featureOptions:g,detalleEstimacionData:d,detalleEstimacion:r,rol:m,goToNewResidentEstimate:u,getQuery:_,processo:p}}},F={class:"px-4 mt-10"},H={class:"flex justify-between"},j={class:"px-4"},z={class:"flex justify-end"};function G(E,m,i,e,g,l){const c=a("arrow-back"),d=a("home-page"),r=a("logout-component"),s=a("title-bar"),p=a("detail-estimate"),u=a("button-base"),_=a("toggle-switch"),t=a("tablero-estimacion-residente");return h(),x("main",F,[f("div",H,[n(c),f("div",null,[n(d),n(r)])]),n(s,{title:"Estimación Residente",subtitle:"Totales"}),f("section",j,[f("div",z,[n(p,{data:e.detalleEstimacionData,isOpen:e.detalleEstimacion,onSubmit:m[0]||(m[0]=o=>e.detalleEstimacion=!1)},null,8,["data","isOpen"]),e.rol=="Residente"?(h(),v(u,{key:0,label:"Nueva Estimación Residente",onClick:e.goToNewResidentEstimate,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"])):R("",!0),n(_,{label:"En Proceso",onChange:e.processo,class:"mb-3 mr-0 ml-10"},null,8,["onChange"])]),e.app.loading?R("",!0):(h(),v(t,{key:0,options:e.featureOptions,headers:e.headers,data:e.app.total},null,8,["options","headers","data"]))])])}const te=k(V,[["render",G]]);export{te as default};
