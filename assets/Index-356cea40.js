import{T as f}from"./TableBase-7cffe17b.js";import{f as _,d as u}from"./resident-e7679e41.js";import{B as b}from"./fetchApi-ea3a2dff.js";import{_ as h,u as B,r as R,b as o,o as C,c as v,e as s,d as w}from"./index-ae47c3ce.js";import{T as x}from"./TitleBar-95cae43a.js";import{S as d}from"./sweetalert2.all-281a79b7.js";import{C as E}from"./CustomHeaderApp-790e617d.js";import"./ArrowBack-858e36ad.js";import"./HomePage-790bb899.js";import"./LogoutComponent-26312cbb.js";const I={name:"ResidenteIndex",components:{TableBase:f,ButtonBase:b,TitleBar:x,CustomHeaderApp:E},setup(){const a=B(),c=[{label:"Id",field:"id_residente"},{label:"Nombre",field:"nombre_completo"},{label:"Unidad MAOF",field:"unidad_maof"},{label:"Fecha de inicio",field:"fecha_inicio_residente"},{label:"Fecha de fin",field:"fecha_fin_residente"},{label:"Estado",field:"estado_residente"}],n=R([]),t=async()=>{const{data:e}=await _();n.value=e},l=[{label:"Editar",action:e=>{if(e.estado_residente==="Activo")a.push({name:"EditResident",params:{residentId:e.id_residente}});else return""}},{label:"Inactivar",action:async e=>{d.fire({title:`Estás seguro que deseas inactivar el residente "${e.nombre_completo}"?`,text:"Esto finalizara las asignaciones del residente",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Si, Inactivar!",reverseButtons:!0}).then(async i=>{if(i.isConfirmed)try{await u(e.id_residente),await t(),d.fire("¡Inactivo!","El residente se inactivó","success")}catch(r){d.fire("Error",`${r.response.data.detail}`,"error")}})}}],m=()=>a.push({name:"NewResident"});return t(),{resident:n,featureOptions:l,headers:c,goToNewResident:m}}},N={class:"px-4 mt-10"},T={class:"px-4"};function g(a,c,n,t,l,m){const e=o("CustomHeaderApp"),i=o("title-bar"),r=o("button-base"),p=o("table-base");return C(),v("main",N,[s(e),s(i,{title:"Residente",subtitle:"Inicio"}),w("section",T,[s(r,{label:"Nuevo Residente",onClick:t.goToNewResident,class:"mb-3 mr-0 ml-auto"},null,8,["onClick"]),s(p,{description:"Residentes",options:t.featureOptions,headers:t.headers,data:t.resident},null,8,["options","headers","data"])])])}const z=h(I,[["render",g]]);export{z as default};
